/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/constants.ts
var DEFAULT_BASE_FOLDER, DEFAULT_DIRECTORIES, OPTIONAL_DIRECTORIES, COMMAND_IDS, RIBBON_BUTTONS, DATE_FORMATS, DEFAULT_TEMPLATES, REGEX_PATTERNS;
var init_constants = __esm({
  "src/constants.ts"() {
    "use strict";
    DEFAULT_BASE_FOLDER = "LinkPlugin";
    DEFAULT_DIRECTORIES = [
      "journal",
      "templates",
      "workspace",
      "reference"
    ];
    OPTIONAL_DIRECTORIES = [
      "context",
      "schema",
      "Projects"
    ];
    COMMAND_IDS = {
      CREATE_LINKED_NOTE: "create-linked-note",
      REBUILD_DIRECTORY: "rebuild-directory-structure",
      OPEN_TODAY_JOURNAL: "open-today-journal",
      CREATE_TODAY_NOTE: "create-today-note",
      CREATE_FUTURE_NOTE: "create-future-note",
      CREATE_MONTHLY_FOLDERS: "create-monthly-folders",
      EXPAND_SHORTCODE: "expand-shortcode",
      SHOW_LINK_SUGGESTIONS: "show-link-suggestions"
    };
    RIBBON_BUTTONS = {
      TODAY_JOURNAL: {
        icon: "calendar-days",
        title: "Open Today's Journal",
        tooltip: "Open or create today's journal entry"
      },
      CREATE_NOTE: {
        icon: "file-plus",
        title: "Create Linked Note",
        tooltip: "Create a new linked note from selected text"
      },
      MONTHLY_FOLDERS: {
        icon: "folder-plus",
        title: "Create Monthly Folders",
        tooltip: "Create monthly folders for the current year"
      },
      SHORTCODE_HELP: {
        icon: "zap",
        title: "Shortcode Help",
        tooltip: "Show available shortcodes and examples"
      },
      REBUILD_STRUCTURE: {
        icon: "folder-sync",
        title: "Rebuild Directory Structure",
        tooltip: "Rebuild the plugin's directory structure"
      },
      PLUGIN_SETTINGS: {
        icon: "settings",
        title: "Link Plugin Settings",
        tooltip: "Open Link Plugin settings"
      }
    };
    DATE_FORMATS = {
      DEFAULT_JOURNAL: "YYYY-MM-DD dddd",
      ISO_DATE: "YYYY-MM-DD",
      FOLDER_FORMAT: "YYYY/MM"
    };
    DEFAULT_TEMPLATES = {
      JOURNAL: `# {{date}}

## Daily Log

## Tasks
- [ ] 

## Notes

## Reflection

---
Previous: {{previous}}
Next: {{next}}
`,
      NOTE: `---
title: {{title}}
created: {{date}}
source: {{source}}
tags: []
---

# {{title}}

`
    };
    REGEX_PATTERNS = {
      WIKI_LINK: /\[\[(.*?)\]\]/g,
      SHORTCODE: /[\w>+*{}\[\]()]+$/,
      DATE_FILENAME: /\d{4}-\d{2}-\d{2}/,
      INVALID_FILENAME_CHARS: /[\\/:*?"<>|]/g
    };
  }
});

// src/settings/directorySettings.ts
var DirectorySettings;
var init_directorySettings = __esm({
  "src/settings/directorySettings.ts"() {
    "use strict";
    init_constants();
    DirectorySettings = class {
      static getDefaults() {
        return {
          baseFolder: DEFAULT_BASE_FOLDER,
          // Creates all directories under 'LinkPlugin/' by default
          directoryStructure: DEFAULT_DIRECTORIES,
          restrictedDirectories: [],
          documentDirectory: "workspace",
          // Updated to match README structure
          journalRootFolder: "journal"
          // Updated to match README structure
        };
      }
      static validate(settings) {
        const validated = {};
        if (settings.baseFolder && typeof settings.baseFolder === "string") {
          validated.baseFolder = settings.baseFolder.trim();
        }
        if (settings.directoryStructure && Array.isArray(settings.directoryStructure)) {
          validated.directoryStructure = settings.directoryStructure;
        }
        if (settings.restrictedDirectories && Array.isArray(settings.restrictedDirectories)) {
          validated.restrictedDirectories = settings.restrictedDirectories;
        }
        if (settings.documentDirectory && typeof settings.documentDirectory === "string") {
          validated.documentDirectory = settings.documentDirectory;
        }
        if (settings.journalRootFolder && typeof settings.journalRootFolder === "string") {
          validated.journalRootFolder = settings.journalRootFolder;
        }
        return validated;
      }
    };
  }
});

// src/settings/journalSettings.ts
var JournalSettings;
var init_journalSettings = __esm({
  "src/settings/journalSettings.ts"() {
    "use strict";
    init_constants();
    JournalSettings = class {
      static getDefaults() {
        return {
          journalDateFormat: DATE_FORMATS.DEFAULT_JOURNAL,
          journalFolderFormat: DATE_FORMATS.FOLDER_FORMAT,
          journalTemplate: DEFAULT_TEMPLATES.JOURNAL
        };
      }
      static validate(settings) {
        const validated = {};
        if (settings.journalDateFormat && typeof settings.journalDateFormat === "string") {
          validated.journalDateFormat = settings.journalDateFormat;
        }
        if (settings.journalFolderFormat && typeof settings.journalFolderFormat === "string") {
          validated.journalFolderFormat = settings.journalFolderFormat;
        }
        if (settings.journalTemplate && typeof settings.journalTemplate === "string") {
          validated.journalTemplate = settings.journalTemplate;
        }
        return validated;
      }
      static isValidDateFormat(format) {
        try {
          const validTokens = ["YYYY", "MM", "DD", "dddd", "MMM", "MMMM"];
          return validTokens.some((token) => format.includes(token));
        } catch (e) {
          return false;
        }
      }
    };
  }
});

// src/settings/noteSettings.ts
var NoteSettings;
var init_noteSettings = __esm({
  "src/settings/noteSettings.ts"() {
    "use strict";
    init_constants();
    NoteSettings = class {
      static getDefaults() {
        return {
          noteTemplate: DEFAULT_TEMPLATES.NOTE,
          openNewNote: true
        };
      }
      static validate(settings) {
        const validated = {};
        if (settings.noteTemplate && typeof settings.noteTemplate === "string") {
          validated.noteTemplate = settings.noteTemplate;
        }
        if (typeof settings.openNewNote === "boolean") {
          validated.openNewNote = settings.openNewNote;
        }
        return validated;
      }
      static validateTemplate(template) {
        const errors = [];
        const requiredVars = ["{{title}}"];
        const missingVars = requiredVars.filter((varName) => !template.includes(varName));
        if (missingVars.length > 0) {
          errors.push(`Missing required template variables: ${missingVars.join(", ")}`);
        }
        const templateVarPattern = /\{\{[^}]*\}\}/g;
        const matches = template.match(templateVarPattern);
        if (matches) {
          matches.forEach((match) => {
            if (!match.endsWith("}}")) {
              errors.push(`Malformed template variable: ${match}`);
            }
          });
        }
        return {
          isValid: errors.length === 0,
          errors
        };
      }
    };
  }
});

// src/settings/shortcodeSettings.ts
var ShortcodeSettings;
var init_shortcodeSettings = __esm({
  "src/settings/shortcodeSettings.ts"() {
    "use strict";
    ShortcodeSettings = class {
      static getDefaults() {
        return {
          shortcodeEnabled: true,
          shortcodeTriggerKey: "Tab",
          customShortcodes: {}
        };
      }
      static validate(settings) {
        const validated = {};
        if (typeof settings.shortcodeEnabled === "boolean") {
          validated.shortcodeEnabled = settings.shortcodeEnabled;
        }
        if (settings.shortcodeTriggerKey && typeof settings.shortcodeTriggerKey === "string") {
          const validTriggerKeys = ["Tab", "Enter", "Space"];
          if (validTriggerKeys.includes(settings.shortcodeTriggerKey)) {
            validated.shortcodeTriggerKey = settings.shortcodeTriggerKey;
          }
        }
        if (settings.customShortcodes && typeof settings.customShortcodes === "object") {
          const validatedShortcodes = {};
          for (const [key, value] of Object.entries(settings.customShortcodes)) {
            if (typeof key === "string" && typeof value === "string") {
              if (this.isValidShortcodePattern(key) && value.trim().length > 0) {
                validatedShortcodes[key] = value;
              }
            }
          }
          validated.customShortcodes = validatedShortcodes;
        }
        return validated;
      }
      static isValidShortcodePattern(pattern) {
        const validPattern = /^[a-zA-Z0-9_\-+>*{}\[\]()]+$/;
        return validPattern.test(pattern) && pattern.length > 0 && pattern.length <= 100;
      }
      static getBuiltinShortcodes() {
        return {
          "table3x4": "Creates a 3x4 table structure",
          "h2+ul>li*3": "Creates heading with 3-item list",
          "div>h3+ul>li*5": "Creates section with heading and 5 list items",
          "link[url]{text}": "Creates markdown link"
        };
      }
    };
  }
});

// src/settings/generalSettings.ts
var GeneralSettings;
var init_generalSettings = __esm({
  "src/settings/generalSettings.ts"() {
    "use strict";
    GeneralSettings = class {
      static getDefaults() {
        return {
          debugMode: false
        };
      }
      static validate(settings) {
        const validated = {};
        if (typeof settings.debugMode === "boolean") {
          validated.debugMode = settings.debugMode;
        }
        return validated;
      }
      static getDebugInfo() {
        return {
          timestamp: new Date().toISOString(),
          userAgent: navigator.userAgent,
          platform: navigator.platform,
          language: navigator.language
        };
      }
    };
  }
});

// src/settings/settingsValidator.ts
function validateSettings(settings) {
  const validatedSettings = {
    ...DirectorySettings.getDefaults(),
    ...JournalSettings.getDefaults(),
    ...NoteSettings.getDefaults(),
    ...ShortcodeSettings.getDefaults(),
    ...GeneralSettings.getDefaults()
  };
  const directoryValidation = DirectorySettings.validate(settings);
  const journalValidation = JournalSettings.validate(settings);
  const noteValidation = NoteSettings.validate(settings);
  const shortcodeValidation = ShortcodeSettings.validate(settings);
  const generalValidation = GeneralSettings.validate(settings);
  Object.assign(
    validatedSettings,
    directoryValidation,
    journalValidation,
    noteValidation,
    shortcodeValidation,
    generalValidation
  );
  return validatedSettings;
}
function validateSettingsWithDetails(settings) {
  const errors = [];
  const warnings = [];
  if (settings.noteTemplate) {
    const templateValidation = NoteSettings.validateTemplate(settings.noteTemplate);
    if (!templateValidation.isValid) {
      errors.push(...templateValidation.errors);
    }
  }
  if (settings.journalDateFormat && !JournalSettings.isValidDateFormat(settings.journalDateFormat)) {
    warnings.push("Invalid journal date format provided, using default");
  }
  if (settings.customShortcodes) {
    for (const [pattern, expansion] of Object.entries(settings.customShortcodes)) {
      if (!ShortcodeSettings.isValidShortcodePattern(pattern)) {
        warnings.push(`Invalid shortcode pattern: ${pattern}`);
      }
    }
  }
  if (settings.directoryStructure && settings.directoryStructure.length === 0) {
    warnings.push("Empty directory structure provided, using defaults");
  }
  const validatedSettings = validateSettings(settings);
  return {
    isValid: errors.length === 0,
    errors,
    warnings,
    validatedSettings
  };
}
var init_settingsValidator = __esm({
  "src/settings/settingsValidator.ts"() {
    "use strict";
    init_directorySettings();
    init_journalSettings();
    init_noteSettings();
    init_shortcodeSettings();
    init_generalSettings();
  }
});

// src/settings/defaultSettings.ts
var DEFAULT_SETTINGS;
var init_defaultSettings = __esm({
  "src/settings/defaultSettings.ts"() {
    "use strict";
    init_directorySettings();
    init_journalSettings();
    init_noteSettings();
    init_shortcodeSettings();
    init_generalSettings();
    DEFAULT_SETTINGS = {
      ...DirectorySettings.getDefaults(),
      ...JournalSettings.getDefaults(),
      ...NoteSettings.getDefaults(),
      ...ShortcodeSettings.getDefaults(),
      ...GeneralSettings.getDefaults()
    };
  }
});

// src/settings.ts
var settings_exports = {};
__export(settings_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  DirectorySettings: () => DirectorySettings,
  GeneralSettings: () => GeneralSettings,
  JournalSettings: () => JournalSettings,
  NoteSettings: () => NoteSettings,
  ShortcodeSettings: () => ShortcodeSettings,
  validateSettings: () => validateSettings,
  validateSettingsWithDetails: () => validateSettingsWithDetails
});
var init_settings = __esm({
  "src/settings.ts"() {
    "use strict";
    init_settingsValidator();
    init_directorySettings();
    init_journalSettings();
    init_noteSettings();
    init_shortcodeSettings();
    init_generalSettings();
    init_defaultSettings();
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LinkPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian8 = require("obsidian");
init_settings();

// src/ui/settingsTab.ts
var import_obsidian = require("obsidian");
init_settings();

// src/services/dateService.ts
var DateService = class {
  /**
   * Initialize the date service with Obsidian's moment instance
   * This should be called once when the plugin loads
   */
  static initialize() {
    this.moment = window.moment;
    if (!this.moment) {
      throw new Error("Obsidian moment.js not available");
    }
  }
  /**
   * Get current date/time
   */
  static now() {
    return this.moment();
  }
  /**
   * Create moment from date input
   */
  static from(input) {
    return this.moment(input);
  }
  /**
   * Create moment from date string with format
   */
  static fromFormat(input, format, strict = true) {
    return this.moment(input, format, strict);
  }
  /**
   * Format a date using the specified format
   */
  static format(date, format = "YYYY-MM-DD") {
    const momentDate = date ? this.moment(date) : this.moment();
    return momentDate.format(format);
  }
  /**
   * Get today's date formatted
   */
  static today(format = "YYYY-MM-DD") {
    return this.moment().format(format);
  }
  /**
   * Get current year
   */
  static currentYear() {
    return this.moment().format("YYYY");
  }
  /**
   * Get current month name
   */
  static currentMonth() {
    return this.moment().format("MMMM");
  }
  /**
   * Get start of year for given date
   */
  static startOfYear(date) {
    return (date ? this.moment(date) : this.moment()).startOf("year");
  }
  /**
   * End of year for given date
   */
  static endOfYear(date) {
    return (date ? this.moment(date) : this.moment()).endOf("year");
  }
  /**
   * Start of month for given date
   */
  static startOfMonth(date) {
    return (date ? this.moment(date) : this.moment()).startOf("month");
  }
  /**
   * End of month for given date
   */
  static endOfMonth(date) {
    return (date ? this.moment(date) : this.moment()).endOf("month");
  }
  /**
   * Add time to a date
   */
  static add(date, amount, unit) {
    return this.moment(date).add(amount, unit);
  }
  /**
   * Subtract time from a date
   */
  static subtract(date, amount, unit) {
    return this.moment(date).subtract(amount, unit);
  }
  /**
   * Check if date is valid
   */
  static isValid(date) {
    return this.moment(date).isValid();
  }
  /**
   * Check if date is same or before another date
   */
  static isSameOrBefore(date1, date2) {
    return this.moment(date1).isSameOrBefore(date2);
  }
  /**
   * Extract date from filename using format
   */
  static extractDateFromFilename(filename, format) {
    try {
      const date = this.moment(filename, format, true);
      return date.isValid() ? date : null;
    } catch (error) {
      return null;
    }
  }
  /**
   * Get journal path components for a date
   */
  static getJournalPathComponents(date) {
    const momentDate = date ? this.moment(date) : this.moment();
    const year = momentDate.format("YYYY");
    const monthName = momentDate.format("MMMM");
    return {
      year,
      monthName,
      yearFolder: `y_${year}`,
      monthFolder: monthName
    };
  }
  /**
   * Get formatted filename for journal entry
   */
  static getJournalFilename(date, format = "YYYY-MM-DD dddd") {
    const momentDate = date ? this.moment(date) : this.moment();
    return momentDate.format(format);
  }
  /**
   * Get previous day
   */
  static previousDay(date) {
    const momentDate = date ? this.moment(date) : this.moment();
    return momentDate.subtract(1, "day");
  }
  /**
   * Get next day
   */
  static nextDay(date) {
    const momentDate = date ? this.moment(date) : this.moment();
    return momentDate.add(1, "day");
  }
  /**
   * Create date range iterator
   */
  static *dateRange(startDate, endDate, unit = "day") {
    const current = this.moment(startDate);
    const end = this.moment(endDate);
    while (current.isSameOrBefore(end)) {
      yield this.moment(current);
      current.add(1, unit);
    }
  }
  /**
   * Get monthly folder path for a date
   */
  static getMonthlyFolderPath(basePath, date) {
    const components = this.getJournalPathComponents(date);
    return `${basePath}/${components.yearFolder}/${components.monthFolder}`;
  }
  /**
   * Get full journal file path
   */
  static getJournalFilePath(basePath, date, format = "YYYY-MM-DD dddd") {
    const monthlyPath = this.getMonthlyFolderPath(basePath, date);
    const filename = this.getJournalFilename(date, format);
    return `${monthlyPath}/${filename}.md`;
  }
  /**
   * Validate date format string
   */
  static isValidFormat(format) {
    try {
      const testDate = this.moment();
      testDate.format(format);
      return true;
    } catch (e) {
      return false;
    }
  }
  /**
   * Get debug information about the moment instance
   */
  static getDebugInfo() {
    var _a;
    return {
      available: !!this.moment,
      version: ((_a = this.moment) == null ? void 0 : _a.version) || "unknown",
      type: typeof this.moment
    };
  }
};

// src/ui/settingsTab.ts
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "Obsidian Link Plugin Settings" });
    const description = containerEl.createEl("p");
    description.innerHTML = `
      Configure your Link Plugin settings below. Settings are organized into categories for easy management.
      <br><strong>Tip:</strong> Hover over setting names for detailed descriptions.
    `;
    description.style.marginBottom = "2em";
    description.style.color = "var(--text-muted)";
    this.addDirectorySettings(containerEl);
    this.addJournalSettings(containerEl);
    this.addNoteSettings(containerEl);
    this.addShortcodeSettings(containerEl);
    this.addGeneralSettings(containerEl);
    this.addAdvancedSettings(containerEl);
  }
  addDirectorySettings(containerEl) {
    containerEl.createEl("h2", { text: "\u{1F4C1} Directory Structure" });
    const directoryDesc = containerEl.createEl("p");
    directoryDesc.textContent = "Configure how the plugin organizes your files and folders.";
    directoryDesc.style.color = "var(--text-muted)";
    directoryDesc.style.marginBottom = "1em";
    new import_obsidian.Setting(containerEl).setName("Base Folder").setDesc("Root folder for all plugin-created directories. Prevents collision with existing vault structure.").addText((text) => text.setPlaceholder("LinkPlugin").setValue(this.plugin.settings.baseFolder).onChange(async (value) => {
      if (value.trim()) {
        this.plugin.settings.baseFolder = value.trim();
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Workspace Directory").setDesc("Directory name for general notes and documents within the base folder.").addText((text) => text.setPlaceholder("workspace").setValue(this.plugin.settings.documentDirectory).onChange(async (value) => {
      if (value.trim()) {
        this.plugin.settings.documentDirectory = value.trim();
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Journal Directory").setDesc("Directory name for journal entries within the base folder.").addText((text) => text.setPlaceholder("journal").setValue(this.plugin.settings.journalRootFolder).onChange(async (value) => {
      if (value.trim()) {
        this.plugin.settings.journalRootFolder = value.trim();
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Rebuild Directory Structure").setDesc("Recreate the directory structure based on current settings.").addButton((button) => button.setButtonText("Rebuild").setTooltip("Click to rebuild the directory structure").onClick(async () => {
      var _a;
      try {
        await this.plugin.directoryManager.rebuildDirectoryStructure();
        const notice = document.createElement("div");
        notice.textContent = "\u2705 Directory structure rebuilt successfully!";
        notice.style.color = "var(--text-success)";
        notice.style.fontWeight = "bold";
        (_a = button.buttonEl.parentElement) == null ? void 0 : _a.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      } catch (error) {
        this.plugin.errorHandler.handleError(error, "Failed to rebuild directory structure");
      }
    }));
  }
  addJournalSettings(containerEl) {
    containerEl.createEl("h2", { text: "\u{1F4C5} Journal Settings" });
    const journalDesc = containerEl.createEl("p");
    journalDesc.textContent = "Configure date formats and templates for journal entries.";
    journalDesc.style.color = "var(--text-muted)";
    journalDesc.style.marginBottom = "1em";
    new import_obsidian.Setting(containerEl).setName("Journal Date Format").setDesc("Format for journal entry filenames. Uses moment.js format tokens (e.g., YYYY-MM-DD dddd).").addText((text) => text.setPlaceholder("YYYY-MM-DD dddd").setValue(this.plugin.settings.journalDateFormat).onChange(async (value) => {
      if (value.trim()) {
        if (JournalSettings.isValidDateFormat(value)) {
          this.plugin.settings.journalDateFormat = value.trim();
          await this.plugin.saveSettings();
          this.showValidationMessage(text.inputEl, "\u2705 Valid format", "success");
        } else {
          this.showValidationMessage(text.inputEl, "\u274C Invalid date format", "error");
        }
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Journal Folder Format").setDesc("Format for organizing journal folders by date.").addText((text) => text.setPlaceholder("YYYY/MM").setValue(this.plugin.settings.journalFolderFormat).onChange(async (value) => {
      if (value.trim()) {
        this.plugin.settings.journalFolderFormat = value.trim();
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Journal Template").setDesc("Template for new journal entries. Use {{date}}, {{title}}, {{previous}}, {{next}} as placeholders.").addTextArea((text) => {
      text.inputEl.rows = 8;
      text.inputEl.style.width = "100%";
      text.inputEl.style.minHeight = "150px";
      text.setPlaceholder(`# {{date}}

## Daily Log

## Tasks
- [ ] 

## Notes

## Reflection

---
Previous: {{previous}}
Next: {{next}}`);
      text.setValue(this.plugin.settings.journalTemplate);
      text.onChange(async (value) => {
        this.plugin.settings.journalTemplate = value;
        await this.plugin.saveSettings();
      });
      return text;
    });
    new import_obsidian.Setting(containerEl).setName("Create Monthly Folders").setDesc("Pre-create monthly folders for the current year.").addButton((button) => button.setButtonText("Create Folders").setTooltip("Create all monthly folders for the current year").onClick(async () => {
      var _a;
      try {
        const startOfYear = DateService.startOfYear();
        const endOfYear = DateService.endOfYear();
        await this.plugin.journalManager.createMonthlyFoldersForRange(startOfYear, endOfYear);
        const notice = document.createElement("div");
        notice.textContent = "\u2705 Monthly folders created successfully!";
        notice.style.color = "var(--text-success)";
        notice.style.fontWeight = "bold";
        (_a = button.buttonEl.parentElement) == null ? void 0 : _a.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      } catch (error) {
        this.plugin.errorHandler.handleError(error, "Failed to create monthly folders");
      }
    }));
  }
  addNoteSettings(containerEl) {
    containerEl.createEl("h2", { text: "\u{1F4DD} Note Creation" });
    const noteDesc = containerEl.createEl("p");
    noteDesc.textContent = "Configure templates and behavior for new note creation.";
    noteDesc.style.color = "var(--text-muted)";
    noteDesc.style.marginBottom = "1em";
    new import_obsidian.Setting(containerEl).setName("Note Template").setDesc("Default template for new notes. Use {{title}}, {{date}}, {{source}} as placeholders.").addTextArea((text) => {
      text.inputEl.rows = 6;
      text.inputEl.style.width = "100%";
      text.inputEl.style.minHeight = "120px";
      text.setPlaceholder(`---
title: {{title}}
created: {{date}}
source: {{source}}
tags: []
---

# {{title}}

`);
      text.setValue(this.plugin.settings.noteTemplate);
      text.onChange(async (value) => {
        const validation = NoteSettings.validateTemplate(value);
        if (validation.isValid) {
          this.plugin.settings.noteTemplate = value;
          await this.plugin.saveSettings();
          this.showValidationMessage(text.inputEl, "\u2705 Valid template", "success");
        } else {
          this.showValidationMessage(text.inputEl, `\u274C ${validation.errors.join(", ")}`, "error");
        }
      });
      return text;
    });
    new import_obsidian.Setting(containerEl).setName("Open New Notes").setDesc("Automatically open newly created notes in the editor.").addToggle((toggle) => toggle.setValue(this.plugin.settings.openNewNote).onChange(async (value) => {
      this.plugin.settings.openNewNote = value;
      await this.plugin.saveSettings();
    }));
  }
  addShortcodeSettings(containerEl) {
    containerEl.createEl("h2", { text: "\u26A1 Shortcodes" });
    const shortcodeDesc = containerEl.createEl("p");
    shortcodeDesc.innerHTML = `
      Configure the shortcode system for rapid content creation. 
      <br><small>Example: <code>h2+ul>li*3</code> creates a heading with a 3-item list.</small>
    `;
    shortcodeDesc.style.color = "var(--text-muted)";
    shortcodeDesc.style.marginBottom = "1em";
    new import_obsidian.Setting(containerEl).setName("Enable Shortcodes").setDesc("Enable the shortcode expansion system.").addToggle((toggle) => toggle.setValue(this.plugin.settings.shortcodeEnabled).onChange(async (value) => {
      this.plugin.settings.shortcodeEnabled = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Trigger Key").setDesc("Key to trigger shortcode expansion.").addDropdown((dropdown) => dropdown.addOption("Tab", "Tab").addOption("Enter", "Enter").addOption("Space", "Space").setValue(this.plugin.settings.shortcodeTriggerKey).onChange(async (value) => {
      this.plugin.settings.shortcodeTriggerKey = value;
      await this.plugin.saveSettings();
    }));
    const builtinContainer = containerEl.createDiv();
    builtinContainer.createEl("h4", { text: "Built-in Shortcodes" });
    const builtinShortcodes = ShortcodeSettings.getBuiltinShortcodes();
    const shortcodeList = builtinContainer.createEl("ul");
    shortcodeList.style.fontSize = "0.9em";
    shortcodeList.style.color = "var(--text-muted)";
    Object.entries(builtinShortcodes).forEach(([pattern, description]) => {
      const item = shortcodeList.createEl("li");
      item.innerHTML = `<code>${pattern}</code> - ${description}`;
    });
    containerEl.createEl("h4", { text: "Custom Shortcodes" });
    containerEl.createEl("p", {
      text: "Add your own shortcode patterns. Format: pattern \u2192 expansion",
      attr: { style: "color: var(--text-muted); font-size: 0.9em; margin-bottom: 1em;" }
    });
    new import_obsidian.Setting(containerEl).setName("Add Custom Shortcode").setDesc("Create a new custom shortcode pattern.").addButton((button) => button.setButtonText("Add Shortcode").onClick(() => {
      this.showCustomShortcodeDialog();
    }));
    this.displayCustomShortcodes(containerEl);
  }
  addGeneralSettings(containerEl) {
    containerEl.createEl("h2", { text: "\u2699\uFE0F General Settings" });
    const generalDesc = containerEl.createEl("p");
    generalDesc.textContent = "General plugin configuration and debugging options.";
    generalDesc.style.color = "var(--text-muted)";
    generalDesc.style.marginBottom = "1em";
    new import_obsidian.Setting(containerEl).setName("Debug Mode").setDesc("Enable detailed logging for troubleshooting. Check the developer console for debug messages.").addToggle((toggle) => toggle.setValue(this.plugin.settings.debugMode).onChange(async (value) => {
      this.plugin.settings.debugMode = value;
      await this.plugin.saveSettings();
      if (value) {
        console.log("[LinkPlugin] Debug mode enabled");
        console.log("[LinkPlugin] Current settings:", this.plugin.settings);
        console.log("[LinkPlugin] DateService info:", DateService.getDebugInfo());
      }
    }));
  }
  addAdvancedSettings(containerEl) {
    containerEl.createEl("h2", { text: "\u{1F527} Advanced" });
    const advancedDesc = containerEl.createEl("p");
    advancedDesc.textContent = "Advanced settings and maintenance tools.";
    advancedDesc.style.color = "var(--text-muted)";
    advancedDesc.style.marginBottom = "1em";
    new import_obsidian.Setting(containerEl).setName("Validate Settings").setDesc("Check current settings for any issues or conflicts.").addButton((button) => button.setButtonText("Validate").onClick(() => {
      var _a, _b;
      const validation = validateSettingsWithDetails(this.plugin.settings);
      const resultEl = document.createElement("div");
      resultEl.style.marginTop = "10px";
      resultEl.style.padding = "10px";
      resultEl.style.borderRadius = "4px";
      resultEl.style.border = "1px solid var(--background-modifier-border)";
      if (validation.isValid) {
        resultEl.style.backgroundColor = "var(--background-modifier-success)";
        resultEl.innerHTML = "<strong>\u2705 All settings are valid!</strong>";
      } else {
        resultEl.style.backgroundColor = "var(--background-modifier-error)";
        let content = "<strong>\u274C Settings validation failed:</strong><ul>";
        validation.errors.forEach((error) => {
          content += `<li>${error}</li>`;
        });
        content += "</ul>";
        if (validation.warnings.length > 0) {
          content += "<strong>\u26A0\uFE0F Warnings:</strong><ul>";
          validation.warnings.forEach((warning) => {
            content += `<li>${warning}</li>`;
          });
          content += "</ul>";
        }
        resultEl.innerHTML = content;
      }
      const existing = (_a = button.buttonEl.parentElement) == null ? void 0 : _a.querySelector(".validation-result");
      if (existing)
        existing.remove();
      resultEl.classList.add("validation-result");
      (_b = button.buttonEl.parentElement) == null ? void 0 : _b.appendChild(resultEl);
      setTimeout(() => resultEl.remove(), 1e4);
    }));
    new import_obsidian.Setting(containerEl).setName("Reset to Defaults").setDesc("\u26A0\uFE0F Reset all settings to their default values. This cannot be undone.").addButton((button) => button.setButtonText("Reset").setWarning().onClick(async () => {
      var _a;
      const confirmed = confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.");
      if (confirmed) {
        const { DEFAULT_SETTINGS: DEFAULT_SETTINGS3 } = await Promise.resolve().then(() => (init_settings(), settings_exports));
        this.plugin.settings = { ...DEFAULT_SETTINGS3 };
        await this.plugin.saveSettings();
        this.display();
        const notice = document.createElement("div");
        notice.textContent = "\u2705 Settings reset to defaults successfully!";
        notice.style.color = "var(--text-success)";
        notice.style.fontWeight = "bold";
        notice.style.marginTop = "10px";
        (_a = button.buttonEl.parentElement) == null ? void 0 : _a.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Export Settings").setDesc("Export current settings as JSON for backup or sharing.").addButton((button) => button.setButtonText("Export").onClick(() => {
      const settingsJson = JSON.stringify(this.plugin.settings, null, 2);
      navigator.clipboard.writeText(settingsJson).then(() => {
        var _a;
        const notice = document.createElement("div");
        notice.textContent = "\u2705 Settings copied to clipboard!";
        notice.style.color = "var(--text-success)";
        notice.style.fontWeight = "bold";
        notice.style.marginTop = "10px";
        (_a = button.buttonEl.parentElement) == null ? void 0 : _a.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      });
    }));
  }
  showValidationMessage(inputEl, message, type) {
    var _a, _b;
    const existing = (_a = inputEl.parentElement) == null ? void 0 : _a.querySelector(".validation-message");
    if (existing)
      existing.remove();
    const messageEl = document.createElement("div");
    messageEl.classList.add("validation-message");
    messageEl.textContent = message;
    messageEl.style.fontSize = "0.8em";
    messageEl.style.marginTop = "4px";
    messageEl.style.color = type === "success" ? "var(--text-success)" : "var(--text-error)";
    (_b = inputEl.parentElement) == null ? void 0 : _b.appendChild(messageEl);
    setTimeout(() => messageEl.remove(), 3e3);
  }
  displayCustomShortcodes(containerEl) {
    const customShortcodes = this.plugin.settings.customShortcodes;
    if (Object.keys(customShortcodes).length === 0) {
      const emptyEl = containerEl.createEl("p");
      emptyEl.textContent = "No custom shortcodes defined.";
      emptyEl.style.color = "var(--text-muted)";
      emptyEl.style.fontStyle = "italic";
      return;
    }
    Object.entries(customShortcodes).forEach(([pattern, expansion]) => {
      new import_obsidian.Setting(containerEl).setName(pattern).setDesc(expansion.length > 50 ? expansion.substring(0, 50) + "..." : expansion).addButton((button) => button.setButtonText("Delete").setTooltip("Delete this custom shortcode").onClick(async () => {
        delete this.plugin.settings.customShortcodes[pattern];
        await this.plugin.saveSettings();
        this.display();
      }));
    });
  }
  showCustomShortcodeDialog() {
    const modal = document.createElement("div");
    modal.style.cssText = `
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;
    `;
    const dialog = document.createElement("div");
    dialog.style.cssText = `
      background: var(--background-primary); padding: 20px; border-radius: 8px; max-width: 500px; width: 90%;
      border: 1px solid var(--background-modifier-border);
    `;
    dialog.innerHTML = `
      <h3>Add Custom Shortcode</h3>
      <div style="margin: 15px 0;">
        <label>Pattern:</label>
        <input type="text" id="shortcode-pattern" placeholder="e.g., mylist" style="width: 100%; margin-top: 5px; padding: 8px;">
      </div>
      <div style="margin: 15px 0;">
        <label>Expansion:</label>
        <textarea id="shortcode-expansion" placeholder="e.g., - [ ] Item 1&#10;- [ ] Item 2" style="width: 100%; height: 100px; margin-top: 5px; padding: 8px;"></textarea>
      </div>
      <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
        <button id="cancel-btn">Cancel</button>
        <button id="save-btn" style="background: var(--interactive-accent); color: var(--text-on-accent);">Save</button>
      </div>
    `;
    modal.appendChild(dialog);
    document.body.appendChild(modal);
    const patternInput = dialog.querySelector("#shortcode-pattern");
    const expansionInput = dialog.querySelector("#shortcode-expansion");
    const cancelBtn = dialog.querySelector("#cancel-btn");
    const saveBtn = dialog.querySelector("#save-btn");
    const closeModal = () => document.body.removeChild(modal);
    cancelBtn.onclick = closeModal;
    modal.onclick = (e) => e.target === modal && closeModal();
    saveBtn.onclick = async () => {
      const pattern = patternInput.value.trim();
      const expansion = expansionInput.value.trim();
      if (!pattern || !expansion) {
        alert("Both pattern and expansion are required.");
        return;
      }
      if (!ShortcodeSettings.isValidShortcodePattern(pattern)) {
        alert("Invalid shortcode pattern. Use alphanumeric characters and shortcode operators (+, >, *, {}, [], ()).");
        return;
      }
      this.plugin.settings.customShortcodes[pattern] = expansion;
      await this.plugin.saveSettings();
      closeModal();
      this.display();
    };
    patternInput.focus();
  }
};

// src/ui/ribbonManager.ts
var import_obsidian2 = require("obsidian");
init_constants();
var RibbonManager = class {
  constructor(plugin) {
    this.ribbonButtons = [];
    this.plugin = plugin;
  }
  /**
   * Initialize all ribbon buttons
   */
  initializeRibbon() {
    this.addTodayJournalButton();
    this.addCreateNoteButton();
    this.addMonthlyFoldersButton();
    this.addShortcodeHelpButton();
    this.addRebuildStructureButton();
    this.addSettingsButton();
    if (this.plugin.settings.debugMode) {
      console.log("[LinkPlugin] Ribbon initialized with", this.ribbonButtons.length, "buttons");
    }
  }
  /**
   * Clean up ribbon buttons on plugin unload
   */
  cleanup() {
    this.ribbonButtons.forEach((button) => {
      button.remove();
    });
    this.ribbonButtons = [];
  }
  /**
   * Add Today's Journal button
   */
  addTodayJournalButton() {
    const button = this.plugin.addRibbonIcon(
      RIBBON_BUTTONS.TODAY_JOURNAL.icon,
      RIBBON_BUTTONS.TODAY_JOURNAL.tooltip,
      async () => {
        try {
          await this.plugin.journalManager.openTodayJournal();
          this.showSuccess("Today's journal opened");
        } catch (error) {
          this.plugin.errorHandler.handleError(error, "Failed to open today's journal");
        }
      }
    );
    this.ribbonButtons.push(button);
  }
  /**
   * Add Create Linked Note button
   */
  addCreateNoteButton() {
    const button = this.plugin.addRibbonIcon(
      RIBBON_BUTTONS.CREATE_NOTE.icon,
      RIBBON_BUTTONS.CREATE_NOTE.tooltip,
      () => {
        try {
          const activeView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
          if (!activeView) {
            new import_obsidian2.Notice("Please open a markdown note first");
            return;
          }
          const editor = activeView.editor;
          const selection = editor.getSelection();
          if (!selection) {
            new import_obsidian2.Notice("Please select text to create a linked note");
            return;
          }
          this.plugin.linkManager.createLinkedNote(selection, editor, activeView);
          this.showSuccess("Linked note created");
        } catch (error) {
          this.plugin.errorHandler.handleError(error, "Failed to create linked note");
        }
      }
    );
    this.ribbonButtons.push(button);
  }
  /**
   * Add Monthly Folders button
   */
  addMonthlyFoldersButton() {
    const button = this.plugin.addRibbonIcon(
      RIBBON_BUTTONS.MONTHLY_FOLDERS.icon,
      RIBBON_BUTTONS.MONTHLY_FOLDERS.tooltip,
      async () => {
        try {
          const startOfYear = DateService.startOfYear();
          const endOfYear = DateService.endOfYear();
          await this.plugin.journalManager.createMonthlyFoldersForRange(startOfYear, endOfYear);
          this.showSuccess("Monthly folders created for current year");
        } catch (error) {
          this.plugin.errorHandler.handleError(error, "Failed to create monthly folders");
        }
      }
    );
    this.ribbonButtons.push(button);
  }
  /**
   * Add Shortcode Help button
   */
  addShortcodeHelpButton() {
    const button = this.plugin.addRibbonIcon(
      RIBBON_BUTTONS.SHORTCODE_HELP.icon,
      RIBBON_BUTTONS.SHORTCODE_HELP.tooltip,
      () => {
        try {
          this.plugin.shortcodeManager.showHelpModal();
        } catch (error) {
          this.plugin.errorHandler.handleError(error, "Failed to show shortcode help");
        }
      }
    );
    this.ribbonButtons.push(button);
  }
  /**
   * Add Rebuild Directory Structure button
   */
  addRebuildStructureButton() {
    const button = this.plugin.addRibbonIcon(
      RIBBON_BUTTONS.REBUILD_STRUCTURE.icon,
      RIBBON_BUTTONS.REBUILD_STRUCTURE.tooltip,
      async () => {
        try {
          await this.plugin.directoryManager.rebuildDirectoryStructure();
          this.showSuccess("Directory structure rebuilt");
        } catch (error) {
          this.plugin.errorHandler.handleError(error, "Failed to rebuild directory structure");
        }
      }
    );
    this.ribbonButtons.push(button);
  }
  /**
   * Add Settings button
   */
  addSettingsButton() {
    const button = this.plugin.addRibbonIcon(
      RIBBON_BUTTONS.PLUGIN_SETTINGS.icon,
      RIBBON_BUTTONS.PLUGIN_SETTINGS.tooltip,
      () => {
        try {
          this.plugin.app.setting.open();
          this.plugin.app.setting.openTabById(this.plugin.manifest.id);
        } catch (error) {
          new import_obsidian2.Notice("Please open Settings manually and find the Link Plugin tab");
          this.plugin.errorHandler.handleError(error, "Failed to open settings automatically");
        }
      }
    );
    this.ribbonButtons.push(button);
  }
  /**
   * Show success message
   */
  showSuccess(message) {
    new import_obsidian2.Notice(`\u2705 ${message}`);
    if (this.plugin.settings.debugMode) {
      console.log(`[LinkPlugin] ${message}`);
    }
  }
  /**
   * Update ribbon button states based on settings
   */
  updateButtonStates() {
    if (this.plugin.settings.debugMode) {
      console.log("[LinkPlugin] Ribbon button states updated");
    }
  }
  /**
   * Get ribbon button count for debugging
   */
  getButtonCount() {
    return this.ribbonButtons.length;
  }
  /**
   * Add a custom ribbon button (for future extensibility)
   */
  addCustomButton(icon, tooltip, callback) {
    const button = this.plugin.addRibbonIcon(icon, tooltip, callback);
    this.ribbonButtons.push(button);
    return button;
  }
  /**
   * Remove a specific ribbon button
   */
  removeButton(button) {
    const index = this.ribbonButtons.indexOf(button);
    if (index > -1) {
      this.ribbonButtons.splice(index, 1);
      button.remove();
    }
  }
  /**
   * Show quick actions menu (future enhancement)
   */
  showQuickActionsMenu() {
    const message = `
Link Plugin Quick Actions:
\u2022 Today's Journal: ${RIBBON_BUTTONS.TODAY_JOURNAL.tooltip}
\u2022 Create Note: ${RIBBON_BUTTONS.CREATE_NOTE.tooltip}
\u2022 Monthly Folders: ${RIBBON_BUTTONS.MONTHLY_FOLDERS.tooltip}
\u2022 Shortcode Help: ${RIBBON_BUTTONS.SHORTCODE_HELP.tooltip}
\u2022 Rebuild Structure: ${RIBBON_BUTTONS.REBUILD_STRUCTURE.tooltip}
\u2022 Settings: ${RIBBON_BUTTONS.PLUGIN_SETTINGS.tooltip}
    `.trim();
    new import_obsidian2.Notice(message, 8e3);
  }
};

// src/managers/directoryManager.ts
var import_obsidian4 = require("obsidian");
init_constants();

// src/utils/pathUtils.ts
var import_obsidian3 = require("obsidian");
var PathUtils = class {
  static sanitizePath(path) {
    return (0, import_obsidian3.normalizePath)(path.replace(/[\/:*?"<>|]/g, "").trim());
  }
  static joinPath(...segments) {
    return (0, import_obsidian3.normalizePath)(segments.filter(Boolean).join("/"));
  }
};

// src/managers/directoryManager.ts
var DirectoryManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Creates the base directory structure according to settings
   * All directories are created under the configured baseFolder to prevent collisions
   */
  async rebuildDirectoryStructure() {
    const { vault } = this.plugin.app;
    const { baseFolder, directoryStructure } = this.plugin.settings;
    try {
      const basePath = (0, import_obsidian4.normalizePath)(baseFolder);
      await this.getOrCreateDirectory(basePath);
      console.log(`Created base directory: ${basePath}`);
      for (const dirName of directoryStructure || DEFAULT_DIRECTORIES) {
        const dirPath = PathUtils.joinPath(basePath, dirName);
        await this.getOrCreateDirectory(dirPath);
        console.log(`Created directory: ${dirPath}`);
      }
      await this.createJournalStructure(basePath);
      await this.createReferenceStructure(basePath);
    } catch (error) {
      throw new Error(`Failed to rebuild directory structure: ${error}`);
    }
  }
  /**
   * Creates the detailed journal structure as specified in README
   */
  async createJournalStructure(basePath) {
    const journalPath = PathUtils.joinPath(basePath, "journal");
    const journalSubdirs = [
      "Misc",
      "y_2025/January",
      "y_2025/February",
      "y_2025/March",
      "y_2025/April",
      "y_2025/May",
      "y_2025/June",
      "y_2025/Misc",
      "y_2025/Yearly List",
      "y_2025/Yearly Log",
      "z_Archives/y_2022",
      "z_Archives/y_2023",
      "z_Archives/y_2024"
    ];
    for (const subdir of journalSubdirs) {
      const fullPath = PathUtils.joinPath(journalPath, subdir);
      await this.getOrCreateDirectory(fullPath);
      console.log(`Created journal directory: ${fullPath}`);
    }
  }
  /**
   * Creates the reference file structure as specified in README
   */
  async createReferenceStructure(basePath) {
    const referencePath = PathUtils.joinPath(basePath, "reference");
    const fileTypes = ["images", "pdfs", "videos", "audio", "docs", "other"];
    for (const fileType of fileTypes) {
      const filePath = PathUtils.joinPath(referencePath, "files", fileType);
      await this.getOrCreateDirectory(filePath);
      console.log(`Created reference directory: ${filePath}`);
    }
  }
  /**
   * Creates optional complex structure directories
   */
  async createOptionalStructure(basePath) {
    for (const dirName of OPTIONAL_DIRECTORIES) {
      const dirPath = PathUtils.joinPath(basePath, dirName);
      await this.getOrCreateDirectory(dirPath);
      console.log(`Created optional directory: ${dirPath}`);
    }
  }
  /**
   * Gets a directory path, creating it if it doesn't exist
   * Handles both absolute paths and paths relative to the base folder
   */
  async getOrCreateDirectory(path) {
    const { vault } = this.plugin.app;
    const normalizedPath = (0, import_obsidian4.normalizePath)(path);
    const existingFolder = vault.getAbstractFileByPath(normalizedPath);
    if (existingFolder instanceof import_obsidian4.TFolder) {
      return existingFolder;
    }
    const pathParts = normalizedPath.split("/");
    let currentPath = "";
    for (const part of pathParts) {
      if (!part)
        continue;
      currentPath += (currentPath ? "/" : "") + part;
      const folder = vault.getAbstractFileByPath(currentPath);
      if (!folder) {
        await vault.createFolder(currentPath);
      } else if (!(folder instanceof import_obsidian4.TFolder)) {
        throw new Error(`Path ${currentPath} exists but is not a folder`);
      }
    }
    return vault.getAbstractFileByPath(normalizedPath);
  }
  /**
   * Gets the full path for a directory within the plugin's base folder
   */
  getPluginDirectoryPath(relativePath) {
    const { baseFolder } = this.plugin.settings;
    return PathUtils.joinPath(baseFolder, relativePath);
  }
  /**
   * Gets the journal directory path
   */
  getJournalPath() {
    const { baseFolder, journalRootFolder } = this.plugin.settings;
    return PathUtils.joinPath(baseFolder, journalRootFolder);
  }
  /**
   * Gets the workspace directory path  
   */
  getWorkspacePath() {
    const { baseFolder, documentDirectory } = this.plugin.settings;
    return PathUtils.joinPath(baseFolder, documentDirectory);
  }
  /**
   * Applies a directory template to create structured folders
   */
  async applyDirectoryTemplate(basePath, template) {
    for (const [key, value] of Object.entries(template)) {
      const dirPath = PathUtils.joinPath(basePath, key);
      await this.getOrCreateDirectory(dirPath);
      if (value && typeof value === "object") {
        await this.applyDirectoryTemplate(dirPath, value);
      }
    }
  }
  /**
   * Validates if a given path is within allowed directories
   */
  isValidPath(path) {
    const normalizedPath = (0, import_obsidian4.normalizePath)(path);
    const { restrictedDirectories } = this.plugin.settings;
    if (!restrictedDirectories || restrictedDirectories.length === 0) {
      return true;
    }
    return !restrictedDirectories.some((dir) => {
      const normalizedDir = (0, import_obsidian4.normalizePath)(dir);
      return normalizedPath === normalizedDir || normalizedPath.startsWith(normalizedDir + "/");
    });
  }
  /**
   * Lists all directories in the vault
   */
  getAllDirectories() {
    const { vault } = this.plugin.app;
    return vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian4.TFolder);
  }
  /**
   * Creates a directory with a specific template structure within the plugin's base folder
   */
  async createProjectDirectory(name, template) {
    const sanitizedName = PathUtils.sanitizePath(name);
    const workspacePath = this.getWorkspacePath();
    const projectPath = PathUtils.joinPath(workspacePath, sanitizedName);
    const projectFolder = await this.getOrCreateDirectory(projectPath);
    if (template) {
      await this.applyDirectoryTemplate(projectPath, template);
    }
    return projectFolder;
  }
};

// src/managers/journalManager.ts
var import_obsidian5 = require("obsidian");
var JournalManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Creates or opens a journal entry for the specified date
   * Automatically creates monthly folders as needed
   */
  async createOrOpenJournalEntry(date) {
    const { vault } = this.plugin.app;
    const { journalDateFormat, journalTemplate } = this.plugin.settings;
    await this.ensureMonthlyFolderExists(date);
    const monthlyFolderPath = this.getMonthlyFolderPath(date);
    const fileName = DateService.getJournalFilename(date, journalDateFormat);
    const filePath = (0, import_obsidian5.normalizePath)(`${monthlyFolderPath}/${fileName}.md`);
    let file = vault.getAbstractFileByPath(filePath);
    if (!file) {
      const content = await this.generateJournalContent(date);
      file = await vault.create(filePath, content);
      console.log(`Created daily note: ${filePath}`);
    }
    return file;
  }
  /**
   * Ensures the monthly folder exists for the given date
   * Creates the folder structure if it doesn't exist
   */
  async ensureMonthlyFolderExists(date) {
    const monthlyFolderPath = this.getMonthlyFolderPath(date);
    await this.plugin.directoryManager.getOrCreateDirectory(monthlyFolderPath);
    console.log(`Ensured monthly folder exists: ${monthlyFolderPath}`);
  }
  /**
   * Gets the monthly folder path for a given date
   * Uses the new base folder structure: LinkPlugin/journal/y_YYYY/MonthName/
   */
  getMonthlyFolderPath(date) {
    const journalBasePath = this.plugin.directoryManager.getJournalPath();
    return DateService.getMonthlyFolderPath(journalBasePath, date);
  }
  /**
   * Creates a daily note for today if it doesn't exist
   * Automatically handles monthly folder creation
   */
  async createTodayNote() {
    const today = DateService.now();
    return await this.createOrOpenJournalEntry(today);
  }
  /**
   * Creates a daily note for a future date
   * Automatically creates monthly folders as needed
   */
  async createFutureDailyNote(date) {
    const targetDate = DateService.from(date);
    return await this.createOrOpenJournalEntry(targetDate);
  }
  /**
   * Generate content for a journal entry
   */
  async generateJournalContent(date) {
    const { journalTemplate, journalDateFormat } = this.plugin.settings;
    const previousDay = DateService.previousDay(date);
    const nextDay = DateService.nextDay(date);
    const previousLink = `[[${DateService.format(previousDay, journalDateFormat)}]]`;
    const nextLink = `[[${DateService.format(nextDay, journalDateFormat)}]]`;
    const currentDate = DateService.format(date, "YYYY-MM-DD");
    const title = DateService.format(date, journalDateFormat);
    if (journalTemplate) {
      return journalTemplate.replace(/{{date}}/g, currentDate).replace(/{{title}}/g, title).replace(/{{previous}}/g, previousLink).replace(/{{next}}/g, nextLink);
    }
    return `---
date: ${currentDate}
previous: ${previousLink}
next: ${nextLink}
tags:
  - journal
---

# ${title}

## Daily Log

## Tasks
- [ ] 

## Notes

## Reflection

---
Previous: ${previousLink} | Next: ${nextLink}
`;
  }
  /**
   * Opens the journal entry for today
   * Creates monthly folder and daily note if they don't exist
   */
  async openTodayJournal() {
    const today = DateService.now();
    const file = await this.createOrOpenJournalEntry(today);
    const leaf = this.plugin.app.workspace.getLeaf();
    await leaf.openFile(file);
  }
  /**
   * Checks if we need to create a new monthly folder
   * Called when the plugin loads or when creating notes
   */
  async checkAndCreateCurrentMonthFolder() {
    const currentDate = DateService.now();
    await this.ensureMonthlyFolderExists(currentDate);
  }
  /**
   * Creates monthly folders for a range of dates
   * Useful for batch creation or setup
   */
  async createMonthlyFoldersForRange(startDate, endDate) {
    const current = DateService.startOfMonth(startDate);
    const end = DateService.endOfMonth(endDate);
    while (DateService.isSameOrBefore(current, end)) {
      await this.ensureMonthlyFolderExists(current);
      DateService.add(current, 1, "month");
    }
  }
  /**
   * Opens journal entry for a specific date
   */
  async openJournalForDate(date) {
    const momentDate = DateService.from(date);
    const file = await this.createOrOpenJournalEntry(momentDate);
    const leaf = this.plugin.app.workspace.getLeaf();
    await leaf.openFile(file);
  }
  /**
   * Updates links between journal entries
   */
  async updateJournalLinks(file) {
    const { vault } = this.plugin.app;
    const { journalDateFormat } = this.plugin.settings;
    const fileDate = DateService.extractDateFromFilename(file.basename, journalDateFormat || "YYYY-MM-DD dddd");
    if (!fileDate)
      return;
    const content = await vault.read(file);
    const previousDay = DateService.previousDay(fileDate);
    const nextDay = DateService.nextDay(fileDate);
    const previousFileName = DateService.format(previousDay, journalDateFormat);
    const nextFileName = DateService.format(nextDay, journalDateFormat);
    const updatedContent = content.replace(/previous: '\[\[(.*?)\]\]'/g, `previous: '[[${previousFileName}]]'`).replace(/next: '\[\[(.*?)\]\]'/g, `next: '[[${nextFileName}]]'`);
    if (updatedContent !== content) {
      await vault.modify(file, updatedContent);
    }
  }
  /**
   * Get journal entries for a date range
   */
  async getJournalEntries(startDate, endDate) {
    const { vault } = this.plugin.app;
    const { journalDateFormat } = this.plugin.settings;
    const entries = [];
    const current = DateService.from(startDate);
    while (DateService.isSameOrBefore(current, endDate)) {
      const filePath = DateService.getJournalFilePath(
        this.plugin.directoryManager.getJournalPath(),
        current,
        journalDateFormat
      );
      const file = vault.getAbstractFileByPath(filePath);
      if (file) {
        entries.push({
          date: DateService.format(current, "YYYY-MM-DD"),
          path: filePath,
          title: DateService.format(current, journalDateFormat),
          previous: DateService.format(DateService.previousDay(current), "YYYY-MM-DD"),
          next: DateService.format(DateService.nextDay(current), "YYYY-MM-DD")
        });
      }
      DateService.add(current, 1, "day");
    }
    return entries;
  }
};

// src/managers/linkManager.ts
var import_obsidian6 = require("obsidian");
init_constants();
var LinkManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Create a new note from selected text and link to it
   */
  async createLinkedNote(selection, editor, view) {
    const { vault } = this.plugin.app;
    const currentFile = view.file;
    if (!currentFile) {
      throw new Error("No active file found");
    }
    const fileName = this.sanitizeFileName(selection);
    const directoryPath = this.determineTargetDirectory(fileName);
    const filePath = (0, import_obsidian6.normalizePath)(`${directoryPath}/${fileName}.md`);
    let file = vault.getAbstractFileByPath(filePath);
    if (!file) {
      await this.plugin.directoryManager.getOrCreateDirectory(directoryPath);
      const content = this.generateNoteContent(selection, currentFile);
      file = await vault.create(filePath, content);
    }
    editor.replaceSelection(`[[${fileName}]]`);
    if (this.plugin.settings.openNewNote) {
      const leaf = this.plugin.app.workspace.splitActiveLeaf();
      await leaf.openFile(file);
    }
  }
  /**
   * Determine the appropriate directory for a new note
   */
  determineTargetDirectory(title) {
    const { documentDirectory } = this.plugin.settings;
    const keywords = title.toLowerCase();
    if (keywords.includes("project") || keywords.includes("work")) {
      return "Workspace";
    } else if (keywords.includes("reference") || keywords.includes("definition")) {
      return "References";
    } else if (keywords.includes("template")) {
      return "Templates";
    }
    return documentDirectory || "Documents";
  }
  /**
   * Generate content for a new linked note
   */
  generateNoteContent(title, sourceFile) {
    const { noteTemplate } = this.plugin.settings;
    const currentDate = new Date().toISOString().split("T")[0];
    if (noteTemplate) {
      return noteTemplate.replace(/{{title}}/g, title).replace(/{{date}}/g, currentDate).replace(/{{source}}/g, `[[${sourceFile.basename}]]`);
    }
    return `---
title: ${title}
created: ${currentDate}
source: [[${sourceFile.basename}]]
tags: []
---

# ${title}

`;
  }
  /**
   * Sanitize a string for use as a filename
   */
  sanitizeFileName(input) {
    return input.replace(REGEX_PATTERNS.INVALID_FILENAME_CHARS, "").replace(/\s+/g, " ").trim().substring(0, 100);
  }
  /**
   * Find all links in a file
   */
  async findLinksInFile(file) {
    const { vault } = this.plugin.app;
    const content = await vault.read(file);
    const links = [];
    let match;
    while ((match = REGEX_PATTERNS.WIKI_LINK.exec(content)) !== null) {
      links.push(match[1]);
    }
    return links;
  }
  /**
   * Find all backlinks to a file
   */
  async findBacklinks(file) {
    const { vault } = this.plugin.app;
    const files = vault.getMarkdownFiles();
    const backlinks = [];
    for (const potentialSource of files) {
      if (potentialSource.path === file.path)
        continue;
      const links = await this.findLinksInFile(potentialSource);
      if (links.includes(file.basename)) {
        backlinks.push(potentialSource);
      }
    }
    return backlinks;
  }
  /**
   * Find broken links in the vault
   */
  async findBrokenLinks() {
    const { vault } = this.plugin.app;
    const files = vault.getMarkdownFiles();
    const brokenLinksData = [];
    for (const file of files) {
      const links = await this.findLinksInFile(file);
      const brokenLinks = [];
      for (const link of links) {
        const linkedFile = vault.getAbstractFileByPath(`${link}.md`) || vault.getAbstractFileByPath(link);
        if (!linkedFile) {
          brokenLinks.push(link);
        }
      }
      if (brokenLinks.length > 0) {
        brokenLinksData.push({ file, brokenLinks });
      }
    }
    return brokenLinksData;
  }
  /**
   * Find orphaned notes (notes with no backlinks)
   */
  async findOrphanedNotes() {
    const { vault } = this.plugin.app;
    const files = vault.getMarkdownFiles();
    const orphanedNotes = [];
    for (const file of files) {
      const backlinks = await this.findBacklinks(file);
      if (backlinks.length === 0) {
        orphanedNotes.push(file);
      }
    }
    return orphanedNotes;
  }
  /**
   * Generate link suggestions based on content similarity
   */
  async generateLinkSuggestions(file, limit = 5) {
    const { vault } = this.plugin.app;
    const files = vault.getMarkdownFiles();
    const suggestions = [];
    const currentContent = await vault.read(file);
    const currentWords = this.extractWords(currentContent);
    for (const otherFile of files) {
      if (otherFile.path === file.path)
        continue;
      const otherContent = await vault.read(otherFile);
      const otherWords = this.extractWords(otherContent);
      const relevance = this.calculateRelevance(currentWords, otherWords);
      if (relevance > 0.1) {
        suggestions.push({
          title: otherFile.basename,
          path: otherFile.path,
          relevance,
          type: "existing"
        });
      }
    }
    return suggestions.sort((a, b) => b.relevance - a.relevance).slice(0, limit);
  }
  /**
   * Extract meaningful words from content
   */
  extractWords(content) {
    const words = /* @__PURE__ */ new Set();
    const text = content.replace(/[#*`\[\]()]/g, "").toLowerCase().split(/\s+/);
    for (const word of text) {
      if (word.length > 3 && !this.isStopWord(word)) {
        words.add(word);
      }
    }
    return words;
  }
  /**
   * Calculate relevance between two sets of words
   */
  calculateRelevance(words1, words2) {
    const intersection = new Set([...words1].filter((word) => words2.has(word)));
    const union = /* @__PURE__ */ new Set([...words1, ...words2]);
    return intersection.size / union.size;
  }
  /**
   * Check if a word is a stop word
   */
  isStopWord(word) {
    const stopWords = /* @__PURE__ */ new Set([
      "the",
      "a",
      "an",
      "and",
      "or",
      "but",
      "in",
      "on",
      "at",
      "to",
      "for",
      "of",
      "with",
      "by",
      "is",
      "are",
      "was",
      "were",
      "be",
      "been",
      "have",
      "has",
      "had",
      "do",
      "does",
      "did",
      "will",
      "would",
      "could",
      "should",
      "may",
      "might",
      "must",
      "can",
      "this",
      "that",
      "these",
      "those"
    ]);
    return stopWords.has(word);
  }
};

// src/shortcodes/tokenizer.ts
var Tokenizer = class {
  /**
   * Tokenize an Emmet-like shortcode string
   */
  tokenize(input) {
    const tokens = [];
    let currentPos = 0;
    while (currentPos < input.length) {
      const char = input[currentPos];
      if (this.isNameChar(char)) {
        const { token, newPos } = this.tokenizeElement(input, currentPos);
        tokens.push(token);
        currentPos = newPos;
        continue;
      }
      if (this.isOperator(char)) {
        tokens.push({
          type: "operator",
          value: char
        });
        currentPos++;
        continue;
      }
      if (char === "{") {
        const { token, newPos } = this.tokenizeContent(input, currentPos);
        tokens.push(token);
        currentPos = newPos;
        continue;
      }
      if (char === "[") {
        const { token, newPos } = this.tokenizeAttribute(input, currentPos);
        tokens.push(token);
        currentPos = newPos;
        continue;
      }
      if (char === "(") {
        const { token, newPos } = this.tokenizeGroup(input, currentPos);
        tokens.push(token);
        currentPos = newPos;
        continue;
      }
      if (char === " " || char === "	" || char === "\n") {
        currentPos++;
        continue;
      }
      throw new Error(`Unexpected character: ${char} at position ${currentPos}`);
    }
    return tokens;
  }
  tokenizeElement(input, startPos) {
    let endPos = startPos;
    while (endPos < input.length && this.isNameChar(input[endPos])) {
      endPos++;
    }
    if (endPos < input.length && input[endPos] === "*") {
      const elementName = input.substring(startPos, endPos);
      endPos++;
      const numberStartPos = endPos;
      while (endPos < input.length && /\d/.test(input[endPos])) {
        endPos++;
      }
      const multiplier = parseInt(input.substring(numberStartPos, endPos), 10);
      return {
        token: {
          type: "element",
          value: elementName,
          children: [{
            type: "multiplier",
            value: multiplier.toString()
          }]
        },
        newPos: endPos
      };
    }
    return {
      token: {
        type: "element",
        value: input.substring(startPos, endPos)
      },
      newPos: endPos
    };
  }
  tokenizeContent(input, startPos) {
    let endPos = startPos + 1;
    let depth = 1;
    while (endPos < input.length && depth > 0) {
      if (input[endPos] === "{")
        depth++;
      if (input[endPos] === "}")
        depth--;
      endPos++;
    }
    if (depth !== 0) {
      throw new Error("Unclosed content braces");
    }
    return {
      token: {
        type: "content",
        value: input.substring(startPos + 1, endPos - 1)
      },
      newPos: endPos
    };
  }
  tokenizeAttribute(input, startPos) {
    let endPos = startPos + 1;
    let depth = 1;
    while (endPos < input.length && depth > 0) {
      if (input[endPos] === "[")
        depth++;
      if (input[endPos] === "]")
        depth--;
      endPos++;
    }
    if (depth !== 0) {
      throw new Error("Unclosed attribute brackets");
    }
    return {
      token: {
        type: "attribute",
        value: input.substring(startPos + 1, endPos - 1)
      },
      newPos: endPos
    };
  }
  tokenizeGroup(input, startPos) {
    let endPos = startPos + 1;
    let depth = 1;
    while (endPos < input.length && depth > 0) {
      if (input[endPos] === "(")
        depth++;
      if (input[endPos] === ")")
        depth--;
      endPos++;
    }
    if (depth !== 0) {
      throw new Error("Unclosed group parentheses");
    }
    const groupContent = input.substring(startPos + 1, endPos - 1);
    const childTokens = new Tokenizer().tokenize(groupContent);
    return {
      token: {
        type: "group",
        value: groupContent,
        children: childTokens
      },
      newPos: endPos
    };
  }
  isNameChar(char) {
    return /[a-zA-Z0-9_-]/.test(char);
  }
  isOperator(char) {
    return char === ">" || char === "+" || char === "*";
  }
};

// src/shortcodes/parser.ts
var Parser = class {
  /**
   * Parse tokens into an Abstract Syntax Tree
   */
  parse(tokens) {
    const ast = [];
    let currentNode = null;
    for (let i = 0; i < tokens.length; i++) {
      const token = tokens[i];
      switch (token.type) {
        case "element":
          currentNode = {
            type: "element",
            name: token.value,
            children: []
          };
          if (token.children && token.children.length > 0) {
            const multiplier = token.children.find((child) => child.type === "multiplier");
            if (multiplier) {
              currentNode.repeat = parseInt(multiplier.value, 10);
            }
          }
          ast.push(currentNode);
          break;
        case "content":
          if (currentNode) {
            currentNode.content = token.value;
          }
          break;
        case "attribute":
          if (currentNode) {
            currentNode.attributes = this.parseAttributes(token.value);
          }
          break;
        case "operator":
          if (token.value === ">" && i + 1 < tokens.length) {
            const childTokens = [tokens[++i]];
            const childNodes = this.parse(childTokens);
            if (currentNode && childNodes.length > 0) {
              currentNode.children = currentNode.children || [];
              currentNode.children.push(...childNodes);
              childNodes.forEach((child) => child.parent = currentNode.name);
            }
          } else if (token.value === "+") {
            continue;
          }
          break;
        case "group":
          if (token.children) {
            const groupNodes = this.parse(token.children);
            ast.push(...groupNodes);
          }
          break;
      }
    }
    return ast;
  }
  parseAttributes(attrString) {
    const attributes = {};
    if (attrString.includes("=")) {
      const pairs = attrString.split(/\s+/);
      for (const pair of pairs) {
        const [key, value] = pair.split("=");
        if (key && value) {
          attributes[key] = value.replace(/["']/g, "");
        }
      }
    } else {
      attributes.value = attrString;
    }
    return attributes;
  }
  /**
   * Validate the AST structure
   */
  validate(ast) {
    for (const node of ast) {
      if (!node.name && node.type === "element") {
        return false;
      }
      if (node.children && node.children.length > 0) {
        if (!this.validate(node.children)) {
          return false;
        }
      }
    }
    return true;
  }
};

// src/shortcodes/transformer.ts
var Transformer = class {
  transform(ast) {
    return ast.map((node) => node.content || "").join("\n");
  }
};

// src/shortcodes/registry.ts
var ShortcodeManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.tokenizer = new Tokenizer();
    this.parser = new Parser();
    this.transformer = new Transformer();
  }
  checkForShortcodes(editor) {
  }
  showHelpModal() {
  }
};

// src/utils/errorHandler.ts
var import_obsidian7 = require("obsidian");
var ErrorHandler = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  handleError(error, context) {
    const message = error instanceof Error ? error.message : String(error);
    console.error(`${context}: ${message}`);
    new import_obsidian7.Notice(`${context}: ${message}`);
  }
  showNotice(message, duration) {
    new import_obsidian7.Notice(message, duration);
  }
  showSuccess(message) {
    new import_obsidian7.Notice(message, 3e3);
  }
  showWarning(message) {
    new import_obsidian7.Notice(`\u26A0\uFE0F ${message}`, 5e3);
  }
};

// src/main.ts
init_constants();
var LinkPlugin = class extends import_obsidian8.Plugin {
  async onload() {
    console.log("Loading Link Plugin...");
    try {
      DateService.initialize();
      await this.loadSettings();
      this.errorHandler = new ErrorHandler(this);
      this.directoryManager = new DirectoryManager(this);
      this.journalManager = new JournalManager(this);
      this.linkManager = new LinkManager(this);
      this.shortcodeManager = new ShortcodeManager(this);
      this.ribbonManager = new RibbonManager(this);
      this.addSettingTab(new SettingsTab(this.app, this));
      this.ribbonManager.initializeRibbon();
      this.registerCommands();
      this.registerEventHandlers();
      await this.directoryManager.rebuildDirectoryStructure();
      await this.journalManager.checkAndCreateCurrentMonthFolder();
      console.log("Link Plugin loaded successfully");
    } catch (error) {
      console.error("Failed to load Link Plugin:", error);
      if (this.errorHandler) {
        this.errorHandler.handleError(error, "Plugin initialization failed");
      }
    }
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = validateSettings(loadedData || {});
  }
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.ribbonManager) {
      this.ribbonManager.updateButtonStates();
    }
  }
  registerCommands() {
    this.addCommand({
      id: COMMAND_IDS.CREATE_LINKED_NOTE,
      name: "Create Linked Note from Selection",
      editorCallback: (editor, view) => {
        try {
          const selection = editor.getSelection();
          if (selection) {
            if ("previewMode" in view) {
              this.linkManager.createLinkedNote(selection, editor, view);
            } else {
              this.errorHandler.handleError(new Error("Invalid view type"), "Please use this command in a markdown view");
            }
          } else {
            this.errorHandler.handleError(new Error("No text selected"), "Please select text to create a linked note");
          }
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to create linked note");
        }
      }
    });
    this.addCommand({
      id: COMMAND_IDS.REBUILD_DIRECTORY,
      name: "Rebuild Directory Structure",
      callback: () => {
        try {
          this.directoryManager.rebuildDirectoryStructure();
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to rebuild directory structure");
        }
      }
    });
    this.addCommand({
      id: COMMAND_IDS.OPEN_TODAY_JOURNAL,
      name: "Open Today's Journal",
      callback: () => {
        try {
          this.journalManager.openTodayJournal();
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to open today's journal");
        }
      }
    });
    this.addCommand({
      id: COMMAND_IDS.CREATE_TODAY_NOTE,
      name: "Create Today's Daily Note",
      callback: async () => {
        try {
          const file = await this.journalManager.createTodayNote();
          const leaf = this.app.workspace.getLeaf();
          await leaf.openFile(file);
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to create today's note");
        }
      }
    });
    this.addCommand({
      id: COMMAND_IDS.CREATE_MONTHLY_FOLDERS,
      name: "Create Monthly Folders for Current Year",
      callback: async () => {
        try {
          const startOfYear = DateService.startOfYear();
          const endOfYear = DateService.endOfYear();
          await this.journalManager.createMonthlyFoldersForRange(startOfYear, endOfYear);
          this.errorHandler.showNotice("Monthly folders created for current year");
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to create monthly folders");
        }
      }
    });
    this.addCommand({
      id: "show-shortcode-help",
      name: "Show Shortcode Help",
      callback: () => {
        try {
          this.shortcodeManager.showHelpModal();
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to show shortcode help");
        }
      }
    });
    this.addCommand({
      id: "show-ribbon-actions",
      name: "Show Ribbon Quick Actions",
      callback: () => {
        try {
          this.ribbonManager.showQuickActionsMenu();
        } catch (error) {
          this.errorHandler.handleError(error, "Failed to show ribbon actions");
        }
      }
    });
  }
  registerEventHandlers() {
    this.registerEvent(
      this.app.workspace.on("editor-change", (editor) => {
        if (this.settings.shortcodeEnabled) {
          this.shortcodeManager.checkForShortcodes(editor);
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("create", (file) => {
        if ("stat" in file && "basename" in file && "extension" in file && file.path.includes(this.settings.journalRootFolder)) {
          this.journalManager.updateJournalLinks(file);
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (this.settings.debugMode) {
          console.log("File modified:", file.path);
        }
      })
    );
  }
  onunload() {
    console.log("Link Plugin unloaded");
    if (this.ribbonManager) {
      this.ribbonManager.cleanup();
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2NvbnN0YW50cy50cyIsICJzcmMvc2V0dGluZ3MvZGlyZWN0b3J5U2V0dGluZ3MudHMiLCAic3JjL3NldHRpbmdzL2pvdXJuYWxTZXR0aW5ncy50cyIsICJzcmMvc2V0dGluZ3Mvbm90ZVNldHRpbmdzLnRzIiwgInNyYy9zZXR0aW5ncy9zaG9ydGNvZGVTZXR0aW5ncy50cyIsICJzcmMvc2V0dGluZ3MvZ2VuZXJhbFNldHRpbmdzLnRzIiwgInNyYy9zZXR0aW5ncy9zZXR0aW5nc1ZhbGlkYXRvci50cyIsICJzcmMvc2V0dGluZ3MvZGVmYXVsdFNldHRpbmdzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvdWkvc2V0dGluZ3NUYWIudHMiLCAic3JjL3NlcnZpY2VzL2RhdGVTZXJ2aWNlLnRzIiwgInNyYy91aS9yaWJib25NYW5hZ2VyLnRzIiwgInNyYy9tYW5hZ2Vycy9kaXJlY3RvcnlNYW5hZ2VyLnRzIiwgInNyYy91dGlscy9wYXRoVXRpbHMudHMiLCAic3JjL21hbmFnZXJzL2pvdXJuYWxNYW5hZ2VyLnRzIiwgInNyYy9tYW5hZ2Vycy9saW5rTWFuYWdlci50cyIsICJzcmMvc2hvcnRjb2Rlcy90b2tlbml6ZXIudHMiLCAic3JjL3Nob3J0Y29kZXMvcGFyc2VyLnRzIiwgInNyYy9zaG9ydGNvZGVzL3RyYW5zZm9ybWVyLnRzIiwgInNyYy9zaG9ydGNvZGVzL3JlZ2lzdHJ5LnRzIiwgInNyYy91dGlscy9lcnJvckhhbmRsZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIERlZmF1bHQgYmFzZSBmb2xkZXIgdG8gcHJldmVudCBjb2xsaXNpb24gd2l0aCBleGlzdGluZyB2YXVsdCBzdHJ1Y3R1cmVcbmV4cG9ydCBjb25zdCBERUZBVUxUX0JBU0VfRk9MREVSID0gJ0xpbmtQbHVnaW4nO1xuXG4vLyBVcGRhdGVkIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgYmFzZWQgb24gUkVBRE1FIHNwZWNpZmljYXRpb25zXG5leHBvcnQgY29uc3QgREVGQVVMVF9ESVJFQ1RPUklFUyA9IFtcbiAgJ2pvdXJuYWwnLFxuICAndGVtcGxhdGVzJyxcbiAgJ3dvcmtzcGFjZScsXG4gICdyZWZlcmVuY2UnXG5dO1xuXG4vLyBEZXRhaWxlZCBqb3VybmFsIHN0cnVjdHVyZSBhcyBzaG93biBpbiBSRUFETUVcbmV4cG9ydCBjb25zdCBERUZBVUxUX0pPVVJOQUxfU1RSVUNUVVJFID0ge1xuICAnam91cm5hbCc6IHtcbiAgICAnTWlzYyc6IG51bGwsXG4gICAgJ3lfMjAyNSc6IHtcbiAgICAgICdKYW51YXJ5JzogbnVsbCxcbiAgICAgICdGZWJydWFyeSc6IG51bGwsXG4gICAgICAnTWFyY2gnOiBudWxsLFxuICAgICAgJ0FwcmlsJzogbnVsbCxcbiAgICAgICdNYXknOiBudWxsLFxuICAgICAgJ0p1bmUnOiBudWxsLFxuICAgICAgJ01pc2MnOiBudWxsLFxuICAgICAgJ1llYXJseSBMaXN0JzogbnVsbCxcbiAgICAgICdZZWFybHkgTG9nJzogbnVsbFxuICAgIH0sXG4gICAgJ3pfQXJjaGl2ZXMnOiB7XG4gICAgICAneV8yMDIyJzogbnVsbCxcbiAgICAgICd5XzIwMjMnOiBudWxsLFxuICAgICAgJ3lfMjAyNCc6IG51bGxcbiAgICB9XG4gIH1cbn07XG5cbi8vIFJlZmVyZW5jZSBzdHJ1Y3R1cmUgYXMgc2hvd24gaW4gUkVBRE1FXG5leHBvcnQgY29uc3QgREVGQVVMVF9SRUZFUkVOQ0VfU1RSVUNUVVJFID0ge1xuICAncmVmZXJlbmNlJzoge1xuICAgICdmaWxlcyc6IHtcbiAgICAgICdpbWFnZXMnOiBudWxsLFxuICAgICAgJ3BkZnMnOiBudWxsLFxuICAgICAgJ3ZpZGVvcyc6IG51bGwsXG4gICAgICAnYXVkaW8nOiBudWxsLFxuICAgICAgJ2RvY3MnOiBudWxsLFxuICAgICAgJ290aGVyJzogbnVsbFxuICAgIH1cbiAgfVxufTtcblxuLy8gT3B0aW9uYWwgY29tcGxleCBzdHJ1Y3R1cmUgbWVudGlvbmVkIGluIFJFQURNRVxuZXhwb3J0IGNvbnN0IE9QVElPTkFMX0RJUkVDVE9SSUVTID0gW1xuICAnY29udGV4dCcsXG4gICdzY2hlbWEnLFxuICAnUHJvamVjdHMnXG5dO1xuXG5leHBvcnQgY29uc3QgQ09NTUFORF9JRFMgPSB7XG4gIENSRUFURV9MSU5LRURfTk9URTogJ2NyZWF0ZS1saW5rZWQtbm90ZScsXG4gIFJFQlVJTERfRElSRUNUT1JZOiAncmVidWlsZC1kaXJlY3Rvcnktc3RydWN0dXJlJyxcbiAgT1BFTl9UT0RBWV9KT1VSTkFMOiAnb3Blbi10b2RheS1qb3VybmFsJyxcbiAgQ1JFQVRFX1RPREFZX05PVEU6ICdjcmVhdGUtdG9kYXktbm90ZScsXG4gIENSRUFURV9GVVRVUkVfTk9URTogJ2NyZWF0ZS1mdXR1cmUtbm90ZScsXG4gIENSRUFURV9NT05USExZX0ZPTERFUlM6ICdjcmVhdGUtbW9udGhseS1mb2xkZXJzJyxcbiAgRVhQQU5EX1NIT1JUQ09ERTogJ2V4cGFuZC1zaG9ydGNvZGUnLFxuICBTSE9XX0xJTktfU1VHR0VTVElPTlM6ICdzaG93LWxpbmstc3VnZ2VzdGlvbnMnXG59IGFzIGNvbnN0O1xuXG4vLyBSaWJib24gYnV0dG9uIGNvbmZpZ3VyYXRpb25zXG5leHBvcnQgY29uc3QgUklCQk9OX0JVVFRPTlMgPSB7XG4gIFRPREFZX0pPVVJOQUw6IHtcbiAgICBpY29uOiAnY2FsZW5kYXItZGF5cycsXG4gICAgdGl0bGU6ICdPcGVuIFRvZGF5XFwncyBKb3VybmFsJyxcbiAgICB0b29sdGlwOiAnT3BlbiBvciBjcmVhdGUgdG9kYXlcXCdzIGpvdXJuYWwgZW50cnknXG4gIH0sXG4gIENSRUFURV9OT1RFOiB7XG4gICAgaWNvbjogJ2ZpbGUtcGx1cycsXG4gICAgdGl0bGU6ICdDcmVhdGUgTGlua2VkIE5vdGUnLFxuICAgIHRvb2x0aXA6ICdDcmVhdGUgYSBuZXcgbGlua2VkIG5vdGUgZnJvbSBzZWxlY3RlZCB0ZXh0J1xuICB9LFxuICBNT05USExZX0ZPTERFUlM6IHtcbiAgICBpY29uOiAnZm9sZGVyLXBsdXMnLFxuICAgIHRpdGxlOiAnQ3JlYXRlIE1vbnRobHkgRm9sZGVycycsXG4gICAgdG9vbHRpcDogJ0NyZWF0ZSBtb250aGx5IGZvbGRlcnMgZm9yIHRoZSBjdXJyZW50IHllYXInXG4gIH0sXG4gIFNIT1JUQ09ERV9IRUxQOiB7XG4gICAgaWNvbjogJ3phcCcsXG4gICAgdGl0bGU6ICdTaG9ydGNvZGUgSGVscCcsXG4gICAgdG9vbHRpcDogJ1Nob3cgYXZhaWxhYmxlIHNob3J0Y29kZXMgYW5kIGV4YW1wbGVzJ1xuICB9LFxuICBSRUJVSUxEX1NUUlVDVFVSRToge1xuICAgIGljb246ICdmb2xkZXItc3luYycsXG4gICAgdGl0bGU6ICdSZWJ1aWxkIERpcmVjdG9yeSBTdHJ1Y3R1cmUnLFxuICAgIHRvb2x0aXA6ICdSZWJ1aWxkIHRoZSBwbHVnaW5cXCdzIGRpcmVjdG9yeSBzdHJ1Y3R1cmUnXG4gIH0sXG4gIFBMVUdJTl9TRVRUSU5HUzoge1xuICAgIGljb246ICdzZXR0aW5ncycsXG4gICAgdGl0bGU6ICdMaW5rIFBsdWdpbiBTZXR0aW5ncycsXG4gICAgdG9vbHRpcDogJ09wZW4gTGluayBQbHVnaW4gc2V0dGluZ3MnXG4gIH1cbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBEQVRFX0ZPUk1BVFMgPSB7XG4gIERFRkFVTFRfSk9VUk5BTDogJ1lZWVktTU0tREQgZGRkZCcsXG4gIElTT19EQVRFOiAnWVlZWS1NTS1ERCcsXG4gIEZPTERFUl9GT1JNQVQ6ICdZWVlZL01NJ1xufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IFNIT1JUQ09ERV9QQVRURVJOUyA9IHtcbiAgRUxFTUVOVDogL15bYS16QS1aMC05Xy1dKyQvLFxuICBNVUxUSVBMSUVSOiAvXlthLXpBLVowLTlfLV0rXFwqXFxkKyQvLFxuICBDSElMRDogLz4vLFxuICBTSUJMSU5HOiAvXFwrLyxcbiAgQ09OVEVOVDogL1xcey4qXFx9LyxcbiAgQVRUUklCVVRFOiAvXFxbLipcXF0vLFxuICBHUk9VUDogL1xcKC4qXFwpL1xufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IEVSUk9SX01FU1NBR0VTID0ge1xuICBJTlZBTElEX1BBVEg6ICdJbnZhbGlkIGZpbGUgcGF0aCBwcm92aWRlZCcsXG4gIERJUkVDVE9SWV9DUkVBVEVfRkFJTEVEOiAnRmFpbGVkIHRvIGNyZWF0ZSBkaXJlY3RvcnknLFxuICBGSUxFX0NSRUFURV9GQUlMRUQ6ICdGYWlsZWQgdG8gY3JlYXRlIGZpbGUnLFxuICBTSE9SVENPREVfUEFSU0VfRVJST1I6ICdGYWlsZWQgdG8gcGFyc2Ugc2hvcnRjb2RlJyxcbiAgSk9VUk5BTF9DUkVBVEVfRVJST1I6ICdGYWlsZWQgdG8gY3JlYXRlIGpvdXJuYWwgZW50cnknXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9URU1QTEFURVMgPSB7XG4gIEpPVVJOQUw6IGAjIHt7ZGF0ZX19XG5cbiMjIERhaWx5IExvZ1xuXG4jIyBUYXNrc1xuLSBbIF0gXG5cbiMjIE5vdGVzXG5cbiMjIFJlZmxlY3Rpb25cblxuLS0tXG5QcmV2aW91czoge3twcmV2aW91c319XG5OZXh0OiB7e25leHR9fVxuYCxcbiAgTk9URTogYC0tLVxudGl0bGU6IHt7dGl0bGV9fVxuY3JlYXRlZDoge3tkYXRlfX1cbnNvdXJjZToge3tzb3VyY2V9fVxudGFnczogW11cbi0tLVxuXG4jIHt7dGl0bGV9fVxuXG5gXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgUkVHRVhfUEFUVEVSTlMgPSB7XG4gIFdJS0lfTElOSzogL1xcW1xcWyguKj8pXFxdXFxdL2csXG4gIFNIT1JUQ09ERTogL1tcXHc+Kyp7fVxcW1xcXSgpXSskLyxcbiAgREFURV9GSUxFTkFNRTogL1xcZHs0fS1cXGR7Mn0tXFxkezJ9LyxcbiAgSU5WQUxJRF9GSUxFTkFNRV9DSEFSUzogL1tcXFxcLzoqP1wiPD58XS9nXG59IGFzIGNvbnN0OyIsICJpbXBvcnQgeyBERUZBVUxUX0RJUkVDVE9SSUVTLCBERUZBVUxUX0JBU0VfRk9MREVSIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGlyZWN0b3J5U2V0dGluZ3NDb25maWcge1xyXG4gIGJhc2VGb2xkZXI6IHN0cmluZztcclxuICBkaXJlY3RvcnlTdHJ1Y3R1cmU6IHN0cmluZ1tdO1xyXG4gIHJlc3RyaWN0ZWREaXJlY3Rvcmllczogc3RyaW5nW107XHJcbiAgZG9jdW1lbnREaXJlY3Rvcnk6IHN0cmluZztcclxuICBqb3VybmFsUm9vdEZvbGRlcjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGlyZWN0b3J5U2V0dGluZ3Mge1xyXG4gIHN0YXRpYyBnZXREZWZhdWx0cygpOiBEaXJlY3RvcnlTZXR0aW5nc0NvbmZpZyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBiYXNlRm9sZGVyOiBERUZBVUxUX0JBU0VfRk9MREVSLCAvLyBDcmVhdGVzIGFsbCBkaXJlY3RvcmllcyB1bmRlciAnTGlua1BsdWdpbi8nIGJ5IGRlZmF1bHRcclxuICAgICAgZGlyZWN0b3J5U3RydWN0dXJlOiBERUZBVUxUX0RJUkVDVE9SSUVTLFxyXG4gICAgICByZXN0cmljdGVkRGlyZWN0b3JpZXM6IFtdLFxyXG4gICAgICBkb2N1bWVudERpcmVjdG9yeTogJ3dvcmtzcGFjZScsIC8vIFVwZGF0ZWQgdG8gbWF0Y2ggUkVBRE1FIHN0cnVjdHVyZVxyXG4gICAgICBqb3VybmFsUm9vdEZvbGRlcjogJ2pvdXJuYWwnLCAvLyBVcGRhdGVkIHRvIG1hdGNoIFJFQURNRSBzdHJ1Y3R1cmVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdmFsaWRhdGUoc2V0dGluZ3M6IFBhcnRpYWw8RGlyZWN0b3J5U2V0dGluZ3NDb25maWc+KTogUGFydGlhbDxEaXJlY3RvcnlTZXR0aW5nc0NvbmZpZz4ge1xyXG4gICAgY29uc3QgdmFsaWRhdGVkOiBQYXJ0aWFsPERpcmVjdG9yeVNldHRpbmdzQ29uZmlnPiA9IHt9O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGJhc2UgZm9sZGVyIHNldHRpbmdcclxuICAgIGlmIChzZXR0aW5ncy5iYXNlRm9sZGVyICYmIHR5cGVvZiBzZXR0aW5ncy5iYXNlRm9sZGVyID09PSAnc3RyaW5nJykge1xyXG4gICAgICB2YWxpZGF0ZWQuYmFzZUZvbGRlciA9IHNldHRpbmdzLmJhc2VGb2xkZXIudHJpbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcclxuICAgIGlmIChzZXR0aW5ncy5kaXJlY3RvcnlTdHJ1Y3R1cmUgJiYgQXJyYXkuaXNBcnJheShzZXR0aW5ncy5kaXJlY3RvcnlTdHJ1Y3R1cmUpKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5kaXJlY3RvcnlTdHJ1Y3R1cmUgPSBzZXR0aW5ncy5kaXJlY3RvcnlTdHJ1Y3R1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgcmVzdHJpY3RlZCBkaXJlY3Rvcmllc1xyXG4gICAgaWYgKHNldHRpbmdzLnJlc3RyaWN0ZWREaXJlY3RvcmllcyAmJiBBcnJheS5pc0FycmF5KHNldHRpbmdzLnJlc3RyaWN0ZWREaXJlY3RvcmllcykpIHtcclxuICAgICAgdmFsaWRhdGVkLnJlc3RyaWN0ZWREaXJlY3RvcmllcyA9IHNldHRpbmdzLnJlc3RyaWN0ZWREaXJlY3RvcmllcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBkb2N1bWVudCBkaXJlY3RvcnlcclxuICAgIGlmIChzZXR0aW5ncy5kb2N1bWVudERpcmVjdG9yeSAmJiB0eXBlb2Ygc2V0dGluZ3MuZG9jdW1lbnREaXJlY3RvcnkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5kb2N1bWVudERpcmVjdG9yeSA9IHNldHRpbmdzLmRvY3VtZW50RGlyZWN0b3J5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGpvdXJuYWwgcm9vdCBmb2xkZXJcclxuICAgIGlmIChzZXR0aW5ncy5qb3VybmFsUm9vdEZvbGRlciAmJiB0eXBlb2Ygc2V0dGluZ3Muam91cm5hbFJvb3RGb2xkZXIgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5qb3VybmFsUm9vdEZvbGRlciA9IHNldHRpbmdzLmpvdXJuYWxSb290Rm9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWxpZGF0ZWQ7XHJcbiAgfVxyXG59ICIsICJpbXBvcnQgeyBEQVRFX0ZPUk1BVFMsIERFRkFVTFRfVEVNUExBVEVTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSm91cm5hbFNldHRpbmdzQ29uZmlnIHtcclxuICBqb3VybmFsRGF0ZUZvcm1hdDogc3RyaW5nO1xyXG4gIGpvdXJuYWxGb2xkZXJGb3JtYXQ6IHN0cmluZztcclxuICBqb3VybmFsVGVtcGxhdGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpvdXJuYWxTZXR0aW5ncyB7XHJcbiAgc3RhdGljIGdldERlZmF1bHRzKCk6IEpvdXJuYWxTZXR0aW5nc0NvbmZpZyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBqb3VybmFsRGF0ZUZvcm1hdDogREFURV9GT1JNQVRTLkRFRkFVTFRfSk9VUk5BTCxcclxuICAgICAgam91cm5hbEZvbGRlckZvcm1hdDogREFURV9GT1JNQVRTLkZPTERFUl9GT1JNQVQsXHJcbiAgICAgIGpvdXJuYWxUZW1wbGF0ZTogREVGQVVMVF9URU1QTEFURVMuSk9VUk5BTCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdmFsaWRhdGUoc2V0dGluZ3M6IFBhcnRpYWw8Sm91cm5hbFNldHRpbmdzQ29uZmlnPik6IFBhcnRpYWw8Sm91cm5hbFNldHRpbmdzQ29uZmlnPiB7XHJcbiAgICBjb25zdCB2YWxpZGF0ZWQ6IFBhcnRpYWw8Sm91cm5hbFNldHRpbmdzQ29uZmlnPiA9IHt9O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGpvdXJuYWwgZGF0ZSBmb3JtYXRcclxuICAgIGlmIChzZXR0aW5ncy5qb3VybmFsRGF0ZUZvcm1hdCAmJiB0eXBlb2Ygc2V0dGluZ3Muam91cm5hbERhdGVGb3JtYXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5qb3VybmFsRGF0ZUZvcm1hdCA9IHNldHRpbmdzLmpvdXJuYWxEYXRlRm9ybWF0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGpvdXJuYWwgZm9sZGVyIGZvcm1hdFxyXG4gICAgaWYgKHNldHRpbmdzLmpvdXJuYWxGb2xkZXJGb3JtYXQgJiYgdHlwZW9mIHNldHRpbmdzLmpvdXJuYWxGb2xkZXJGb3JtYXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5qb3VybmFsRm9sZGVyRm9ybWF0ID0gc2V0dGluZ3Muam91cm5hbEZvbGRlckZvcm1hdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBqb3VybmFsIHRlbXBsYXRlXHJcbiAgICBpZiAoc2V0dGluZ3Muam91cm5hbFRlbXBsYXRlICYmIHR5cGVvZiBzZXR0aW5ncy5qb3VybmFsVGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5qb3VybmFsVGVtcGxhdGUgPSBzZXR0aW5ncy5qb3VybmFsVGVtcGxhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbGlkYXRlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc1ZhbGlkRGF0ZUZvcm1hdChmb3JtYXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIGNoZWNrIGlmIGZvcm1hdCBjb250YWlucyB2YWxpZCBtb21lbnQuanMgdG9rZW5zXHJcbiAgICAgIGNvbnN0IHZhbGlkVG9rZW5zID0gWydZWVlZJywgJ01NJywgJ0REJywgJ2RkZGQnLCAnTU1NJywgJ01NTU0nXTtcclxuICAgICAgcmV0dXJuIHZhbGlkVG9rZW5zLnNvbWUodG9rZW4gPT4gZm9ybWF0LmluY2x1ZGVzKHRva2VuKSk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufSAiLCAiaW1wb3J0IHsgREVGQVVMVF9URU1QTEFURVMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBOb3RlU2V0dGluZ3NDb25maWcge1xyXG4gIG5vdGVUZW1wbGF0ZTogc3RyaW5nO1xyXG4gIG9wZW5OZXdOb3RlOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTm90ZVNldHRpbmdzIHtcclxuICBzdGF0aWMgZ2V0RGVmYXVsdHMoKTogTm90ZVNldHRpbmdzQ29uZmlnIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5vdGVUZW1wbGF0ZTogREVGQVVMVF9URU1QTEFURVMuTk9URSxcclxuICAgICAgb3Blbk5ld05vdGU6IHRydWUsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHZhbGlkYXRlKHNldHRpbmdzOiBQYXJ0aWFsPE5vdGVTZXR0aW5nc0NvbmZpZz4pOiBQYXJ0aWFsPE5vdGVTZXR0aW5nc0NvbmZpZz4ge1xyXG4gICAgY29uc3QgdmFsaWRhdGVkOiBQYXJ0aWFsPE5vdGVTZXR0aW5nc0NvbmZpZz4gPSB7fTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBub3RlIHRlbXBsYXRlXHJcbiAgICBpZiAoc2V0dGluZ3Mubm90ZVRlbXBsYXRlICYmIHR5cGVvZiBzZXR0aW5ncy5ub3RlVGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5ub3RlVGVtcGxhdGUgPSBzZXR0aW5ncy5ub3RlVGVtcGxhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgb3BlbiBuZXcgbm90ZSBzZXR0aW5nXHJcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLm9wZW5OZXdOb3RlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgdmFsaWRhdGVkLm9wZW5OZXdOb3RlID0gc2V0dGluZ3Mub3Blbk5ld05vdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbGlkYXRlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB2YWxpZGF0ZVRlbXBsYXRlKHRlbXBsYXRlOiBzdHJpbmcpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XHJcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGZvciByZXF1aXJlZCB0ZW1wbGF0ZSB2YXJpYWJsZXNcclxuICAgIGNvbnN0IHJlcXVpcmVkVmFycyA9IFsne3t0aXRsZX19J107XHJcbiAgICBjb25zdCBtaXNzaW5nVmFycyA9IHJlcXVpcmVkVmFycy5maWx0ZXIodmFyTmFtZSA9PiAhdGVtcGxhdGUuaW5jbHVkZXModmFyTmFtZSkpO1xyXG4gICAgXHJcbiAgICBpZiAobWlzc2luZ1ZhcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBlcnJvcnMucHVzaChgTWlzc2luZyByZXF1aXJlZCB0ZW1wbGF0ZSB2YXJpYWJsZXM6ICR7bWlzc2luZ1ZhcnMuam9pbignLCAnKX1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBmb3IgbWFsZm9ybWVkIHRlbXBsYXRlIHZhcmlhYmxlc1xyXG4gICAgY29uc3QgdGVtcGxhdGVWYXJQYXR0ZXJuID0gL1xce1xce1tefV0qXFx9XFx9L2c7XHJcbiAgICBjb25zdCBtYXRjaGVzID0gdGVtcGxhdGUubWF0Y2godGVtcGxhdGVWYXJQYXR0ZXJuKTtcclxuICAgIGlmIChtYXRjaGVzKSB7XHJcbiAgICAgIG1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7XHJcbiAgICAgICAgaWYgKCFtYXRjaC5lbmRzV2l0aCgnfX0nKSkge1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goYE1hbGZvcm1lZCB0ZW1wbGF0ZSB2YXJpYWJsZTogJHttYXRjaH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXHJcbiAgICAgIGVycm9yc1xyXG4gICAgfTtcclxuICB9XHJcbn0gIiwgImV4cG9ydCBpbnRlcmZhY2UgU2hvcnRjb2RlU2V0dGluZ3NDb25maWcge1xyXG4gIHNob3J0Y29kZUVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgc2hvcnRjb2RlVHJpZ2dlcktleTogc3RyaW5nO1xyXG4gIGN1c3RvbVNob3J0Y29kZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaG9ydGNvZGVTZXR0aW5ncyB7XHJcbiAgc3RhdGljIGdldERlZmF1bHRzKCk6IFNob3J0Y29kZVNldHRpbmdzQ29uZmlnIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNob3J0Y29kZUVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIHNob3J0Y29kZVRyaWdnZXJLZXk6ICdUYWInLFxyXG4gICAgICBjdXN0b21TaG9ydGNvZGVzOiB7fSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdmFsaWRhdGUoc2V0dGluZ3M6IFBhcnRpYWw8U2hvcnRjb2RlU2V0dGluZ3NDb25maWc+KTogUGFydGlhbDxTaG9ydGNvZGVTZXR0aW5nc0NvbmZpZz4ge1xyXG4gICAgY29uc3QgdmFsaWRhdGVkOiBQYXJ0aWFsPFNob3J0Y29kZVNldHRpbmdzQ29uZmlnPiA9IHt9O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIHNob3J0Y29kZSBlbmFibGVkIHNldHRpbmdcclxuICAgIGlmICh0eXBlb2Ygc2V0dGluZ3Muc2hvcnRjb2RlRW5hYmxlZCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5zaG9ydGNvZGVFbmFibGVkID0gc2V0dGluZ3Muc2hvcnRjb2RlRW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBzaG9ydGNvZGUgdHJpZ2dlciBrZXlcclxuICAgIGlmIChzZXR0aW5ncy5zaG9ydGNvZGVUcmlnZ2VyS2V5ICYmIHR5cGVvZiBzZXR0aW5ncy5zaG9ydGNvZGVUcmlnZ2VyS2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICBjb25zdCB2YWxpZFRyaWdnZXJLZXlzID0gWydUYWInLCAnRW50ZXInLCAnU3BhY2UnXTtcclxuICAgICAgaWYgKHZhbGlkVHJpZ2dlcktleXMuaW5jbHVkZXMoc2V0dGluZ3Muc2hvcnRjb2RlVHJpZ2dlcktleSkpIHtcclxuICAgICAgICB2YWxpZGF0ZWQuc2hvcnRjb2RlVHJpZ2dlcktleSA9IHNldHRpbmdzLnNob3J0Y29kZVRyaWdnZXJLZXk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBjdXN0b20gc2hvcnRjb2Rlc1xyXG4gICAgaWYgKHNldHRpbmdzLmN1c3RvbVNob3J0Y29kZXMgJiYgdHlwZW9mIHNldHRpbmdzLmN1c3RvbVNob3J0Y29kZXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRlZFNob3J0Y29kZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNldHRpbmdzLmN1c3RvbVNob3J0Y29kZXMpKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb24gZm9yIHNob3J0Y29kZSBwYXR0ZXJuc1xyXG4gICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNob3J0Y29kZVBhdHRlcm4oa2V5KSAmJiB2YWx1ZS50cmltKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZWRTaG9ydGNvZGVzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHZhbGlkYXRlZC5jdXN0b21TaG9ydGNvZGVzID0gdmFsaWRhdGVkU2hvcnRjb2RlcztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsaWRhdGVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzVmFsaWRTaG9ydGNvZGVQYXR0ZXJuKHBhdHRlcm46IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgLy8gQmFzaWMgcGF0dGVybiB2YWxpZGF0aW9uIC0gYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlLCBkYXNoLCBhbmQgc2hvcnRjb2RlIG9wZXJhdG9yc1xyXG4gICAgY29uc3QgdmFsaWRQYXR0ZXJuID0gL15bYS16QS1aMC05X1xcLSs+Knt9XFxbXFxdKCldKyQvO1xyXG4gICAgcmV0dXJuIHZhbGlkUGF0dGVybi50ZXN0KHBhdHRlcm4pICYmIHBhdHRlcm4ubGVuZ3RoID4gMCAmJiBwYXR0ZXJuLmxlbmd0aCA8PSAxMDA7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0QnVpbHRpblNob3J0Y29kZXMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAndGFibGUzeDQnOiAnQ3JlYXRlcyBhIDN4NCB0YWJsZSBzdHJ1Y3R1cmUnLFxyXG4gICAgICAnaDIrdWw+bGkqMyc6ICdDcmVhdGVzIGhlYWRpbmcgd2l0aCAzLWl0ZW0gbGlzdCcsXHJcbiAgICAgICdkaXY+aDMrdWw+bGkqNSc6ICdDcmVhdGVzIHNlY3Rpb24gd2l0aCBoZWFkaW5nIGFuZCA1IGxpc3QgaXRlbXMnLFxyXG4gICAgICAnbGlua1t1cmxde3RleHR9JzogJ0NyZWF0ZXMgbWFya2Rvd24gbGluaycsXHJcbiAgICB9O1xyXG4gIH1cclxufSAiLCAiZXhwb3J0IGludGVyZmFjZSBHZW5lcmFsU2V0dGluZ3NDb25maWcge1xyXG4gIGRlYnVnTW9kZTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdlbmVyYWxTZXR0aW5ncyB7XHJcbiAgc3RhdGljIGdldERlZmF1bHRzKCk6IEdlbmVyYWxTZXR0aW5nc0NvbmZpZyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkZWJ1Z01vZGU6IGZhbHNlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB2YWxpZGF0ZShzZXR0aW5nczogUGFydGlhbDxHZW5lcmFsU2V0dGluZ3NDb25maWc+KTogUGFydGlhbDxHZW5lcmFsU2V0dGluZ3NDb25maWc+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRlZDogUGFydGlhbDxHZW5lcmFsU2V0dGluZ3NDb25maWc+ID0ge307XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZGVidWcgbW9kZSBzZXR0aW5nXHJcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLmRlYnVnTW9kZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIHZhbGlkYXRlZC5kZWJ1Z01vZGUgPSBzZXR0aW5ncy5kZWJ1Z01vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbGlkYXRlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREZWJ1Z0luZm8oKTogUmVjb3JkPHN0cmluZywgYW55PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgdXNlckFnZW50OiBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG4gICAgICBwbGF0Zm9ybTogbmF2aWdhdG9yLnBsYXRmb3JtLFxyXG4gICAgICBsYW5ndWFnZTogbmF2aWdhdG9yLmxhbmd1YWdlLFxyXG4gICAgfTtcclxuICB9XHJcbn0gIiwgImltcG9ydCB7IExpbmtQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgRGlyZWN0b3J5U2V0dGluZ3MgfSBmcm9tICcuL2RpcmVjdG9yeVNldHRpbmdzJztcclxuaW1wb3J0IHsgSm91cm5hbFNldHRpbmdzIH0gZnJvbSAnLi9qb3VybmFsU2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBOb3RlU2V0dGluZ3MgfSBmcm9tICcuL25vdGVTZXR0aW5ncyc7XHJcbmltcG9ydCB7IFNob3J0Y29kZVNldHRpbmdzIH0gZnJvbSAnLi9zaG9ydGNvZGVTZXR0aW5ncyc7XHJcbmltcG9ydCB7IEdlbmVyYWxTZXR0aW5ncyB9IGZyb20gJy4vZ2VuZXJhbFNldHRpbmdzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPExpbmtQbHVnaW5TZXR0aW5ncz4pOiBMaW5rUGx1Z2luU2V0dGluZ3Mge1xyXG4gIC8vIENyZWF0ZSBkZWZhdWx0IHNldHRpbmdzIGJ5IGNvbWJpbmluZyBhbGwgbW9kdWxlc1xyXG4gIGNvbnN0IHZhbGlkYXRlZFNldHRpbmdzOiBMaW5rUGx1Z2luU2V0dGluZ3MgPSB7XHJcbiAgICAuLi5EaXJlY3RvcnlTZXR0aW5ncy5nZXREZWZhdWx0cygpLFxyXG4gICAgLi4uSm91cm5hbFNldHRpbmdzLmdldERlZmF1bHRzKCksXHJcbiAgICAuLi5Ob3RlU2V0dGluZ3MuZ2V0RGVmYXVsdHMoKSxcclxuICAgIC4uLlNob3J0Y29kZVNldHRpbmdzLmdldERlZmF1bHRzKCksXHJcbiAgICAuLi5HZW5lcmFsU2V0dGluZ3MuZ2V0RGVmYXVsdHMoKVxyXG4gIH07XHJcblxyXG4gIC8vIFZhbGlkYXRlIGVhY2ggY2F0ZWdvcnkgb2Ygc2V0dGluZ3NcclxuICBjb25zdCBkaXJlY3RvcnlWYWxpZGF0aW9uID0gRGlyZWN0b3J5U2V0dGluZ3MudmFsaWRhdGUoc2V0dGluZ3MpO1xyXG4gIGNvbnN0IGpvdXJuYWxWYWxpZGF0aW9uID0gSm91cm5hbFNldHRpbmdzLnZhbGlkYXRlKHNldHRpbmdzKTtcclxuICBjb25zdCBub3RlVmFsaWRhdGlvbiA9IE5vdGVTZXR0aW5ncy52YWxpZGF0ZShzZXR0aW5ncyk7XHJcbiAgY29uc3Qgc2hvcnRjb2RlVmFsaWRhdGlvbiA9IFNob3J0Y29kZVNldHRpbmdzLnZhbGlkYXRlKHNldHRpbmdzKTtcclxuICBjb25zdCBnZW5lcmFsVmFsaWRhdGlvbiA9IEdlbmVyYWxTZXR0aW5ncy52YWxpZGF0ZShzZXR0aW5ncyk7XHJcblxyXG4gIC8vIE1lcmdlIHZhbGlkYXRlZCBzZXR0aW5nc1xyXG4gIE9iamVjdC5hc3NpZ24odmFsaWRhdGVkU2V0dGluZ3MsIFxyXG4gICAgZGlyZWN0b3J5VmFsaWRhdGlvbixcclxuICAgIGpvdXJuYWxWYWxpZGF0aW9uLFxyXG4gICAgbm90ZVZhbGlkYXRpb24sXHJcbiAgICBzaG9ydGNvZGVWYWxpZGF0aW9uLFxyXG4gICAgZ2VuZXJhbFZhbGlkYXRpb25cclxuICApO1xyXG5cclxuICByZXR1cm4gdmFsaWRhdGVkU2V0dGluZ3M7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NWYWxpZGF0aW9uUmVzdWx0IHtcclxuICBpc1ZhbGlkOiBib29sZWFuO1xyXG4gIGVycm9yczogc3RyaW5nW107XHJcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xyXG4gIHZhbGlkYXRlZFNldHRpbmdzOiBMaW5rUGx1Z2luU2V0dGluZ3M7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNldHRpbmdzV2l0aERldGFpbHMoc2V0dGluZ3M6IFBhcnRpYWw8TGlua1BsdWdpblNldHRpbmdzPik6IFNldHRpbmdzVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIFxyXG4gIC8vIFZhbGlkYXRlIG5vdGUgdGVtcGxhdGUgaWYgcHJvdmlkZWRcclxuICBpZiAoc2V0dGluZ3Mubm90ZVRlbXBsYXRlKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZVZhbGlkYXRpb24gPSBOb3RlU2V0dGluZ3MudmFsaWRhdGVUZW1wbGF0ZShzZXR0aW5ncy5ub3RlVGVtcGxhdGUpO1xyXG4gICAgaWYgKCF0ZW1wbGF0ZVZhbGlkYXRpb24uaXNWYWxpZCkge1xyXG4gICAgICBlcnJvcnMucHVzaCguLi50ZW1wbGF0ZVZhbGlkYXRpb24uZXJyb3JzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXRlIGpvdXJuYWwgZGF0ZSBmb3JtYXQgaWYgcHJvdmlkZWRcclxuICBpZiAoc2V0dGluZ3Muam91cm5hbERhdGVGb3JtYXQgJiYgIUpvdXJuYWxTZXR0aW5ncy5pc1ZhbGlkRGF0ZUZvcm1hdChzZXR0aW5ncy5qb3VybmFsRGF0ZUZvcm1hdCkpIHtcclxuICAgIHdhcm5pbmdzLnB1c2goJ0ludmFsaWQgam91cm5hbCBkYXRlIGZvcm1hdCBwcm92aWRlZCwgdXNpbmcgZGVmYXVsdCcpO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgc2hvcnRjb2RlIHBhdHRlcm5zIGlmIHByb3ZpZGVkXHJcbiAgaWYgKHNldHRpbmdzLmN1c3RvbVNob3J0Y29kZXMpIHtcclxuICAgIGZvciAoY29uc3QgW3BhdHRlcm4sIGV4cGFuc2lvbl0gb2YgT2JqZWN0LmVudHJpZXMoc2V0dGluZ3MuY3VzdG9tU2hvcnRjb2RlcykpIHtcclxuICAgICAgaWYgKCFTaG9ydGNvZGVTZXR0aW5ncy5pc1ZhbGlkU2hvcnRjb2RlUGF0dGVybihwYXR0ZXJuKSkge1xyXG4gICAgICAgIHdhcm5pbmdzLnB1c2goYEludmFsaWQgc2hvcnRjb2RlIHBhdHRlcm46ICR7cGF0dGVybn1gKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQmFzaWMgZGlyZWN0b3J5IHN0cnVjdHVyZSB2YWxpZGF0aW9uXHJcbiAgaWYgKHNldHRpbmdzLmRpcmVjdG9yeVN0cnVjdHVyZSAmJiBzZXR0aW5ncy5kaXJlY3RvcnlTdHJ1Y3R1cmUubGVuZ3RoID09PSAwKSB7XHJcbiAgICB3YXJuaW5ncy5wdXNoKCdFbXB0eSBkaXJlY3Rvcnkgc3RydWN0dXJlIHByb3ZpZGVkLCB1c2luZyBkZWZhdWx0cycpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdmFsaWRhdGVkU2V0dGluZ3MgPSB2YWxpZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXHJcbiAgICBlcnJvcnMsXHJcbiAgICB3YXJuaW5ncyxcclxuICAgIHZhbGlkYXRlZFNldHRpbmdzXHJcbiAgfTtcclxufSAiLCAiaW1wb3J0IHsgTGlua1BsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBEaXJlY3RvcnlTZXR0aW5ncyB9IGZyb20gJy4vZGlyZWN0b3J5U2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBKb3VybmFsU2V0dGluZ3MgfSBmcm9tICcuL2pvdXJuYWxTZXR0aW5ncyc7XHJcbmltcG9ydCB7IE5vdGVTZXR0aW5ncyB9IGZyb20gJy4vbm90ZVNldHRpbmdzJztcclxuaW1wb3J0IHsgU2hvcnRjb2RlU2V0dGluZ3MgfSBmcm9tICcuL3Nob3J0Y29kZVNldHRpbmdzJztcclxuaW1wb3J0IHsgR2VuZXJhbFNldHRpbmdzIH0gZnJvbSAnLi9nZW5lcmFsU2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExpbmtQbHVnaW5TZXR0aW5ncyA9IHtcclxuICAuLi5EaXJlY3RvcnlTZXR0aW5ncy5nZXREZWZhdWx0cygpLFxyXG4gIC4uLkpvdXJuYWxTZXR0aW5ncy5nZXREZWZhdWx0cygpLFxyXG4gIC4uLk5vdGVTZXR0aW5ncy5nZXREZWZhdWx0cygpLFxyXG4gIC4uLlNob3J0Y29kZVNldHRpbmdzLmdldERlZmF1bHRzKCksXHJcbiAgLi4uR2VuZXJhbFNldHRpbmdzLmdldERlZmF1bHRzKClcclxufTsgIiwgIi8vIFJlLWV4cG9ydCBldmVyeXRoaW5nIGZyb20gdGhlIG1vZHVsYXIgc2V0dGluZ3Mgc3RydWN0dXJlXG5leHBvcnQgeyBcbiAgdmFsaWRhdGVTZXR0aW5ncyxcbiAgdmFsaWRhdGVTZXR0aW5nc1dpdGhEZXRhaWxzLFxuICB0eXBlIFNldHRpbmdzVmFsaWRhdGlvblJlc3VsdFxufSBmcm9tICcuL3NldHRpbmdzL3NldHRpbmdzVmFsaWRhdG9yJztcblxuLy8gUmUtZXhwb3J0IGluZGl2aWR1YWwgc2V0dGluZyBtb2R1bGVzIGZvciBhZHZhbmNlZCB1c2FnZVxuZXhwb3J0IHtcbiAgRGlyZWN0b3J5U2V0dGluZ3MsXG4gIHR5cGUgRGlyZWN0b3J5U2V0dGluZ3NDb25maWdcbn0gZnJvbSAnLi9zZXR0aW5ncy9kaXJlY3RvcnlTZXR0aW5ncyc7XG5cbmV4cG9ydCB7XG4gIEpvdXJuYWxTZXR0aW5ncyxcbiAgdHlwZSBKb3VybmFsU2V0dGluZ3NDb25maWdcbn0gZnJvbSAnLi9zZXR0aW5ncy9qb3VybmFsU2V0dGluZ3MnO1xuXG5leHBvcnQge1xuICBOb3RlU2V0dGluZ3MsXG4gIHR5cGUgTm90ZVNldHRpbmdzQ29uZmlnXG59IGZyb20gJy4vc2V0dGluZ3Mvbm90ZVNldHRpbmdzJztcblxuZXhwb3J0IHtcbiAgU2hvcnRjb2RlU2V0dGluZ3MsXG4gIHR5cGUgU2hvcnRjb2RlU2V0dGluZ3NDb25maWdcbn0gZnJvbSAnLi9zZXR0aW5ncy9zaG9ydGNvZGVTZXR0aW5ncyc7XG5cbmV4cG9ydCB7XG4gIEdlbmVyYWxTZXR0aW5ncyxcbiAgdHlwZSBHZW5lcmFsU2V0dGluZ3NDb25maWdcbn0gZnJvbSAnLi9zZXR0aW5ncy9nZW5lcmFsU2V0dGluZ3MnO1xuXG4vLyBSZS1leHBvcnQgZGVmYXVsdCBzZXR0aW5nc1xuZXhwb3J0IHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3MvZGVmYXVsdFNldHRpbmdzJzsiLCAiaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIHZhbGlkYXRlU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IExpbmtQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL3VpL3NldHRpbmdzVGFiJztcbmltcG9ydCB7IFJpYmJvbk1hbmFnZXIgfSBmcm9tICcuL3VpL3JpYmJvbk1hbmFnZXInO1xuaW1wb3J0IHsgRGlyZWN0b3J5TWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMvZGlyZWN0b3J5TWFuYWdlcic7XG5pbXBvcnQgeyBKb3VybmFsTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMvam91cm5hbE1hbmFnZXInO1xuaW1wb3J0IHsgTGlua01hbmFnZXIgfSBmcm9tICcuL21hbmFnZXJzL2xpbmtNYW5hZ2VyJztcbmltcG9ydCB7IFNob3J0Y29kZU1hbmFnZXIgfSBmcm9tICcuL3Nob3J0Y29kZXMvcmVnaXN0cnknO1xuaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSAnLi91dGlscy9lcnJvckhhbmRsZXInO1xuaW1wb3J0IHsgRGF0ZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2RhdGVTZXJ2aWNlJztcbmltcG9ydCB7IENPTU1BTkRfSURTIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5rUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3MhOiBMaW5rUGx1Z2luU2V0dGluZ3M7XG4gIGRpcmVjdG9yeU1hbmFnZXIhOiBEaXJlY3RvcnlNYW5hZ2VyO1xuICBqb3VybmFsTWFuYWdlciE6IEpvdXJuYWxNYW5hZ2VyO1xuICBsaW5rTWFuYWdlciE6IExpbmtNYW5hZ2VyO1xuICBzaG9ydGNvZGVNYW5hZ2VyITogU2hvcnRjb2RlTWFuYWdlcjtcbiAgZXJyb3JIYW5kbGVyITogRXJyb3JIYW5kbGVyO1xuICByaWJib25NYW5hZ2VyITogUmliYm9uTWFuYWdlcjtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgTGluayBQbHVnaW4uLi4nKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBJbml0aWFsaXplIERhdGVTZXJ2aWNlIGZpcnN0XG4gICAgICBEYXRlU2VydmljZS5pbml0aWFsaXplKCk7XG5cbiAgICAgIC8vIExvYWQgc2V0dGluZ3NcbiAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgZXJyb3IgaGFuZGxlciBmaXJzdFxuICAgICAgdGhpcy5lcnJvckhhbmRsZXIgPSBuZXcgRXJyb3JIYW5kbGVyKHRoaXMpO1xuXG4gICAgICAvLyBJbml0aWFsaXplIG1hbmFnZXJzXG4gICAgICB0aGlzLmRpcmVjdG9yeU1hbmFnZXIgPSBuZXcgRGlyZWN0b3J5TWFuYWdlcih0aGlzKTtcbiAgICAgIHRoaXMuam91cm5hbE1hbmFnZXIgPSBuZXcgSm91cm5hbE1hbmFnZXIodGhpcyk7XG4gICAgICB0aGlzLmxpbmtNYW5hZ2VyID0gbmV3IExpbmtNYW5hZ2VyKHRoaXMpO1xuICAgICAgdGhpcy5zaG9ydGNvZGVNYW5hZ2VyID0gbmV3IFNob3J0Y29kZU1hbmFnZXIodGhpcyk7XG4gICAgICB0aGlzLnJpYmJvbk1hbmFnZXIgPSBuZXcgUmliYm9uTWFuYWdlcih0aGlzKTtcblxuICAgICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAvLyBJbml0aWFsaXplIHJpYmJvblxuICAgICAgdGhpcy5yaWJib25NYW5hZ2VyLmluaXRpYWxpemVSaWJib24oKTtcblxuICAgICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xuXG4gICAgICAvLyBSZWdpc3RlciBldmVudCBoYW5kbGVyc1xuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50SGFuZGxlcnMoKTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBhd2FpdCB0aGlzLmRpcmVjdG9yeU1hbmFnZXIucmVidWlsZERpcmVjdG9yeVN0cnVjdHVyZSgpO1xuXG4gICAgICAvLyBFbnN1cmUgY3VycmVudCBtb250aCBmb2xkZXIgZXhpc3RzXG4gICAgICBhd2FpdCB0aGlzLmpvdXJuYWxNYW5hZ2VyLmNoZWNrQW5kQ3JlYXRlQ3VycmVudE1vbnRoRm9sZGVyKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdMaW5rIFBsdWdpbiBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIExpbmsgUGx1Z2luOicsIGVycm9yKTtcbiAgICAgIGlmICh0aGlzLmVycm9ySGFuZGxlcikge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ1BsdWdpbiBpbml0aWFsaXphdGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICB0aGlzLnNldHRpbmdzID0gdmFsaWRhdGVTZXR0aW5ncyhsb2FkZWREYXRhIHx8IHt9KTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIC8vIFVwZGF0ZSByaWJib24gYnV0dG9uIHN0YXRlcyB3aGVuIHNldHRpbmdzIGNoYW5nZVxuICAgIGlmICh0aGlzLnJpYmJvbk1hbmFnZXIpIHtcbiAgICAgIHRoaXMucmliYm9uTWFuYWdlci51cGRhdGVCdXR0b25TdGF0ZXMoKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3RlckNvbW1hbmRzKCkge1xuICAgIC8vIENyZWF0ZSBsaW5rZWQgbm90ZSBjb21tYW5kXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBDT01NQU5EX0lEUy5DUkVBVEVfTElOS0VEX05PVEUsXG4gICAgICBuYW1lOiAnQ3JlYXRlIExpbmtlZCBOb3RlIGZyb20gU2VsZWN0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFR5cGUgZ3VhcmQgdG8gZW5zdXJlIHdlIGhhdmUgYSBNYXJrZG93blZpZXdcbiAgICAgICAgICAgIGlmICgncHJldmlld01vZGUnIGluIHZpZXcpIHtcbiAgICAgICAgICAgICAgdGhpcy5saW5rTWFuYWdlci5jcmVhdGVMaW5rZWROb3RlKHNlbGVjdGlvbiwgZWRpdG9yLCB2aWV3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKG5ldyBFcnJvcignSW52YWxpZCB2aWV3IHR5cGUnKSwgJ1BsZWFzZSB1c2UgdGhpcyBjb21tYW5kIGluIGEgbWFya2Rvd24gdmlldycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihuZXcgRXJyb3IoJ05vIHRleHQgc2VsZWN0ZWQnKSwgJ1BsZWFzZSBzZWxlY3QgdGV4dCB0byBjcmVhdGUgYSBsaW5rZWQgbm90ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ0ZhaWxlZCB0byBjcmVhdGUgbGlua2VkIG5vdGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVidWlsZCBkaXJlY3Rvcnkgc3RydWN0dXJlIGNvbW1hbmRcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IENPTU1BTkRfSURTLlJFQlVJTERfRElSRUNUT1JZLFxuICAgICAgbmFtZTogJ1JlYnVpbGQgRGlyZWN0b3J5IFN0cnVjdHVyZScsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuZGlyZWN0b3J5TWFuYWdlci5yZWJ1aWxkRGlyZWN0b3J5U3RydWN0dXJlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IsICdGYWlsZWQgdG8gcmVidWlsZCBkaXJlY3Rvcnkgc3RydWN0dXJlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE9wZW4gdG9kYXkncyBqb3VybmFsIGNvbW1hbmRcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IENPTU1BTkRfSURTLk9QRU5fVE9EQVlfSk9VUk5BTCxcbiAgICAgIG5hbWU6ICdPcGVuIFRvZGF5XFwncyBKb3VybmFsJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5qb3VybmFsTWFuYWdlci5vcGVuVG9kYXlKb3VybmFsKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IsICdGYWlsZWQgdG8gb3BlbiB0b2RheVxcJ3Mgam91cm5hbCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdG9kYXkncyBub3RlIGNvbW1hbmRcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IENPTU1BTkRfSURTLkNSRUFURV9UT0RBWV9OT1RFLFxuICAgICAgbmFtZTogJ0NyZWF0ZSBUb2RheVxcJ3MgRGFpbHkgTm90ZScsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmpvdXJuYWxNYW5hZ2VyLmNyZWF0ZVRvZGF5Tm90ZSgpO1xuICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IsICdGYWlsZWQgdG8gY3JlYXRlIHRvZGF5XFwncyBub3RlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBtb250aGx5IGZvbGRlcnMgY29tbWFuZFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogQ09NTUFORF9JRFMuQ1JFQVRFX01PTlRITFlfRk9MREVSUyxcbiAgICAgIG5hbWU6ICdDcmVhdGUgTW9udGhseSBGb2xkZXJzIGZvciBDdXJyZW50IFllYXInLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2UgRGF0ZVNlcnZpY2UgZm9yIGNvbnNpc3RlbnQgZGF0ZSBoYW5kbGluZ1xuICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZZZWFyID0gRGF0ZVNlcnZpY2Uuc3RhcnRPZlllYXIoKTtcbiAgICAgICAgICBjb25zdCBlbmRPZlllYXIgPSBEYXRlU2VydmljZS5lbmRPZlllYXIoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCB0aGlzLmpvdXJuYWxNYW5hZ2VyLmNyZWF0ZU1vbnRobHlGb2xkZXJzRm9yUmFuZ2Uoc3RhcnRPZlllYXIsIGVuZE9mWWVhcik7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuc2hvd05vdGljZSgnTW9udGhseSBmb2xkZXJzIGNyZWF0ZWQgZm9yIGN1cnJlbnQgeWVhcicpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yLCAnRmFpbGVkIHRvIGNyZWF0ZSBtb250aGx5IGZvbGRlcnMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU2hvdyBzaG9ydGNvZGUgaGVscFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Nob3ctc2hvcnRjb2RlLWhlbHAnLFxuICAgICAgbmFtZTogJ1Nob3cgU2hvcnRjb2RlIEhlbHAnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnNob3J0Y29kZU1hbmFnZXIuc2hvd0hlbHBNb2RhbCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yLCAnRmFpbGVkIHRvIHNob3cgc2hvcnRjb2RlIGhlbHAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU2hvdyByaWJib24gcXVpY2sgYWN0aW9ucyAobmV3IGNvbW1hbmQpXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2hvdy1yaWJib24tYWN0aW9ucycsXG4gICAgICBuYW1lOiAnU2hvdyBSaWJib24gUXVpY2sgQWN0aW9ucycsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMucmliYm9uTWFuYWdlci5zaG93UXVpY2tBY3Rpb25zTWVudSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yLCAnRmFpbGVkIHRvIHNob3cgcmliYm9uIGFjdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmVnaXN0ZXJFdmVudEhhbmRsZXJzKCkge1xuICAgIC8vIExpc3RlbiBmb3IgZWRpdG9yIGNoYW5nZXMgdG8gZGV0ZWN0IHNob3J0Y29kZXNcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCAoZWRpdG9yKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3J0Y29kZUVuYWJsZWQpIHtcbiAgICAgICAgICB0aGlzLnNob3J0Y29kZU1hbmFnZXIuY2hlY2tGb3JTaG9ydGNvZGVzKGVkaXRvcik7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcblxuICAgIC8vIExpc3RlbiBmb3IgZmlsZSBjcmVhdGlvbiB0byB1cGRhdGUgam91cm5hbCBsaW5rc1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAvLyBUeXBlIGd1YXJkIHRvIGVuc3VyZSB3ZSBoYXZlIGEgVEZpbGUgKGhhcyBzdGF0LCBiYXNlbmFtZSwgZXh0ZW5zaW9uIHByb3BlcnRpZXMpXG4gICAgICAgIGlmICgnc3RhdCcgaW4gZmlsZSAmJiAnYmFzZW5hbWUnIGluIGZpbGUgJiYgJ2V4dGVuc2lvbicgaW4gZmlsZSAmJiBcbiAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmpvdXJuYWxSb290Rm9sZGVyKSkge1xuICAgICAgICAgIHRoaXMuam91cm5hbE1hbmFnZXIudXBkYXRlSm91cm5hbExpbmtzKGZpbGUgYXMgVEZpbGUpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGZpbGUgbW9kaWZpY2F0aW9uc1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCAoZmlsZSkgPT4ge1xuICAgICAgICAvLyBVcGRhdGUgYmFja2xpbmtzIG9yIHBlcmZvcm0gb3RoZXIgb3BlcmF0aW9uc1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmlsZSBtb2RpZmllZDonLCBmaWxlLnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnTGluayBQbHVnaW4gdW5sb2FkZWQnKTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCByaWJib24gYnV0dG9uc1xuICAgIGlmICh0aGlzLnJpYmJvbk1hbmFnZXIpIHtcbiAgICAgIHRoaXMucmliYm9uTWFuYWdlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVGV4dENvbXBvbmVudCwgRHJvcGRvd25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTGlua1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IFxuICBEaXJlY3RvcnlTZXR0aW5ncywgXG4gIEpvdXJuYWxTZXR0aW5ncywgXG4gIE5vdGVTZXR0aW5ncywgXG4gIFNob3J0Y29kZVNldHRpbmdzLCBcbiAgR2VuZXJhbFNldHRpbmdzLFxuICB2YWxpZGF0ZVNldHRpbmdzV2l0aERldGFpbHMgXG59IGZyb20gJy4uL3NldHRpbmdzJztcbmltcG9ydCB7IERhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZGF0ZVNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBMaW5rUGx1Z2luO1xuICBcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlua1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIC8vIE1haW4gaGVhZGluZ1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ09ic2lkaWFuIExpbmsgUGx1Z2luIFNldHRpbmdzJyB9KTtcbiAgICBcbiAgICAvLyBBZGQgZGVzY3JpcHRpb25cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJyk7XG4gICAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYFxuICAgICAgQ29uZmlndXJlIHlvdXIgTGluayBQbHVnaW4gc2V0dGluZ3MgYmVsb3cuIFNldHRpbmdzIGFyZSBvcmdhbml6ZWQgaW50byBjYXRlZ29yaWVzIGZvciBlYXN5IG1hbmFnZW1lbnQuXG4gICAgICA8YnI+PHN0cm9uZz5UaXA6PC9zdHJvbmc+IEhvdmVyIG92ZXIgc2V0dGluZyBuYW1lcyBmb3IgZGV0YWlsZWQgZGVzY3JpcHRpb25zLlxuICAgIGA7XG4gICAgZGVzY3JpcHRpb24uc3R5bGUubWFyZ2luQm90dG9tID0gJzJlbSc7XG4gICAgZGVzY3JpcHRpb24uc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXG4gICAgLy8gRGlyZWN0b3J5IFNldHRpbmdzIFNlY3Rpb25cbiAgICB0aGlzLmFkZERpcmVjdG9yeVNldHRpbmdzKGNvbnRhaW5lckVsKTtcbiAgICBcbiAgICAvLyBKb3VybmFsIFNldHRpbmdzIFNlY3Rpb25cbiAgICB0aGlzLmFkZEpvdXJuYWxTZXR0aW5ncyhjb250YWluZXJFbCk7XG4gICAgXG4gICAgLy8gTm90ZSBTZXR0aW5ncyBTZWN0aW9uXG4gICAgdGhpcy5hZGROb3RlU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICAgIFxuICAgIC8vIFNob3J0Y29kZSBTZXR0aW5ncyBTZWN0aW9uXG4gICAgdGhpcy5hZGRTaG9ydGNvZGVTZXR0aW5ncyhjb250YWluZXJFbCk7XG4gICAgXG4gICAgLy8gR2VuZXJhbCBTZXR0aW5ncyBTZWN0aW9uXG4gICAgdGhpcy5hZGRHZW5lcmFsU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICAgIFxuICAgIC8vIEFkdmFuY2VkIFNlY3Rpb25cbiAgICB0aGlzLmFkZEFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGREaXJlY3RvcnlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0RcdURDQzEgRGlyZWN0b3J5IFN0cnVjdHVyZScgfSk7XG4gICAgXG4gICAgY29uc3QgZGlyZWN0b3J5RGVzYyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJyk7XG4gICAgZGlyZWN0b3J5RGVzYy50ZXh0Q29udGVudCA9ICdDb25maWd1cmUgaG93IHRoZSBwbHVnaW4gb3JnYW5pemVzIHlvdXIgZmlsZXMgYW5kIGZvbGRlcnMuJztcbiAgICBkaXJlY3RvcnlEZXNjLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICBkaXJlY3RvcnlEZXNjLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuXG4gICAgLy8gQmFzZSBGb2xkZXIgU2V0dGluZ1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0Jhc2UgRm9sZGVyJylcbiAgICAgIC5zZXREZXNjKCdSb290IGZvbGRlciBmb3IgYWxsIHBsdWdpbi1jcmVhdGVkIGRpcmVjdG9yaWVzLiBQcmV2ZW50cyBjb2xsaXNpb24gd2l0aCBleGlzdGluZyB2YXVsdCBzdHJ1Y3R1cmUuJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0xpbmtQbHVnaW4nKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFzZUZvbGRlcilcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmICh2YWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJhc2VGb2xkZXIgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgIC8vIERvY3VtZW50IERpcmVjdG9yeSBTZXR0aW5nXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnV29ya3NwYWNlIERpcmVjdG9yeScpXG4gICAgICAuc2V0RGVzYygnRGlyZWN0b3J5IG5hbWUgZm9yIGdlbmVyYWwgbm90ZXMgYW5kIGRvY3VtZW50cyB3aXRoaW4gdGhlIGJhc2UgZm9sZGVyLicpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd3b3Jrc3BhY2UnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZG9jdW1lbnREaXJlY3RvcnkpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICBpZiAodmFsdWUudHJpbSgpKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kb2N1bWVudERpcmVjdG9yeSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgLy8gSm91cm5hbCBSb290IEZvbGRlciBTZXR0aW5nXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnSm91cm5hbCBEaXJlY3RvcnknKVxuICAgICAgLnNldERlc2MoJ0RpcmVjdG9yeSBuYW1lIGZvciBqb3VybmFsIGVudHJpZXMgd2l0aGluIHRoZSBiYXNlIGZvbGRlci4nKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignam91cm5hbCcpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsUm9vdEZvbGRlcilcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmICh2YWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxSb290Rm9sZGVyID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG5cbiAgICAvLyBSZWJ1aWxkIERpcmVjdG9yeSBTdHJ1Y3R1cmUgQnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnUmVidWlsZCBEaXJlY3RvcnkgU3RydWN0dXJlJylcbiAgICAgIC5zZXREZXNjKCdSZWNyZWF0ZSB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZSBiYXNlZCBvbiBjdXJyZW50IHNldHRpbmdzLicpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoJ1JlYnVpbGQnKVxuICAgICAgICAuc2V0VG9vbHRpcCgnQ2xpY2sgdG8gcmVidWlsZCB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZScpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGlyZWN0b3J5TWFuYWdlci5yZWJ1aWxkRGlyZWN0b3J5U3RydWN0dXJlKCk7XG4gICAgICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgbWVzc2FnZVxuICAgICAgICAgICAgY29uc3Qgbm90aWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBub3RpY2UudGV4dENvbnRlbnQgPSAnXHUyNzA1IERpcmVjdG9yeSBzdHJ1Y3R1cmUgcmVidWlsdCBzdWNjZXNzZnVsbHkhJztcbiAgICAgICAgICAgIG5vdGljZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJztcbiAgICAgICAgICAgIG5vdGljZS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKG5vdGljZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ0ZhaWxlZCB0byByZWJ1aWxkIGRpcmVjdG9yeSBzdHJ1Y3R1cmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkSm91cm5hbFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzRFx1RENDNSBKb3VybmFsIFNldHRpbmdzJyB9KTtcbiAgICBcbiAgICBjb25zdCBqb3VybmFsRGVzYyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJyk7XG4gICAgam91cm5hbERlc2MudGV4dENvbnRlbnQgPSAnQ29uZmlndXJlIGRhdGUgZm9ybWF0cyBhbmQgdGVtcGxhdGVzIGZvciBqb3VybmFsIGVudHJpZXMuJztcbiAgICBqb3VybmFsRGVzYy5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgam91cm5hbERlc2Muc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cbiAgICAvLyBKb3VybmFsIERhdGUgRm9ybWF0IFNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdKb3VybmFsIERhdGUgRm9ybWF0JylcbiAgICAgIC5zZXREZXNjKCdGb3JtYXQgZm9yIGpvdXJuYWwgZW50cnkgZmlsZW5hbWVzLiBVc2VzIG1vbWVudC5qcyBmb3JtYXQgdG9rZW5zIChlLmcuLCBZWVlZLU1NLUREIGRkZGQpLicpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZWVlZLU1NLUREIGRkZGQnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbERhdGVGb3JtYXQpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICBpZiAodmFsdWUudHJpbSgpKSB7XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBmb3JtYXRcbiAgICAgICAgICAgIGlmIChKb3VybmFsU2V0dGluZ3MuaXNWYWxpZERhdGVGb3JtYXQodmFsdWUpKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxEYXRlRm9ybWF0ID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbk1lc3NhZ2UodGV4dC5pbnB1dEVsLCAnXHUyNzA1IFZhbGlkIGZvcm1hdCcsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uTWVzc2FnZSh0ZXh0LmlucHV0RWwsICdcdTI3NEMgSW52YWxpZCBkYXRlIGZvcm1hdCcsICdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgLy8gSm91cm5hbCBGb2xkZXIgRm9ybWF0IFNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdKb3VybmFsIEZvbGRlciBGb3JtYXQnKVxuICAgICAgLnNldERlc2MoJ0Zvcm1hdCBmb3Igb3JnYW5pemluZyBqb3VybmFsIGZvbGRlcnMgYnkgZGF0ZS4nKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignWVlZWS9NTScpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsRm9sZGVyRm9ybWF0KVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgaWYgKHZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlckZvcm1hdCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgLy8gSm91cm5hbCBUZW1wbGF0ZSBTZXR0aW5nXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnSm91cm5hbCBUZW1wbGF0ZScpXG4gICAgICAuc2V0RGVzYygnVGVtcGxhdGUgZm9yIG5ldyBqb3VybmFsIGVudHJpZXMuIFVzZSB7e2RhdGV9fSwge3t0aXRsZX19LCB7e3ByZXZpb3VzfX0sIHt7bmV4dH19IGFzIHBsYWNlaG9sZGVycy4nKVxuICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDg7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLm1pbkhlaWdodCA9ICcxNTBweCc7XG4gICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoYCMge3tkYXRlfX1cblxuIyMgRGFpbHkgTG9nXG5cbiMjIFRhc2tzXG4tIFsgXSBcblxuIyMgTm90ZXNcblxuIyMgUmVmbGVjdGlvblxuXG4tLS1cblByZXZpb3VzOiB7e3ByZXZpb3VzfX1cbk5leHQ6IHt7bmV4dH19YCk7XG4gICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbFRlbXBsYXRlKTtcbiAgICAgICAgdGV4dC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgTW9udGhseSBGb2xkZXJzIEJ1dHRvblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NyZWF0ZSBNb250aGx5IEZvbGRlcnMnKVxuICAgICAgLnNldERlc2MoJ1ByZS1jcmVhdGUgbW9udGhseSBmb2xkZXJzIGZvciB0aGUgY3VycmVudCB5ZWFyLicpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoJ0NyZWF0ZSBGb2xkZXJzJylcbiAgICAgICAgLnNldFRvb2x0aXAoJ0NyZWF0ZSBhbGwgbW9udGhseSBmb2xkZXJzIGZvciB0aGUgY3VycmVudCB5ZWFyJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydE9mWWVhciA9IERhdGVTZXJ2aWNlLnN0YXJ0T2ZZZWFyKCk7XG4gICAgICAgICAgICBjb25zdCBlbmRPZlllYXIgPSBEYXRlU2VydmljZS5lbmRPZlllYXIoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmpvdXJuYWxNYW5hZ2VyLmNyZWF0ZU1vbnRobHlGb2xkZXJzRm9yUmFuZ2Uoc3RhcnRPZlllYXIsIGVuZE9mWWVhcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5vdGljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbm90aWNlLnRleHRDb250ZW50ID0gJ1x1MjcwNSBNb250aGx5IGZvbGRlcnMgY3JlYXRlZCBzdWNjZXNzZnVsbHkhJztcbiAgICAgICAgICAgIG5vdGljZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJztcbiAgICAgICAgICAgIG5vdGljZS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKG5vdGljZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ0ZhaWxlZCB0byBjcmVhdGUgbW9udGhseSBmb2xkZXJzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGFkZE5vdGVTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0RcdURDREQgTm90ZSBDcmVhdGlvbicgfSk7XG4gICAgXG4gICAgY29uc3Qgbm90ZURlc2MgPSBjb250YWluZXJFbC5jcmVhdGVFbCgncCcpO1xuICAgIG5vdGVEZXNjLnRleHRDb250ZW50ID0gJ0NvbmZpZ3VyZSB0ZW1wbGF0ZXMgYW5kIGJlaGF2aW9yIGZvciBuZXcgbm90ZSBjcmVhdGlvbi4nO1xuICAgIG5vdGVEZXNjLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICBub3RlRGVzYy5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMWVtJztcblxuICAgIC8vIE5vdGUgVGVtcGxhdGUgU2V0dGluZ1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ05vdGUgVGVtcGxhdGUnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgdGVtcGxhdGUgZm9yIG5ldyBub3Rlcy4gVXNlIHt7dGl0bGV9fSwge3tkYXRlfX0sIHt7c291cmNlfX0gYXMgcGxhY2Vob2xkZXJzLicpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNjtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluSGVpZ2h0ID0gJzEyMHB4JztcbiAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcihgLS0tXG50aXRsZToge3t0aXRsZX19XG5jcmVhdGVkOiB7e2RhdGV9fVxuc291cmNlOiB7e3NvdXJjZX19XG50YWdzOiBbXVxuLS0tXG5cbiMge3t0aXRsZX19XG5cbmApO1xuICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVUZW1wbGF0ZSk7XG4gICAgICAgIHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgLy8gVmFsaWRhdGUgdGVtcGxhdGVcbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gTm90ZVNldHRpbmdzLnZhbGlkYXRlVGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVUZW1wbGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uTWVzc2FnZSh0ZXh0LmlucHV0RWwsICdcdTI3MDUgVmFsaWQgdGVtcGxhdGUnLCAnc3VjY2VzcycpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uTWVzc2FnZSh0ZXh0LmlucHV0RWwsIGBcdTI3NEMgJHt2YWxpZGF0aW9uLmVycm9ycy5qb2luKCcsICcpfWAsICdlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgfSk7XG5cbiAgICAvLyBPcGVuIE5ldyBOb3RlIFNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdPcGVuIE5ldyBOb3RlcycpXG4gICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBvcGVuIG5ld2x5IGNyZWF0ZWQgbm90ZXMgaW4gdGhlIGVkaXRvci4nKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuTmV3Tm90ZSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5OZXdOb3RlID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU2hvcnRjb2RlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHUyNkExIFNob3J0Y29kZXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IHNob3J0Y29kZURlc2MgPSBjb250YWluZXJFbC5jcmVhdGVFbCgncCcpO1xuICAgIHNob3J0Y29kZURlc2MuaW5uZXJIVE1MID0gYFxuICAgICAgQ29uZmlndXJlIHRoZSBzaG9ydGNvZGUgc3lzdGVtIGZvciByYXBpZCBjb250ZW50IGNyZWF0aW9uLiBcbiAgICAgIDxicj48c21hbGw+RXhhbXBsZTogPGNvZGU+aDIrdWw+bGkqMzwvY29kZT4gY3JlYXRlcyBhIGhlYWRpbmcgd2l0aCBhIDMtaXRlbSBsaXN0Ljwvc21hbGw+XG4gICAgYDtcbiAgICBzaG9ydGNvZGVEZXNjLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICBzaG9ydGNvZGVEZXNjLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuXG4gICAgLy8gU2hvcnRjb2RlIEVuYWJsZWQgU2V0dGluZ1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBTaG9ydGNvZGVzJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgdGhlIHNob3J0Y29kZSBleHBhbnNpb24gc3lzdGVtLicpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3J0Y29kZUVuYWJsZWQpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG9ydGNvZGVFbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcblxuICAgIC8vIFNob3J0Y29kZSBUcmlnZ2VyIEtleSBTZXR0aW5nXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnVHJpZ2dlciBLZXknKVxuICAgICAgLnNldERlc2MoJ0tleSB0byB0cmlnZ2VyIHNob3J0Y29kZSBleHBhbnNpb24uJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAuYWRkT3B0aW9uKCdUYWInLCAnVGFiJylcbiAgICAgICAgLmFkZE9wdGlvbignRW50ZXInLCAnRW50ZXInKVxuICAgICAgICAuYWRkT3B0aW9uKCdTcGFjZScsICdTcGFjZScpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG9ydGNvZGVUcmlnZ2VyS2V5KVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvcnRjb2RlVHJpZ2dlcktleSA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG5cbiAgICAvLyBCdWlsdC1pbiBTaG9ydGNvZGVzIERpc3BsYXlcbiAgICBjb25zdCBidWlsdGluQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgYnVpbHRpbkNvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdCdWlsdC1pbiBTaG9ydGNvZGVzJyB9KTtcbiAgICBcbiAgICBjb25zdCBidWlsdGluU2hvcnRjb2RlcyA9IFNob3J0Y29kZVNldHRpbmdzLmdldEJ1aWx0aW5TaG9ydGNvZGVzKCk7XG4gICAgY29uc3Qgc2hvcnRjb2RlTGlzdCA9IGJ1aWx0aW5Db250YWluZXIuY3JlYXRlRWwoJ3VsJyk7XG4gICAgc2hvcnRjb2RlTGlzdC5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgc2hvcnRjb2RlTGlzdC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgXG4gICAgT2JqZWN0LmVudHJpZXMoYnVpbHRpblNob3J0Y29kZXMpLmZvckVhY2goKFtwYXR0ZXJuLCBkZXNjcmlwdGlvbl0pID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBzaG9ydGNvZGVMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgaXRlbS5pbm5lckhUTUwgPSBgPGNvZGU+JHtwYXR0ZXJufTwvY29kZT4gLSAke2Rlc2NyaXB0aW9ufWA7XG4gICAgfSk7XG5cbiAgICAvLyBDdXN0b20gU2hvcnRjb2RlcyBTZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQ3VzdG9tIFNob3J0Y29kZXMnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdBZGQgeW91ciBvd24gc2hvcnRjb2RlIHBhdHRlcm5zLiBGb3JtYXQ6IHBhdHRlcm4gXHUyMTkyIGV4cGFuc2lvbicsXG4gICAgICBhdHRyOiB7IHN0eWxlOiAnY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBmb250LXNpemU6IDAuOWVtOyBtYXJnaW4tYm90dG9tOiAxZW07JyB9XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgQ3VzdG9tIFNob3J0Y29kZSBCdXR0b25cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBZGQgQ3VzdG9tIFNob3J0Y29kZScpXG4gICAgICAuc2V0RGVzYygnQ3JlYXRlIGEgbmV3IGN1c3RvbSBzaG9ydGNvZGUgcGF0dGVybi4nKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KCdBZGQgU2hvcnRjb2RlJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2hvd0N1c3RvbVNob3J0Y29kZURpYWxvZygpO1xuICAgICAgICB9KSk7XG5cbiAgICAvLyBEaXNwbGF5IGV4aXN0aW5nIGN1c3RvbSBzaG9ydGNvZGVzXG4gICAgdGhpcy5kaXNwbGF5Q3VzdG9tU2hvcnRjb2Rlcyhjb250YWluZXJFbCk7XG4gIH1cblxuICBwcml2YXRlIGFkZEdlbmVyYWxTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTI2OTlcdUZFMEYgR2VuZXJhbCBTZXR0aW5ncycgfSk7XG4gICAgXG4gICAgY29uc3QgZ2VuZXJhbERlc2MgPSBjb250YWluZXJFbC5jcmVhdGVFbCgncCcpO1xuICAgIGdlbmVyYWxEZXNjLnRleHRDb250ZW50ID0gJ0dlbmVyYWwgcGx1Z2luIGNvbmZpZ3VyYXRpb24gYW5kIGRlYnVnZ2luZyBvcHRpb25zLic7XG4gICAgZ2VuZXJhbERlc2Muc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgIGdlbmVyYWxEZXNjLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuXG4gICAgLy8gRGVidWcgTW9kZSBTZXR0aW5nXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRldGFpbGVkIGxvZ2dpbmcgZm9yIHRyb3VibGVzaG9vdGluZy4gQ2hlY2sgdGhlIGRldmVsb3BlciBjb25zb2xlIGZvciBkZWJ1ZyBtZXNzYWdlcy4nKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUgPSB2YWx1ZTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGlua1BsdWdpbl0gRGVidWcgbW9kZSBlbmFibGVkJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0xpbmtQbHVnaW5dIEN1cnJlbnQgc2V0dGluZ3M6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tMaW5rUGx1Z2luXSBEYXRlU2VydmljZSBpbmZvOicsIERhdGVTZXJ2aWNlLmdldERlYnVnSW5mbygpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0RcdUREMjcgQWR2YW5jZWQnIH0pO1xuICAgIFxuICAgIGNvbnN0IGFkdmFuY2VkRGVzYyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJyk7XG4gICAgYWR2YW5jZWREZXNjLnRleHRDb250ZW50ID0gJ0FkdmFuY2VkIHNldHRpbmdzIGFuZCBtYWludGVuYW5jZSB0b29scy4nO1xuICAgIGFkdmFuY2VkRGVzYy5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgYWR2YW5jZWREZXNjLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuXG4gICAgLy8gVmFsaWRhdGUgU2V0dGluZ3MgQnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnVmFsaWRhdGUgU2V0dGluZ3MnKVxuICAgICAgLnNldERlc2MoJ0NoZWNrIGN1cnJlbnQgc2V0dGluZ3MgZm9yIGFueSBpc3N1ZXMgb3IgY29uZmxpY3RzLicpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoJ1ZhbGlkYXRlJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZVNldHRpbmdzV2l0aERldGFpbHModGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3VsdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgcmVzdWx0RWwuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuICAgICAgICAgIHJlc3VsdEVsLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgICAgICAgcmVzdWx0RWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgICAgcmVzdWx0RWwuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJlc3VsdEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpJztcbiAgICAgICAgICAgIHJlc3VsdEVsLmlubmVySFRNTCA9ICc8c3Ryb25nPlx1MjcwNSBBbGwgc2V0dGluZ3MgYXJlIHZhbGlkITwvc3Ryb25nPic7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKSc7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9ICc8c3Ryb25nPlx1Mjc0QyBTZXR0aW5ncyB2YWxpZGF0aW9uIGZhaWxlZDo8L3N0cm9uZz48dWw+JztcbiAgICAgICAgICAgIHZhbGlkYXRpb24uZXJyb3JzLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBjb250ZW50ICs9IGA8bGk+JHtlcnJvcn08L2xpPmA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJzwvdWw+JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24ud2FybmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb250ZW50ICs9ICc8c3Ryb25nPlx1MjZBMFx1RkUwRiBXYXJuaW5nczo8L3N0cm9uZz48dWw+JztcbiAgICAgICAgICAgICAgdmFsaWRhdGlvbi53YXJuaW5ncy5mb3JFYWNoKHdhcm5pbmcgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYDxsaT4ke3dhcm5pbmd9PC9saT5gO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29udGVudCArPSAnPC91bD4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0RWwuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVtb3ZlIGFueSBleGlzdGluZyB2YWxpZGF0aW9uIHJlc3VsdHNcbiAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGJ1dHRvbi5idXR0b25FbC5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCcudmFsaWRhdGlvbi1yZXN1bHQnKTtcbiAgICAgICAgICBpZiAoZXhpc3RpbmcpIGV4aXN0aW5nLnJlbW92ZSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJlc3VsdEVsLmNsYXNzTGlzdC5hZGQoJ3ZhbGlkYXRpb24tcmVzdWx0Jyk7XG4gICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKHJlc3VsdEVsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc3VsdEVsLnJlbW92ZSgpLCAxMDAwMCk7XG4gICAgICAgIH0pKTtcblxuICAgIC8vIFJlc2V0IFNldHRpbmdzIEJ1dHRvblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1Jlc2V0IHRvIERlZmF1bHRzJylcbiAgICAgIC5zZXREZXNjKCdcdTI2QTBcdUZFMEYgUmVzZXQgYWxsIHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHQgdmFsdWVzLiBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuJylcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dCgnUmVzZXQnKVxuICAgICAgICAuc2V0V2FybmluZygpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzZXQgYWxsIHNldHRpbmdzIHRvIGRlZmF1bHRzPyBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuJyk7XG4gICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgLy8gSW1wb3J0IGRlZmF1bHQgc2V0dGluZ3NcbiAgICAgICAgICAgIGNvbnN0IHsgREVGQVVMVF9TRVRUSU5HUyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zZXR0aW5ncycpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyBkaXNwbGF5XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgbm90aWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBub3RpY2UudGV4dENvbnRlbnQgPSAnXHUyNzA1IFNldHRpbmdzIHJlc2V0IHRvIGRlZmF1bHRzIHN1Y2Nlc3NmdWxseSEnO1xuICAgICAgICAgICAgbm90aWNlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtc3VjY2VzcyknO1xuICAgICAgICAgICAgbm90aWNlLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgICAgICAgICBub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKG5vdGljZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG5cbiAgICAvLyBFeHBvcnQvSW1wb3J0IFNldHRpbmdzXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRXhwb3J0IFNldHRpbmdzJylcbiAgICAgIC5zZXREZXNjKCdFeHBvcnQgY3VycmVudCBzZXR0aW5ncyBhcyBKU09OIGZvciBiYWNrdXAgb3Igc2hhcmluZy4nKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KCdFeHBvcnQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2V0dGluZ3NKc29uID0gSlNPTi5zdHJpbmdpZnkodGhpcy5wbHVnaW4uc2V0dGluZ3MsIG51bGwsIDIpO1xuICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHNldHRpbmdzSnNvbikudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3RpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG5vdGljZS50ZXh0Q29udGVudCA9ICdcdTI3MDUgU2V0dGluZ3MgY29waWVkIHRvIGNsaXBib2FyZCEnO1xuICAgICAgICAgICAgbm90aWNlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtc3VjY2VzcyknO1xuICAgICAgICAgICAgbm90aWNlLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgICAgICAgICBub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKG5vdGljZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1ZhbGlkYXRpb25NZXNzYWdlKGlucHV0RWw6IEhUTUxFbGVtZW50LCBtZXNzYWdlOiBzdHJpbmcsIHR5cGU6ICdzdWNjZXNzJyB8ICdlcnJvcicpOiB2b2lkIHtcbiAgICAvLyBSZW1vdmUgYW55IGV4aXN0aW5nIHZhbGlkYXRpb24gbWVzc2FnZVxuICAgIGNvbnN0IGV4aXN0aW5nID0gaW5wdXRFbC5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCcudmFsaWRhdGlvbi1tZXNzYWdlJyk7XG4gICAgaWYgKGV4aXN0aW5nKSBleGlzdGluZy5yZW1vdmUoKTtcbiAgICBcbiAgICBjb25zdCBtZXNzYWdlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCgndmFsaWRhdGlvbi1tZXNzYWdlJyk7XG4gICAgbWVzc2FnZUVsLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICBtZXNzYWdlRWwuc3R5bGUuZm9udFNpemUgPSAnMC44ZW0nO1xuICAgIG1lc3NhZ2VFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnNHB4JztcbiAgICBtZXNzYWdlRWwuc3R5bGUuY29sb3IgPSB0eXBlID09PSAnc3VjY2VzcycgPyAndmFyKC0tdGV4dC1zdWNjZXNzKScgOiAndmFyKC0tdGV4dC1lcnJvciknO1xuICAgIFxuICAgIGlucHV0RWwucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQobWVzc2FnZUVsKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IG1lc3NhZ2VFbC5yZW1vdmUoKSwgMzAwMCk7XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlDdXN0b21TaG9ydGNvZGVzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbVNob3J0Y29kZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21TaG9ydGNvZGVzO1xuICAgIFxuICAgIGlmIChPYmplY3Qua2V5cyhjdXN0b21TaG9ydGNvZGVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGVtcHR5RWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgncCcpO1xuICAgICAgZW1wdHlFbC50ZXh0Q29udGVudCA9ICdObyBjdXN0b20gc2hvcnRjb2RlcyBkZWZpbmVkLic7XG4gICAgICBlbXB0eUVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgIGVtcHR5RWwuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgT2JqZWN0LmVudHJpZXMoY3VzdG9tU2hvcnRjb2RlcykuZm9yRWFjaCgoW3BhdHRlcm4sIGV4cGFuc2lvbl0pID0+IHtcbiAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShwYXR0ZXJuKVxuICAgICAgICAuc2V0RGVzYyhleHBhbnNpb24ubGVuZ3RoID4gNTAgPyBleHBhbnNpb24uc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nIDogZXhwYW5zaW9uKVxuICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnRGVsZXRlJylcbiAgICAgICAgICAuc2V0VG9vbHRpcCgnRGVsZXRlIHRoaXMgY3VzdG9tIHNob3J0Y29kZScpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVNob3J0Y29kZXNbcGF0dGVybl07XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRoZSBkaXNwbGF5XG4gICAgICAgICAgfSkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93Q3VzdG9tU2hvcnRjb2RlRGlhbG9nKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwO1xuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjUpOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgei1pbmRleDogMTAwMDtcbiAgICBgO1xuICAgIFxuICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpYWxvZy5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXgtd2lkdGg6IDUwMHB4OyB3aWR0aDogOTAlO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGA7XG4gICAgXG4gICAgZGlhbG9nLmlubmVySFRNTCA9IGBcbiAgICAgIDxoMz5BZGQgQ3VzdG9tIFNob3J0Y29kZTwvaDM+XG4gICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luOiAxNXB4IDA7XCI+XG4gICAgICAgIDxsYWJlbD5QYXR0ZXJuOjwvbGFiZWw+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwic2hvcnRjb2RlLXBhdHRlcm5cIiBwbGFjZWhvbGRlcj1cImUuZy4sIG15bGlzdFwiIHN0eWxlPVwid2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDVweDsgcGFkZGluZzogOHB4O1wiPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luOiAxNXB4IDA7XCI+XG4gICAgICAgIDxsYWJlbD5FeHBhbnNpb246PC9sYWJlbD5cbiAgICAgICAgPHRleHRhcmVhIGlkPVwic2hvcnRjb2RlLWV4cGFuc2lvblwiIHBsYWNlaG9sZGVyPVwiZS5nLiwgLSBbIF0gSXRlbSAxJiMxMDstIFsgXSBJdGVtIDJcIiBzdHlsZT1cIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMHB4OyBtYXJnaW4tdG9wOiA1cHg7IHBhZGRpbmc6IDhweDtcIj48L3RleHRhcmVhPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiAyMHB4O1wiPlxuICAgICAgICA8YnV0dG9uIGlkPVwiY2FuY2VsLWJ0blwiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGlkPVwic2F2ZS1idG5cIiBzdHlsZT1cImJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XCI+U2F2ZTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICBcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChkaWFsb2cpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIFxuICAgIGNvbnN0IHBhdHRlcm5JbnB1dCA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcjc2hvcnRjb2RlLXBhdHRlcm4nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGV4cGFuc2lvbklucHV0ID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNzaG9ydGNvZGUtZXhwYW5zaW9uJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkaWFsb2cucXVlcnlTZWxlY3RvcignI2NhbmNlbC1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCBzYXZlQnRuID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNzYXZlLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIFxuICAgIGNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICBcbiAgICBjYW5jZWxCdG4ub25jbGljayA9IGNsb3NlTW9kYWw7XG4gICAgbW9kYWwub25jbGljayA9IChlKSA9PiBlLnRhcmdldCA9PT0gbW9kYWwgJiYgY2xvc2VNb2RhbCgpO1xuICAgIFxuICAgIHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhdHRlcm4gPSBwYXR0ZXJuSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgZXhwYW5zaW9uID0gZXhwYW5zaW9uSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgXG4gICAgICBpZiAoIXBhdHRlcm4gfHwgIWV4cGFuc2lvbikge1xuICAgICAgICBhbGVydCgnQm90aCBwYXR0ZXJuIGFuZCBleHBhbnNpb24gYXJlIHJlcXVpcmVkLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghU2hvcnRjb2RlU2V0dGluZ3MuaXNWYWxpZFNob3J0Y29kZVBhdHRlcm4ocGF0dGVybikpIHtcbiAgICAgICAgYWxlcnQoJ0ludmFsaWQgc2hvcnRjb2RlIHBhdHRlcm4uIFVzZSBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgc2hvcnRjb2RlIG9wZXJhdG9ycyAoKywgPiwgKiwge30sIFtdLCAoKSkuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tU2hvcnRjb2Rlc1twYXR0ZXJuXSA9IGV4cGFuc2lvbjtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgdGhpcy5kaXNwbGF5KCk7IC8vIFJlZnJlc2ggdGhlIGRpc3BsYXlcbiAgICB9O1xuICAgIFxuICAgIHBhdHRlcm5JbnB1dC5mb2N1cygpO1xuICB9XG59XG4iLCAiLyoqXHJcbiAqIERhdGVTZXJ2aWNlIC0gQ2VudHJhbGl6ZWQgZGF0ZSBoYW5kbGluZyBmb3IgdGhlIE9ic2lkaWFuIExpbmsgUGx1Z2luXHJcbiAqIFxyXG4gKiBUaGlzIHNlcnZpY2UgZW5jYXBzdWxhdGVzIGFsbCBtb21lbnQuanMgdXNhZ2UgYW5kIHByb3ZpZGVzIGEgY2xlYW4sIHR5cGUtc2FmZSBBUEkuXHJcbiAqIEl0IGhhbmRsZXMgdGhlIFR5cGVTY3JpcHQgaXNzdWVzIHdpdGggT2JzaWRpYW4ncyBtb21lbnQuanMgaW1wbGVtZW50YXRpb24gYnlcclxuICogdXNpbmcgcHJvcGVyIHR5cGUgYXNzZXJ0aW9ucyBhbmQgcHJvdmlkaW5nIGNvbnNpc3RlbnQgZGF0ZSBvcGVyYXRpb25zLlxyXG4gKi9cclxuXHJcbi8vIFR5cGUgZGVmaW5pdGlvbiBmb3IgT2JzaWRpYW4ncyBtb21lbnQgaW5zdGFuY2VcclxudHlwZSBPYnNpZGlhbk1vbWVudCA9IHtcclxuICAoKTogYW55O1xyXG4gIChpbnB1dD86IGFueSk6IGFueTtcclxuICAoaW5wdXQ/OiBhbnksIGZvcm1hdD86IHN0cmluZyk6IGFueTtcclxuICAoaW5wdXQ/OiBhbnksIGZvcm1hdD86IHN0cmluZywgc3RyaWN0PzogYm9vbGVhbik6IGFueTtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRlU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgbW9tZW50OiBPYnNpZGlhbk1vbWVudDtcclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSB0aGUgZGF0ZSBzZXJ2aWNlIHdpdGggT2JzaWRpYW4ncyBtb21lbnQgaW5zdGFuY2VcclxuICAgKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgb25jZSB3aGVuIHRoZSBwbHVnaW4gbG9hZHNcclxuICAgKi9cclxuICBzdGF0aWMgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgIC8vIEdldCBtb21lbnQgZnJvbSBPYnNpZGlhbidzIGdsb2JhbCBzY29wZVxyXG4gICAgdGhpcy5tb21lbnQgPSAod2luZG93IGFzIGFueSkubW9tZW50O1xyXG4gICAgXHJcbiAgICBpZiAoIXRoaXMubW9tZW50KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignT2JzaWRpYW4gbW9tZW50LmpzIG5vdCBhdmFpbGFibGUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjdXJyZW50IGRhdGUvdGltZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBub3coKTogYW55IHtcclxuICAgIHJldHVybiB0aGlzLm1vbWVudCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIG1vbWVudCBmcm9tIGRhdGUgaW5wdXRcclxuICAgKi9cclxuICBzdGF0aWMgZnJvbShpbnB1dD86IERhdGUgfCBzdHJpbmcgfCBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9tZW50KGlucHV0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBtb21lbnQgZnJvbSBkYXRlIHN0cmluZyB3aXRoIGZvcm1hdFxyXG4gICAqL1xyXG4gIHN0YXRpYyBmcm9tRm9ybWF0KGlucHV0OiBzdHJpbmcsIGZvcm1hdDogc3RyaW5nLCBzdHJpY3Q6IGJvb2xlYW4gPSB0cnVlKTogYW55IHtcclxuICAgIHJldHVybiB0aGlzLm1vbWVudChpbnB1dCwgZm9ybWF0LCBzdHJpY3QpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0IGEgZGF0ZSB1c2luZyB0aGUgc3BlY2lmaWVkIGZvcm1hdFxyXG4gICAqL1xyXG4gIHN0YXRpYyBmb3JtYXQoZGF0ZTogRGF0ZSB8IHN0cmluZyB8IGFueSwgZm9ybWF0OiBzdHJpbmcgPSAnWVlZWS1NTS1ERCcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbW9tZW50RGF0ZSA9IGRhdGUgPyB0aGlzLm1vbWVudChkYXRlKSA6IHRoaXMubW9tZW50KCk7XHJcbiAgICByZXR1cm4gbW9tZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0b2RheSdzIGRhdGUgZm9ybWF0dGVkXHJcbiAgICovXHJcbiAgc3RhdGljIHRvZGF5KGZvcm1hdDogc3RyaW5nID0gJ1lZWVktTU0tREQnKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLm1vbWVudCgpLmZvcm1hdChmb3JtYXQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGN1cnJlbnQgeWVhclxyXG4gICAqL1xyXG4gIHN0YXRpYyBjdXJyZW50WWVhcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMubW9tZW50KCkuZm9ybWF0KCdZWVlZJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY3VycmVudCBtb250aCBuYW1lXHJcbiAgICovXHJcbiAgc3RhdGljIGN1cnJlbnRNb250aCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMubW9tZW50KCkuZm9ybWF0KCdNTU1NJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgc3RhcnQgb2YgeWVhciBmb3IgZ2l2ZW4gZGF0ZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBzdGFydE9mWWVhcihkYXRlPzogRGF0ZSB8IHN0cmluZyB8IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4gKGRhdGUgPyB0aGlzLm1vbWVudChkYXRlKSA6IHRoaXMubW9tZW50KCkpLnN0YXJ0T2YoJ3llYXInKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuZCBvZiB5ZWFyIGZvciBnaXZlbiBkYXRlXHJcbiAgICovXHJcbiAgc3RhdGljIGVuZE9mWWVhcihkYXRlPzogRGF0ZSB8IHN0cmluZyB8IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4gKGRhdGUgPyB0aGlzLm1vbWVudChkYXRlKSA6IHRoaXMubW9tZW50KCkpLmVuZE9mKCd5ZWFyJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGFydCBvZiBtb250aCBmb3IgZ2l2ZW4gZGF0ZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBzdGFydE9mTW9udGgoZGF0ZT86IERhdGUgfCBzdHJpbmcgfCBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIChkYXRlID8gdGhpcy5tb21lbnQoZGF0ZSkgOiB0aGlzLm1vbWVudCgpKS5zdGFydE9mKCdtb250aCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRW5kIG9mIG1vbnRoIGZvciBnaXZlbiBkYXRlXHJcbiAgICovXHJcbiAgc3RhdGljIGVuZE9mTW9udGgoZGF0ZT86IERhdGUgfCBzdHJpbmcgfCBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIChkYXRlID8gdGhpcy5tb21lbnQoZGF0ZSkgOiB0aGlzLm1vbWVudCgpKS5lbmRPZignbW9udGgnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCB0aW1lIHRvIGEgZGF0ZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBhZGQoZGF0ZTogRGF0ZSB8IHN0cmluZyB8IGFueSwgYW1vdW50OiBudW1iZXIsIHVuaXQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5tb21lbnQoZGF0ZSkuYWRkKGFtb3VudCwgdW5pdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdWJ0cmFjdCB0aW1lIGZyb20gYSBkYXRlXHJcbiAgICovXHJcbiAgc3RhdGljIHN1YnRyYWN0KGRhdGU6IERhdGUgfCBzdHJpbmcgfCBhbnksIGFtb3VudDogbnVtYmVyLCB1bml0OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9tZW50KGRhdGUpLnN1YnRyYWN0KGFtb3VudCwgdW5pdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBkYXRlIGlzIHZhbGlkXHJcbiAgICovXHJcbiAgc3RhdGljIGlzVmFsaWQoZGF0ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5tb21lbnQoZGF0ZSkuaXNWYWxpZCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgZGF0ZSBpcyBzYW1lIG9yIGJlZm9yZSBhbm90aGVyIGRhdGVcclxuICAgKi9cclxuICBzdGF0aWMgaXNTYW1lT3JCZWZvcmUoZGF0ZTE6IGFueSwgZGF0ZTI6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMubW9tZW50KGRhdGUxKS5pc1NhbWVPckJlZm9yZShkYXRlMik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRyYWN0IGRhdGUgZnJvbSBmaWxlbmFtZSB1c2luZyBmb3JtYXRcclxuICAgKi9cclxuICBzdGF0aWMgZXh0cmFjdERhdGVGcm9tRmlsZW5hbWUoZmlsZW5hbWU6IHN0cmluZywgZm9ybWF0OiBzdHJpbmcpOiBhbnkgfCBudWxsIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLm1vbWVudChmaWxlbmFtZSwgZm9ybWF0LCB0cnVlKTtcclxuICAgICAgcmV0dXJuIGRhdGUuaXNWYWxpZCgpID8gZGF0ZSA6IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBqb3VybmFsIHBhdGggY29tcG9uZW50cyBmb3IgYSBkYXRlXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEpvdXJuYWxQYXRoQ29tcG9uZW50cyhkYXRlPzogRGF0ZSB8IHN0cmluZyB8IGFueSk6IHtcclxuICAgIHllYXI6IHN0cmluZztcclxuICAgIG1vbnRoTmFtZTogc3RyaW5nO1xyXG4gICAgeWVhckZvbGRlcjogc3RyaW5nO1xyXG4gICAgbW9udGhGb2xkZXI6IHN0cmluZztcclxuICB9IHtcclxuICAgIGNvbnN0IG1vbWVudERhdGUgPSBkYXRlID8gdGhpcy5tb21lbnQoZGF0ZSkgOiB0aGlzLm1vbWVudCgpO1xyXG4gICAgY29uc3QgeWVhciA9IG1vbWVudERhdGUuZm9ybWF0KCdZWVlZJyk7XHJcbiAgICBjb25zdCBtb250aE5hbWUgPSBtb21lbnREYXRlLmZvcm1hdCgnTU1NTScpO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB5ZWFyLFxyXG4gICAgICBtb250aE5hbWUsXHJcbiAgICAgIHllYXJGb2xkZXI6IGB5XyR7eWVhcn1gLFxyXG4gICAgICBtb250aEZvbGRlcjogbW9udGhOYW1lXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGZvcm1hdHRlZCBmaWxlbmFtZSBmb3Igam91cm5hbCBlbnRyeVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRKb3VybmFsRmlsZW5hbWUoZGF0ZT86IERhdGUgfCBzdHJpbmcgfCBhbnksIGZvcm1hdDogc3RyaW5nID0gJ1lZWVktTU0tREQgZGRkZCcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbW9tZW50RGF0ZSA9IGRhdGUgPyB0aGlzLm1vbWVudChkYXRlKSA6IHRoaXMubW9tZW50KCk7XHJcbiAgICByZXR1cm4gbW9tZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBwcmV2aW91cyBkYXlcclxuICAgKi9cclxuICBzdGF0aWMgcHJldmlvdXNEYXkoZGF0ZT86IERhdGUgfCBzdHJpbmcgfCBhbnkpOiBhbnkge1xyXG4gICAgY29uc3QgbW9tZW50RGF0ZSA9IGRhdGUgPyB0aGlzLm1vbWVudChkYXRlKSA6IHRoaXMubW9tZW50KCk7XHJcbiAgICByZXR1cm4gbW9tZW50RGF0ZS5zdWJ0cmFjdCgxLCAnZGF5Jyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgbmV4dCBkYXlcclxuICAgKi9cclxuICBzdGF0aWMgbmV4dERheShkYXRlPzogRGF0ZSB8IHN0cmluZyB8IGFueSk6IGFueSB7XHJcbiAgICBjb25zdCBtb21lbnREYXRlID0gZGF0ZSA/IHRoaXMubW9tZW50KGRhdGUpIDogdGhpcy5tb21lbnQoKTtcclxuICAgIHJldHVybiBtb21lbnREYXRlLmFkZCgxLCAnZGF5Jyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgZGF0ZSByYW5nZSBpdGVyYXRvclxyXG4gICAqL1xyXG4gIHN0YXRpYyAqZGF0ZVJhbmdlKHN0YXJ0RGF0ZTogYW55LCBlbmREYXRlOiBhbnksIHVuaXQ6IHN0cmluZyA9ICdkYXknKTogR2VuZXJhdG9yPGFueT4ge1xyXG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMubW9tZW50KHN0YXJ0RGF0ZSk7XHJcbiAgICBjb25zdCBlbmQgPSB0aGlzLm1vbWVudChlbmREYXRlKTtcclxuICAgIFxyXG4gICAgd2hpbGUgKGN1cnJlbnQuaXNTYW1lT3JCZWZvcmUoZW5kKSkge1xyXG4gICAgICB5aWVsZCB0aGlzLm1vbWVudChjdXJyZW50KTtcclxuICAgICAgY3VycmVudC5hZGQoMSwgdW5pdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgbW9udGhseSBmb2xkZXIgcGF0aCBmb3IgYSBkYXRlXHJcbiAgICovXHJcbiAgc3RhdGljIGdldE1vbnRobHlGb2xkZXJQYXRoKGJhc2VQYXRoOiBzdHJpbmcsIGRhdGU/OiBEYXRlIHwgc3RyaW5nIHwgYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0aGlzLmdldEpvdXJuYWxQYXRoQ29tcG9uZW50cyhkYXRlKTtcclxuICAgIHJldHVybiBgJHtiYXNlUGF0aH0vJHtjb21wb25lbnRzLnllYXJGb2xkZXJ9LyR7Y29tcG9uZW50cy5tb250aEZvbGRlcn1gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGZ1bGwgam91cm5hbCBmaWxlIHBhdGhcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0Sm91cm5hbEZpbGVQYXRoKFxyXG4gICAgYmFzZVBhdGg6IHN0cmluZywgXHJcbiAgICBkYXRlPzogRGF0ZSB8IHN0cmluZyB8IGFueSwgXHJcbiAgICBmb3JtYXQ6IHN0cmluZyA9ICdZWVlZLU1NLUREIGRkZGQnXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IG1vbnRobHlQYXRoID0gdGhpcy5nZXRNb250aGx5Rm9sZGVyUGF0aChiYXNlUGF0aCwgZGF0ZSk7XHJcbiAgICBjb25zdCBmaWxlbmFtZSA9IHRoaXMuZ2V0Sm91cm5hbEZpbGVuYW1lKGRhdGUsIGZvcm1hdCk7XHJcbiAgICByZXR1cm4gYCR7bW9udGhseVBhdGh9LyR7ZmlsZW5hbWV9Lm1kYDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZhbGlkYXRlIGRhdGUgZm9ybWF0IHN0cmluZ1xyXG4gICAqL1xyXG4gIHN0YXRpYyBpc1ZhbGlkRm9ybWF0KGZvcm1hdDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB0ZXN0RGF0ZSA9IHRoaXMubW9tZW50KCk7XHJcbiAgICAgIHRlc3REYXRlLmZvcm1hdChmb3JtYXQpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZGVidWcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vbWVudCBpbnN0YW5jZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXREZWJ1Z0luZm8oKTogeyBhdmFpbGFibGU6IGJvb2xlYW47IHZlcnNpb24/OiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGF2YWlsYWJsZTogISF0aGlzLm1vbWVudCxcclxuICAgICAgdmVyc2lvbjogKHRoaXMubW9tZW50IGFzIGFueSk/LnZlcnNpb24gfHwgJ3Vua25vd24nLFxyXG4gICAgICB0eXBlOiB0eXBlb2YgdGhpcy5tb21lbnRcclxuICAgIH07XHJcbiAgfVxyXG59ICIsICJpbXBvcnQgeyBOb3RpY2UsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IExpbmtQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IFJJQkJPTl9CVVRUT05TIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgRGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9kYXRlU2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUmliYm9uTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBwbHVnaW46IExpbmtQbHVnaW47XHJcbiAgcHJpdmF0ZSByaWJib25CdXR0b25zOiBIVE1MRWxlbWVudFtdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTGlua1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIGFsbCByaWJib24gYnV0dG9uc1xyXG4gICAqL1xyXG4gIGluaXRpYWxpemVSaWJib24oKTogdm9pZCB7XHJcbiAgICB0aGlzLmFkZFRvZGF5Sm91cm5hbEJ1dHRvbigpO1xyXG4gICAgdGhpcy5hZGRDcmVhdGVOb3RlQnV0dG9uKCk7XHJcbiAgICB0aGlzLmFkZE1vbnRobHlGb2xkZXJzQnV0dG9uKCk7XHJcbiAgICB0aGlzLmFkZFNob3J0Y29kZUhlbHBCdXR0b24oKTtcclxuICAgIHRoaXMuYWRkUmVidWlsZFN0cnVjdHVyZUJ1dHRvbigpO1xyXG4gICAgdGhpcy5hZGRTZXR0aW5nc0J1dHRvbigpO1xyXG5cclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tMaW5rUGx1Z2luXSBSaWJib24gaW5pdGlhbGl6ZWQgd2l0aCcsIHRoaXMucmliYm9uQnV0dG9ucy5sZW5ndGgsICdidXR0b25zJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbiB1cCByaWJib24gYnV0dG9ucyBvbiBwbHVnaW4gdW5sb2FkXHJcbiAgICovXHJcbiAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgIHRoaXMucmliYm9uQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XHJcbiAgICAgIGJ1dHRvbi5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yaWJib25CdXR0b25zID0gW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgVG9kYXkncyBKb3VybmFsIGJ1dHRvblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWRkVG9kYXlKb3VybmFsQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5wbHVnaW4uYWRkUmliYm9uSWNvbihcclxuICAgICAgUklCQk9OX0JVVFRPTlMuVE9EQVlfSk9VUk5BTC5pY29uLFxyXG4gICAgICBSSUJCT05fQlVUVE9OUy5UT0RBWV9KT1VSTkFMLnRvb2x0aXAsXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uam91cm5hbE1hbmFnZXIub3BlblRvZGF5Sm91cm5hbCgpO1xyXG4gICAgICAgICAgdGhpcy5zaG93U3VjY2VzcygnVG9kYXlcXCdzIGpvdXJuYWwgb3BlbmVkJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ0ZhaWxlZCB0byBvcGVuIHRvZGF5XFwncyBqb3VybmFsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5yaWJib25CdXR0b25zLnB1c2goYnV0dG9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBDcmVhdGUgTGlua2VkIE5vdGUgYnV0dG9uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRDcmVhdGVOb3RlQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5wbHVnaW4uYWRkUmliYm9uSWNvbihcclxuICAgICAgUklCQk9OX0JVVFRPTlMuQ1JFQVRFX05PVEUuaWNvbixcclxuICAgICAgUklCQk9OX0JVVFRPTlMuQ1JFQVRFX05PVEUudG9vbHRpcCxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBHZXQgdGhlIGFjdGl2ZSBtYXJrZG93biB2aWV3XHJcbiAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICghYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugb3BlbiBhIG1hcmtkb3duIG5vdGUgZmlyc3QnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG4gICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xyXG5cclxuICAgICAgICAgIGlmICghc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgdGV4dCB0byBjcmVhdGUgYSBsaW5rZWQgbm90ZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5wbHVnaW4ubGlua01hbmFnZXIuY3JlYXRlTGlua2VkTm90ZShzZWxlY3Rpb24sIGVkaXRvciwgYWN0aXZlVmlldyk7XHJcbiAgICAgICAgICB0aGlzLnNob3dTdWNjZXNzKCdMaW5rZWQgbm90ZSBjcmVhdGVkJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ0ZhaWxlZCB0byBjcmVhdGUgbGlua2VkIG5vdGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLnJpYmJvbkJ1dHRvbnMucHVzaChidXR0b24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIE1vbnRobHkgRm9sZGVycyBidXR0b25cclxuICAgKi9cclxuICBwcml2YXRlIGFkZE1vbnRobHlGb2xkZXJzQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5wbHVnaW4uYWRkUmliYm9uSWNvbihcclxuICAgICAgUklCQk9OX0JVVFRPTlMuTU9OVEhMWV9GT0xERVJTLmljb24sXHJcbiAgICAgIFJJQkJPTl9CVVRUT05TLk1PTlRITFlfRk9MREVSUy50b29sdGlwLFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZZZWFyID0gRGF0ZVNlcnZpY2Uuc3RhcnRPZlllYXIoKTtcclxuICAgICAgICAgIGNvbnN0IGVuZE9mWWVhciA9IERhdGVTZXJ2aWNlLmVuZE9mWWVhcigpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5qb3VybmFsTWFuYWdlci5jcmVhdGVNb250aGx5Rm9sZGVyc0ZvclJhbmdlKHN0YXJ0T2ZZZWFyLCBlbmRPZlllYXIpO1xyXG4gICAgICAgICAgdGhpcy5zaG93U3VjY2VzcygnTW9udGhseSBmb2xkZXJzIGNyZWF0ZWQgZm9yIGN1cnJlbnQgeWVhcicpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IsICdGYWlsZWQgdG8gY3JlYXRlIG1vbnRobHkgZm9sZGVycycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHRoaXMucmliYm9uQnV0dG9ucy5wdXNoKGJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgU2hvcnRjb2RlIEhlbHAgYnV0dG9uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRTaG9ydGNvZGVIZWxwQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5wbHVnaW4uYWRkUmliYm9uSWNvbihcclxuICAgICAgUklCQk9OX0JVVFRPTlMuU0hPUlRDT0RFX0hFTFAuaWNvbixcclxuICAgICAgUklCQk9OX0JVVFRPTlMuU0hPUlRDT0RFX0hFTFAudG9vbHRpcCxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zaG9ydGNvZGVNYW5hZ2VyLnNob3dIZWxwTW9kYWwoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yLCAnRmFpbGVkIHRvIHNob3cgc2hvcnRjb2RlIGhlbHAnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLnJpYmJvbkJ1dHRvbnMucHVzaChidXR0b24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIFJlYnVpbGQgRGlyZWN0b3J5IFN0cnVjdHVyZSBidXR0b25cclxuICAgKi9cclxuICBwcml2YXRlIGFkZFJlYnVpbGRTdHJ1Y3R1cmVCdXR0b24oKTogdm9pZCB7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLnBsdWdpbi5hZGRSaWJib25JY29uKFxyXG4gICAgICBSSUJCT05fQlVUVE9OUy5SRUJVSUxEX1NUUlVDVFVSRS5pY29uLFxyXG4gICAgICBSSUJCT05fQlVUVE9OUy5SRUJVSUxEX1NUUlVDVFVSRS50b29sdGlwLFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRpcmVjdG9yeU1hbmFnZXIucmVidWlsZERpcmVjdG9yeVN0cnVjdHVyZSgpO1xyXG4gICAgICAgICAgdGhpcy5zaG93U3VjY2VzcygnRGlyZWN0b3J5IHN0cnVjdHVyZSByZWJ1aWx0Jyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvciwgJ0ZhaWxlZCB0byByZWJ1aWxkIGRpcmVjdG9yeSBzdHJ1Y3R1cmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLnJpYmJvbkJ1dHRvbnMucHVzaChidXR0b24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIFNldHRpbmdzIGJ1dHRvblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWRkU2V0dGluZ3NCdXR0b24oKTogdm9pZCB7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLnBsdWdpbi5hZGRSaWJib25JY29uKFxyXG4gICAgICBSSUJCT05fQlVUVE9OUy5QTFVHSU5fU0VUVElOR1MuaWNvbixcclxuICAgICAgUklCQk9OX0JVVFRPTlMuUExVR0lOX1NFVFRJTkdTLnRvb2x0aXAsXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gT3BlbiBzZXR0aW5ncyB0YWIgLSB1c2UgdGhlIGFwcCdzIHNldHRpbmdzIGludGVyZmFjZVxyXG4gICAgICAgICAgKHRoaXMucGx1Z2luLmFwcCBhcyBhbnkpLnNldHRpbmcub3BlbigpO1xyXG4gICAgICAgICAgKHRoaXMucGx1Z2luLmFwcCBhcyBhbnkpLnNldHRpbmcub3BlblRhYkJ5SWQodGhpcy5wbHVnaW4ubWFuaWZlc3QuaWQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyBGYWxsYmFjazogc2hvdyBhIG5vdGljZSB0byBtYW51YWxseSBvcGVuIHNldHRpbmdzXHJcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugb3BlbiBTZXR0aW5ncyBtYW51YWxseSBhbmQgZmluZCB0aGUgTGluayBQbHVnaW4gdGFiJyk7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IsICdGYWlsZWQgdG8gb3BlbiBzZXR0aW5ncyBhdXRvbWF0aWNhbGx5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5yaWJib25CdXR0b25zLnB1c2goYnV0dG9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgc3VjY2VzcyBtZXNzYWdlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzaG93U3VjY2VzcyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIG5ldyBOb3RpY2UoYFx1MjcwNSAke21lc3NhZ2V9YCk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcclxuICAgICAgY29uc29sZS5sb2coYFtMaW5rUGx1Z2luXSAke21lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgcmliYm9uIGJ1dHRvbiBzdGF0ZXMgYmFzZWQgb24gc2V0dGluZ3NcclxuICAgKi9cclxuICB1cGRhdGVCdXR0b25TdGF0ZXMoKTogdm9pZCB7XHJcbiAgICAvLyBDb3VsZCBiZSB1c2VkIHRvIGVuYWJsZS9kaXNhYmxlIGJ1dHRvbnMgYmFzZWQgb24gc2V0dGluZ3NcclxuICAgIC8vIEZvciBleGFtcGxlLCBkaXNhYmxlIHNob3J0Y29kZSBoZWxwIGlmIHNob3J0Y29kZXMgYXJlIGRpc2FibGVkXHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbTGlua1BsdWdpbl0gUmliYm9uIGJ1dHRvbiBzdGF0ZXMgdXBkYXRlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHJpYmJvbiBidXR0b24gY291bnQgZm9yIGRlYnVnZ2luZ1xyXG4gICAqL1xyXG4gIGdldEJ1dHRvbkNvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5yaWJib25CdXR0b25zLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhIGN1c3RvbSByaWJib24gYnV0dG9uIChmb3IgZnV0dXJlIGV4dGVuc2liaWxpdHkpXHJcbiAgICovXHJcbiAgYWRkQ3VzdG9tQnV0dG9uKFxyXG4gICAgaWNvbjogc3RyaW5nLCBcclxuICAgIHRvb2x0aXA6IHN0cmluZywgXHJcbiAgICBjYWxsYmFjazogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD5cclxuICApOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLnBsdWdpbi5hZGRSaWJib25JY29uKGljb24sIHRvb2x0aXAsIGNhbGxiYWNrKTtcclxuICAgIHRoaXMucmliYm9uQnV0dG9ucy5wdXNoKGJ1dHRvbik7XHJcbiAgICByZXR1cm4gYnV0dG9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGEgc3BlY2lmaWMgcmliYm9uIGJ1dHRvblxyXG4gICAqL1xyXG4gIHJlbW92ZUJ1dHRvbihidXR0b246IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMucmliYm9uQnV0dG9ucy5pbmRleE9mKGJ1dHRvbik7XHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICB0aGlzLnJpYmJvbkJ1dHRvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgYnV0dG9uLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvdyBxdWljayBhY3Rpb25zIG1lbnUgKGZ1dHVyZSBlbmhhbmNlbWVudClcclxuICAgKi9cclxuICBzaG93UXVpY2tBY3Rpb25zTWVudSgpOiB2b2lkIHtcclxuICAgIC8vIFRoaXMgY291bGQgc2hvdyBhIHBvcHVwIG1lbnUgd2l0aCBhZGRpdGlvbmFsIGFjdGlvbnNcclxuICAgIC8vIEZvciBub3csIGp1c3Qgc2hvdyBhIG5vdGljZSBhYm91dCBhdmFpbGFibGUgZmVhdHVyZXNcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgXHJcbkxpbmsgUGx1Z2luIFF1aWNrIEFjdGlvbnM6XHJcblx1MjAyMiBUb2RheSdzIEpvdXJuYWw6ICR7UklCQk9OX0JVVFRPTlMuVE9EQVlfSk9VUk5BTC50b29sdGlwfVxyXG5cdTIwMjIgQ3JlYXRlIE5vdGU6ICR7UklCQk9OX0JVVFRPTlMuQ1JFQVRFX05PVEUudG9vbHRpcH1cclxuXHUyMDIyIE1vbnRobHkgRm9sZGVyczogJHtSSUJCT05fQlVUVE9OUy5NT05USExZX0ZPTERFUlMudG9vbHRpcH1cclxuXHUyMDIyIFNob3J0Y29kZSBIZWxwOiAke1JJQkJPTl9CVVRUT05TLlNIT1JUQ09ERV9IRUxQLnRvb2x0aXB9XHJcblx1MjAyMiBSZWJ1aWxkIFN0cnVjdHVyZTogJHtSSUJCT05fQlVUVE9OUy5SRUJVSUxEX1NUUlVDVFVSRS50b29sdGlwfVxyXG5cdTIwMjIgU2V0dGluZ3M6ICR7UklCQk9OX0JVVFRPTlMuUExVR0lOX1NFVFRJTkdTLnRvb2x0aXB9XHJcbiAgICBgLnRyaW0oKTtcclxuICAgIFxyXG4gICAgbmV3IE5vdGljZShtZXNzYWdlLCA4MDAwKTtcclxuICB9XHJcbn0gIiwgImltcG9ydCB7IFRGb2xkZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTGlua1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IFxuICBERUZBVUxUX0RJUkVDVE9SSUVTLCBcbiAgREVGQVVMVF9KT1VSTkFMX1NUUlVDVFVSRSwgXG4gIERFRkFVTFRfUkVGRVJFTkNFX1NUUlVDVFVSRSxcbiAgT1BUSU9OQUxfRElSRUNUT1JJRVMgXG59IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBQYXRoVXRpbHMgfSBmcm9tICcuLi91dGlscy9wYXRoVXRpbHMnO1xuaW1wb3J0IHsgRGlyZWN0b3J5VGVtcGxhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEaXJlY3RvcnlNYW5hZ2VyIHtcbiAgcGx1Z2luOiBMaW5rUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTGlua1BsdWdpbikge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIGJhc2UgZGlyZWN0b3J5IHN0cnVjdHVyZSBhY2NvcmRpbmcgdG8gc2V0dGluZ3NcbiAgICogQWxsIGRpcmVjdG9yaWVzIGFyZSBjcmVhdGVkIHVuZGVyIHRoZSBjb25maWd1cmVkIGJhc2VGb2xkZXIgdG8gcHJldmVudCBjb2xsaXNpb25zXG4gICAqL1xuICBhc3luYyByZWJ1aWxkRGlyZWN0b3J5U3RydWN0dXJlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHRoaXMucGx1Z2luLmFwcDtcbiAgICBjb25zdCB7IGJhc2VGb2xkZXIsIGRpcmVjdG9yeVN0cnVjdHVyZSB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBiYXNlIGZvbGRlciBmaXJzdFxuICAgICAgY29uc3QgYmFzZVBhdGggPSBub3JtYWxpemVQYXRoKGJhc2VGb2xkZXIpO1xuICAgICAgYXdhaXQgdGhpcy5nZXRPckNyZWF0ZURpcmVjdG9yeShiYXNlUGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCBiYXNlIGRpcmVjdG9yeTogJHtiYXNlUGF0aH1gKTtcblxuICAgICAgLy8gQ3JlYXRlIGJhc2ljIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZvciAoY29uc3QgZGlyTmFtZSBvZiBkaXJlY3RvcnlTdHJ1Y3R1cmUgfHwgREVGQVVMVF9ESVJFQ1RPUklFUykge1xuICAgICAgICBjb25zdCBkaXJQYXRoID0gUGF0aFV0aWxzLmpvaW5QYXRoKGJhc2VQYXRoLCBkaXJOYW1lKTtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRPckNyZWF0ZURpcmVjdG9yeShkaXJQYXRoKTtcbiAgICAgICAgY29uc29sZS5sb2coYENyZWF0ZWQgZGlyZWN0b3J5OiAke2RpclBhdGh9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBkZXRhaWxlZCBqb3VybmFsIHN0cnVjdHVyZVxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVKb3VybmFsU3RydWN0dXJlKGJhc2VQYXRoKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHJlZmVyZW5jZSBzdHJ1Y3R1cmVcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUmVmZXJlbmNlU3RydWN0dXJlKGJhc2VQYXRoKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZWJ1aWxkIGRpcmVjdG9yeSBzdHJ1Y3R1cmU6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIGRldGFpbGVkIGpvdXJuYWwgc3RydWN0dXJlIGFzIHNwZWNpZmllZCBpbiBSRUFETUVcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUpvdXJuYWxTdHJ1Y3R1cmUoYmFzZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGpvdXJuYWxQYXRoID0gUGF0aFV0aWxzLmpvaW5QYXRoKGJhc2VQYXRoLCAnam91cm5hbCcpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBqb3VybmFsIHN1YmRpcmVjdG9yaWVzXG4gICAgY29uc3Qgam91cm5hbFN1YmRpcnMgPSBbXG4gICAgICAnTWlzYycsXG4gICAgICAneV8yMDI1L0phbnVhcnknLFxuICAgICAgJ3lfMjAyNS9GZWJydWFyeScsIFxuICAgICAgJ3lfMjAyNS9NYXJjaCcsXG4gICAgICAneV8yMDI1L0FwcmlsJyxcbiAgICAgICd5XzIwMjUvTWF5JyxcbiAgICAgICd5XzIwMjUvSnVuZScsXG4gICAgICAneV8yMDI1L01pc2MnLFxuICAgICAgJ3lfMjAyNS9ZZWFybHkgTGlzdCcsXG4gICAgICAneV8yMDI1L1llYXJseSBMb2cnLFxuICAgICAgJ3pfQXJjaGl2ZXMveV8yMDIyJyxcbiAgICAgICd6X0FyY2hpdmVzL3lfMjAyMycsXG4gICAgICAnel9BcmNoaXZlcy95XzIwMjQnXG4gICAgXTtcblxuICAgIGZvciAoY29uc3Qgc3ViZGlyIG9mIGpvdXJuYWxTdWJkaXJzKSB7XG4gICAgICBjb25zdCBmdWxsUGF0aCA9IFBhdGhVdGlscy5qb2luUGF0aChqb3VybmFsUGF0aCwgc3ViZGlyKTtcbiAgICAgIGF3YWl0IHRoaXMuZ2V0T3JDcmVhdGVEaXJlY3RvcnkoZnVsbFBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYENyZWF0ZWQgam91cm5hbCBkaXJlY3Rvcnk6ICR7ZnVsbFBhdGh9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIHJlZmVyZW5jZSBmaWxlIHN0cnVjdHVyZSBhcyBzcGVjaWZpZWQgaW4gUkVBRE1FXG4gICAqL1xuICBhc3luYyBjcmVhdGVSZWZlcmVuY2VTdHJ1Y3R1cmUoYmFzZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHJlZmVyZW5jZVBhdGggPSBQYXRoVXRpbHMuam9pblBhdGgoYmFzZVBhdGgsICdyZWZlcmVuY2UnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcmVmZXJlbmNlIGZpbGUgdHlwZSBkaXJlY3Rvcmllc1xuICAgIGNvbnN0IGZpbGVUeXBlcyA9IFsnaW1hZ2VzJywgJ3BkZnMnLCAndmlkZW9zJywgJ2F1ZGlvJywgJ2RvY3MnLCAnb3RoZXInXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGZpbGVUeXBlIG9mIGZpbGVUeXBlcykge1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBQYXRoVXRpbHMuam9pblBhdGgocmVmZXJlbmNlUGF0aCwgJ2ZpbGVzJywgZmlsZVR5cGUpO1xuICAgICAgYXdhaXQgdGhpcy5nZXRPckNyZWF0ZURpcmVjdG9yeShmaWxlUGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCByZWZlcmVuY2UgZGlyZWN0b3J5OiAke2ZpbGVQYXRofWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG9wdGlvbmFsIGNvbXBsZXggc3RydWN0dXJlIGRpcmVjdG9yaWVzXG4gICAqL1xuICBhc3luYyBjcmVhdGVPcHRpb25hbFN0cnVjdHVyZShiYXNlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZm9yIChjb25zdCBkaXJOYW1lIG9mIE9QVElPTkFMX0RJUkVDVE9SSUVTKSB7XG4gICAgICBjb25zdCBkaXJQYXRoID0gUGF0aFV0aWxzLmpvaW5QYXRoKGJhc2VQYXRoLCBkaXJOYW1lKTtcbiAgICAgIGF3YWl0IHRoaXMuZ2V0T3JDcmVhdGVEaXJlY3RvcnkoZGlyUGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCBvcHRpb25hbCBkaXJlY3Rvcnk6ICR7ZGlyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIGRpcmVjdG9yeSBwYXRoLCBjcmVhdGluZyBpdCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAqIEhhbmRsZXMgYm90aCBhYnNvbHV0ZSBwYXRocyBhbmQgcGF0aHMgcmVsYXRpdmUgdG8gdGhlIGJhc2UgZm9sZGVyXG4gICAqL1xuICBhc3luYyBnZXRPckNyZWF0ZURpcmVjdG9yeShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPFRGb2xkZXI+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHA7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuICAgIGNvbnN0IGV4aXN0aW5nRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vcm1hbGl6ZWRQYXRoKTtcblxuICAgIGlmIChleGlzdGluZ0ZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgIHJldHVybiBleGlzdGluZ0ZvbGRlcjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgcGFyZW50IGRpcmVjdG9yaWVzIHJlY3Vyc2l2ZWx5XG4gICAgY29uc3QgcGF0aFBhcnRzID0gbm9ybWFsaXplZFBhdGguc3BsaXQoJy8nKTtcbiAgICBsZXQgY3VycmVudFBhdGggPSAnJztcblxuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXRoUGFydHMpIHtcbiAgICAgIGlmICghcGFydCkgY29udGludWU7XG5cbiAgICAgIGN1cnJlbnRQYXRoICs9IChjdXJyZW50UGF0aCA/ICcvJyA6ICcnKSArIHBhcnQ7XG4gICAgICBjb25zdCBmb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudFBhdGgpO1xuXG4gICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICBhd2FpdCB2YXVsdC5jcmVhdGVGb2xkZXIoY3VycmVudFBhdGgpO1xuICAgICAgfSBlbHNlIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUGF0aCAke2N1cnJlbnRQYXRofSBleGlzdHMgYnV0IGlzIG5vdCBhIGZvbGRlcmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm9ybWFsaXplZFBhdGgpIGFzIFRGb2xkZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZnVsbCBwYXRoIGZvciBhIGRpcmVjdG9yeSB3aXRoaW4gdGhlIHBsdWdpbidzIGJhc2UgZm9sZGVyXG4gICAqL1xuICBnZXRQbHVnaW5EaXJlY3RvcnlQYXRoKHJlbGF0aXZlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IGJhc2VGb2xkZXIgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgIHJldHVybiBQYXRoVXRpbHMuam9pblBhdGgoYmFzZUZvbGRlciwgcmVsYXRpdmVQYXRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBqb3VybmFsIGRpcmVjdG9yeSBwYXRoXG4gICAqL1xuICBnZXRKb3VybmFsUGF0aCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgYmFzZUZvbGRlciwgam91cm5hbFJvb3RGb2xkZXIgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgIHJldHVybiBQYXRoVXRpbHMuam9pblBhdGgoYmFzZUZvbGRlciwgam91cm5hbFJvb3RGb2xkZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHdvcmtzcGFjZSBkaXJlY3RvcnkgcGF0aCAgXG4gICAqL1xuICBnZXRXb3Jrc3BhY2VQYXRoKCk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBiYXNlRm9sZGVyLCBkb2N1bWVudERpcmVjdG9yeSB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgcmV0dXJuIFBhdGhVdGlscy5qb2luUGF0aChiYXNlRm9sZGVyLCBkb2N1bWVudERpcmVjdG9yeSk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyBhIGRpcmVjdG9yeSB0ZW1wbGF0ZSB0byBjcmVhdGUgc3RydWN0dXJlZCBmb2xkZXJzXG4gICAqL1xuICBhc3luYyBhcHBseURpcmVjdG9yeVRlbXBsYXRlKGJhc2VQYXRoOiBzdHJpbmcsIHRlbXBsYXRlOiBEaXJlY3RvcnlUZW1wbGF0ZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRlbXBsYXRlKSkge1xuICAgICAgY29uc3QgZGlyUGF0aCA9IFBhdGhVdGlscy5qb2luUGF0aChiYXNlUGF0aCwga2V5KTtcbiAgICAgIGF3YWl0IHRoaXMuZ2V0T3JDcmVhdGVEaXJlY3RvcnkoZGlyUGF0aCk7XG5cbiAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlEaXJlY3RvcnlUZW1wbGF0ZShkaXJQYXRoLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyBpZiBhIGdpdmVuIHBhdGggaXMgd2l0aGluIGFsbG93ZWQgZGlyZWN0b3JpZXNcbiAgICovXG4gIGlzVmFsaWRQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0aChwYXRoKTtcbiAgICBjb25zdCB7IHJlc3RyaWN0ZWREaXJlY3RvcmllcyB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cbiAgICBpZiAoIXJlc3RyaWN0ZWREaXJlY3RvcmllcyB8fCByZXN0cmljdGVkRGlyZWN0b3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gIXJlc3RyaWN0ZWREaXJlY3Rvcmllcy5zb21lKChkaXI6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZERpciA9IG5vcm1hbGl6ZVBhdGgoZGlyKTtcbiAgICAgIHJldHVybiBub3JtYWxpemVkUGF0aCA9PT0gbm9ybWFsaXplZERpciB8fCBub3JtYWxpemVkUGF0aC5zdGFydHNXaXRoKG5vcm1hbGl6ZWREaXIgKyAnLycpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RzIGFsbCBkaXJlY3RvcmllcyBpbiB0aGUgdmF1bHRcbiAgICovXG4gIGdldEFsbERpcmVjdG9yaWVzKCk6IFRGb2xkZXJbXSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gdGhpcy5wbHVnaW4uYXBwO1xuICAgIHJldHVybiB2YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXG4gICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIGFzIFRGb2xkZXJbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGlyZWN0b3J5IHdpdGggYSBzcGVjaWZpYyB0ZW1wbGF0ZSBzdHJ1Y3R1cmUgd2l0aGluIHRoZSBwbHVnaW4ncyBiYXNlIGZvbGRlclxuICAgKi9cbiAgYXN5bmMgY3JlYXRlUHJvamVjdERpcmVjdG9yeShuYW1lOiBzdHJpbmcsIHRlbXBsYXRlPzogRGlyZWN0b3J5VGVtcGxhdGUpOiBQcm9taXNlPFRGb2xkZXI+IHtcbiAgICBjb25zdCBzYW5pdGl6ZWROYW1lID0gUGF0aFV0aWxzLnNhbml0aXplUGF0aChuYW1lKTtcbiAgICBjb25zdCB3b3Jrc3BhY2VQYXRoID0gdGhpcy5nZXRXb3Jrc3BhY2VQYXRoKCk7XG4gICAgY29uc3QgcHJvamVjdFBhdGggPSBQYXRoVXRpbHMuam9pblBhdGgod29ya3NwYWNlUGF0aCwgc2FuaXRpemVkTmFtZSk7XG5cbiAgICBjb25zdCBwcm9qZWN0Rm9sZGVyID0gYXdhaXQgdGhpcy5nZXRPckNyZWF0ZURpcmVjdG9yeShwcm9qZWN0UGF0aCk7XG5cbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwbHlEaXJlY3RvcnlUZW1wbGF0ZShwcm9qZWN0UGF0aCwgdGVtcGxhdGUpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9qZWN0Rm9sZGVyO1xuICB9XG59IiwgIlxuaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFBhdGhVdGlscyB7XG4gIHN0YXRpYyBzYW5pdGl6ZVBhdGgocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbm9ybWFsaXplUGF0aChwYXRoLnJlcGxhY2UoL1tcXC86Kj9cIjw+fF0vZywgJycpLnRyaW0oKSk7XG4gIH1cblxuICBzdGF0aWMgam9pblBhdGgoLi4uc2VnbWVudHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbm9ybWFsaXplUGF0aChzZWdtZW50cy5maWx0ZXIoQm9vbGVhbikuam9pbignLycpKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IFRGaWxlLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IExpbmtQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBEYXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2RhdGVTZXJ2aWNlJztcbmltcG9ydCB7IERhdGVVdGlscyB9IGZyb20gJy4uL3V0aWxzL2RhdGVVdGlscyc7XG5pbXBvcnQgeyBKb3VybmFsRW50cnkgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBKb3VybmFsTWFuYWdlciB7XG4gIHBsdWdpbjogTGlua1BsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IExpbmtQbHVnaW4pIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG9yIG9wZW5zIGEgam91cm5hbCBlbnRyeSBmb3IgdGhlIHNwZWNpZmllZCBkYXRlXG4gICAqIEF1dG9tYXRpY2FsbHkgY3JlYXRlcyBtb250aGx5IGZvbGRlcnMgYXMgbmVlZGVkXG4gICAqL1xuICBhc3luYyBjcmVhdGVPck9wZW5Kb3VybmFsRW50cnkoZGF0ZTogYW55KTogUHJvbWlzZTxURmlsZT4ge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHRoaXMucGx1Z2luLmFwcDtcbiAgICBjb25zdCB7IGpvdXJuYWxEYXRlRm9ybWF0LCBqb3VybmFsVGVtcGxhdGUgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBtb250aGx5IGZvbGRlciBzdHJ1Y3R1cmUgZm9yIHRoaXMgZGF0ZVxuICAgIGF3YWl0IHRoaXMuZW5zdXJlTW9udGhseUZvbGRlckV4aXN0cyhkYXRlKTtcblxuICAgIC8vIEdlbmVyYXRlIHRoZSBmaWxlIG5hbWUgYW5kIHBhdGggdXNpbmcgdGhlIG5ldyBiYXNlIGZvbGRlciBzdHJ1Y3R1cmVcbiAgICBjb25zdCBtb250aGx5Rm9sZGVyUGF0aCA9IHRoaXMuZ2V0TW9udGhseUZvbGRlclBhdGgoZGF0ZSk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBEYXRlU2VydmljZS5nZXRKb3VybmFsRmlsZW5hbWUoZGF0ZSwgam91cm5hbERhdGVGb3JtYXQpO1xuICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHttb250aGx5Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX0ubWRgKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGFscmVhZHkgZXhpc3RzXG4gICAgbGV0IGZpbGUgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpIGFzIFRGaWxlO1xuXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIGZpbGUgd2l0aCB0ZW1wbGF0ZSBjb250ZW50XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUpvdXJuYWxDb250ZW50KGRhdGUpO1xuICAgICAgZmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCBkYWlseSBub3RlOiAke2ZpbGVQYXRofWApO1xuICAgIH1cblxuICAgIHJldHVybiBmaWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZXMgdGhlIG1vbnRobHkgZm9sZGVyIGV4aXN0cyBmb3IgdGhlIGdpdmVuIGRhdGVcbiAgICogQ3JlYXRlcyB0aGUgZm9sZGVyIHN0cnVjdHVyZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAqL1xuICBhc3luYyBlbnN1cmVNb250aGx5Rm9sZGVyRXhpc3RzKGRhdGU6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG1vbnRobHlGb2xkZXJQYXRoID0gdGhpcy5nZXRNb250aGx5Rm9sZGVyUGF0aChkYXRlKTtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5kaXJlY3RvcnlNYW5hZ2VyLmdldE9yQ3JlYXRlRGlyZWN0b3J5KG1vbnRobHlGb2xkZXJQYXRoKTtcbiAgICBjb25zb2xlLmxvZyhgRW5zdXJlZCBtb250aGx5IGZvbGRlciBleGlzdHM6ICR7bW9udGhseUZvbGRlclBhdGh9YCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbW9udGhseSBmb2xkZXIgcGF0aCBmb3IgYSBnaXZlbiBkYXRlXG4gICAqIFVzZXMgdGhlIG5ldyBiYXNlIGZvbGRlciBzdHJ1Y3R1cmU6IExpbmtQbHVnaW4vam91cm5hbC95X1lZWVkvTW9udGhOYW1lL1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRNb250aGx5Rm9sZGVyUGF0aChkYXRlOiBhbnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IGpvdXJuYWxCYXNlUGF0aCA9IHRoaXMucGx1Z2luLmRpcmVjdG9yeU1hbmFnZXIuZ2V0Sm91cm5hbFBhdGgoKTtcbiAgICByZXR1cm4gRGF0ZVNlcnZpY2UuZ2V0TW9udGhseUZvbGRlclBhdGgoam91cm5hbEJhc2VQYXRoLCBkYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGFpbHkgbm90ZSBmb3IgdG9kYXkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgKiBBdXRvbWF0aWNhbGx5IGhhbmRsZXMgbW9udGhseSBmb2xkZXIgY3JlYXRpb25cbiAgICovXG4gIGFzeW5jIGNyZWF0ZVRvZGF5Tm90ZSgpOiBQcm9taXNlPFRGaWxlPiB7XG4gICAgY29uc3QgdG9kYXkgPSBEYXRlU2VydmljZS5ub3coKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVPck9wZW5Kb3VybmFsRW50cnkodG9kYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkYWlseSBub3RlIGZvciBhIGZ1dHVyZSBkYXRlXG4gICAqIEF1dG9tYXRpY2FsbHkgY3JlYXRlcyBtb250aGx5IGZvbGRlcnMgYXMgbmVlZGVkXG4gICAqL1xuICBhc3luYyBjcmVhdGVGdXR1cmVEYWlseU5vdGUoZGF0ZTogRGF0ZSB8IHN0cmluZyk6IFByb21pc2U8VEZpbGU+IHtcbiAgICBjb25zdCB0YXJnZXREYXRlID0gRGF0ZVNlcnZpY2UuZnJvbShkYXRlKTtcbiAgICBcbiAgICAvLyBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBjcmVhdGUgdGhlIG1vbnRobHkgZm9sZGVyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVPck9wZW5Kb3VybmFsRW50cnkodGFyZ2V0RGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29udGVudCBmb3IgYSBqb3VybmFsIGVudHJ5XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlSm91cm5hbENvbnRlbnQoZGF0ZTogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB7IGpvdXJuYWxUZW1wbGF0ZSwgam91cm5hbERhdGVGb3JtYXQgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgIGNvbnN0IHByZXZpb3VzRGF5ID0gRGF0ZVNlcnZpY2UucHJldmlvdXNEYXkoZGF0ZSk7XG4gICAgY29uc3QgbmV4dERheSA9IERhdGVTZXJ2aWNlLm5leHREYXkoZGF0ZSk7XG5cbiAgICBjb25zdCBwcmV2aW91c0xpbmsgPSBgW1ske0RhdGVTZXJ2aWNlLmZvcm1hdChwcmV2aW91c0RheSwgam91cm5hbERhdGVGb3JtYXQpfV1dYDtcbiAgICBjb25zdCBuZXh0TGluayA9IGBbWyR7RGF0ZVNlcnZpY2UuZm9ybWF0KG5leHREYXksIGpvdXJuYWxEYXRlRm9ybWF0KX1dXWA7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBEYXRlU2VydmljZS5mb3JtYXQoZGF0ZSwgJ1lZWVktTU0tREQnKTtcbiAgICBjb25zdCB0aXRsZSA9IERhdGVTZXJ2aWNlLmZvcm1hdChkYXRlLCBqb3VybmFsRGF0ZUZvcm1hdCk7XG5cbiAgICBpZiAoam91cm5hbFRlbXBsYXRlKSB7XG4gICAgICAvLyBSZXBsYWNlIHRlbXBsYXRlIHZhcmlhYmxlc1xuICAgICAgcmV0dXJuIGpvdXJuYWxUZW1wbGF0ZVxuICAgICAgICAucmVwbGFjZSgve3tkYXRlfX0vZywgY3VycmVudERhdGUpXG4gICAgICAgIC5yZXBsYWNlKC97e3RpdGxlfX0vZywgdGl0bGUpXG4gICAgICAgIC5yZXBsYWNlKC97e3ByZXZpb3VzfX0vZywgcHJldmlvdXNMaW5rKVxuICAgICAgICAucmVwbGFjZSgve3tuZXh0fX0vZywgbmV4dExpbmspO1xuICAgIH1cblxuICAgIC8vIERlZmF1bHQgdGVtcGxhdGVcbiAgICByZXR1cm4gYC0tLVxuZGF0ZTogJHtjdXJyZW50RGF0ZX1cbnByZXZpb3VzOiAke3ByZXZpb3VzTGlua31cbm5leHQ6ICR7bmV4dExpbmt9XG50YWdzOlxuICAtIGpvdXJuYWxcbi0tLVxuXG4jICR7dGl0bGV9XG5cbiMjIERhaWx5IExvZ1xuXG4jIyBUYXNrc1xuLSBbIF0gXG5cbiMjIE5vdGVzXG5cbiMjIFJlZmxlY3Rpb25cblxuLS0tXG5QcmV2aW91czogJHtwcmV2aW91c0xpbmt9IHwgTmV4dDogJHtuZXh0TGlua31cbmA7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIGpvdXJuYWwgZW50cnkgZm9yIHRvZGF5XG4gICAqIENyZWF0ZXMgbW9udGhseSBmb2xkZXIgYW5kIGRhaWx5IG5vdGUgaWYgdGhleSBkb24ndCBleGlzdFxuICAgKi9cbiAgYXN5bmMgb3BlblRvZGF5Sm91cm5hbCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB0b2RheSA9IERhdGVTZXJ2aWNlLm5vdygpO1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmNyZWF0ZU9yT3BlbkpvdXJuYWxFbnRyeSh0b2RheSk7XG5cbiAgICAvLyBPcGVuIHRoZSBmaWxlIGluIGEgbmV3IGxlYWZcbiAgICBjb25zdCBsZWFmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKCk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgd2UgbmVlZCB0byBjcmVhdGUgYSBuZXcgbW9udGhseSBmb2xkZXJcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHBsdWdpbiBsb2FkcyBvciB3aGVuIGNyZWF0aW5nIG5vdGVzXG4gICAqL1xuICBhc3luYyBjaGVja0FuZENyZWF0ZUN1cnJlbnRNb250aEZvbGRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IERhdGVTZXJ2aWNlLm5vdygpO1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlTW9udGhseUZvbGRlckV4aXN0cyhjdXJyZW50RGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBtb250aGx5IGZvbGRlcnMgZm9yIGEgcmFuZ2Ugb2YgZGF0ZXNcbiAgICogVXNlZnVsIGZvciBiYXRjaCBjcmVhdGlvbiBvciBzZXR1cFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlTW9udGhseUZvbGRlcnNGb3JSYW5nZShzdGFydERhdGU6IGFueSwgZW5kRGF0ZTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY3VycmVudCA9IERhdGVTZXJ2aWNlLnN0YXJ0T2ZNb250aChzdGFydERhdGUpO1xuICAgIGNvbnN0IGVuZCA9IERhdGVTZXJ2aWNlLmVuZE9mTW9udGgoZW5kRGF0ZSk7XG5cbiAgICB3aGlsZSAoRGF0ZVNlcnZpY2UuaXNTYW1lT3JCZWZvcmUoY3VycmVudCwgZW5kKSkge1xuICAgICAgYXdhaXQgdGhpcy5lbnN1cmVNb250aGx5Rm9sZGVyRXhpc3RzKGN1cnJlbnQpO1xuICAgICAgRGF0ZVNlcnZpY2UuYWRkKGN1cnJlbnQsIDEsICdtb250aCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBqb3VybmFsIGVudHJ5IGZvciBhIHNwZWNpZmljIGRhdGVcbiAgICovXG4gIGFzeW5jIG9wZW5Kb3VybmFsRm9yRGF0ZShkYXRlOiBEYXRlIHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbW9tZW50RGF0ZSA9IERhdGVTZXJ2aWNlLmZyb20oZGF0ZSk7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuY3JlYXRlT3JPcGVuSm91cm5hbEVudHJ5KG1vbWVudERhdGUpO1xuXG4gICAgY29uc3QgbGVhZiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBsaW5rcyBiZXR3ZWVuIGpvdXJuYWwgZW50cmllc1xuICAgKi9cbiAgYXN5bmMgdXBkYXRlSm91cm5hbExpbmtzKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gdGhpcy5wbHVnaW4uYXBwO1xuICAgIGNvbnN0IHsgam91cm5hbERhdGVGb3JtYXQgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXG4gICAgLy8gRXh0cmFjdCBkYXRlIGZyb20gZmlsZW5hbWVcbiAgICBjb25zdCBmaWxlRGF0ZSA9IERhdGVTZXJ2aWNlLmV4dHJhY3REYXRlRnJvbUZpbGVuYW1lKGZpbGUuYmFzZW5hbWUsIGpvdXJuYWxEYXRlRm9ybWF0IHx8ICdZWVlZLU1NLUREIGRkZGQnKTtcbiAgICBpZiAoIWZpbGVEYXRlKSByZXR1cm47XG5cbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChmaWxlKTtcbiAgICBjb25zdCBwcmV2aW91c0RheSA9IERhdGVTZXJ2aWNlLnByZXZpb3VzRGF5KGZpbGVEYXRlKTtcbiAgICBjb25zdCBuZXh0RGF5ID0gRGF0ZVNlcnZpY2UubmV4dERheShmaWxlRGF0ZSk7XG5cbiAgICBjb25zdCBwcmV2aW91c0ZpbGVOYW1lID0gRGF0ZVNlcnZpY2UuZm9ybWF0KHByZXZpb3VzRGF5LCBqb3VybmFsRGF0ZUZvcm1hdCk7XG4gICAgY29uc3QgbmV4dEZpbGVOYW1lID0gRGF0ZVNlcnZpY2UuZm9ybWF0KG5leHREYXksIGpvdXJuYWxEYXRlRm9ybWF0KTtcblxuICAgIC8vIFVwZGF0ZSBmcm9udG1hdHRlciBsaW5rc1xuICAgIGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gY29udGVudFxuICAgICAgLnJlcGxhY2UoL3ByZXZpb3VzOiAnXFxbXFxbKC4qPylcXF1cXF0nL2csIGBwcmV2aW91czogJ1tbJHtwcmV2aW91c0ZpbGVOYW1lfV1dJ2ApXG4gICAgICAucmVwbGFjZSgvbmV4dDogJ1xcW1xcWyguKj8pXFxdXFxdJy9nLCBgbmV4dDogJ1tbJHtuZXh0RmlsZU5hbWV9XV0nYCk7XG5cbiAgICBpZiAodXBkYXRlZENvbnRlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgIGF3YWl0IHZhdWx0Lm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBqb3VybmFsIGVudHJpZXMgZm9yIGEgZGF0ZSByYW5nZVxuICAgKi9cbiAgYXN5bmMgZ2V0Sm91cm5hbEVudHJpZXMoc3RhcnREYXRlOiBhbnksIGVuZERhdGU6IGFueSk6IFByb21pc2U8Sm91cm5hbEVudHJ5W10+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHA7XG4gICAgY29uc3QgeyBqb3VybmFsRGF0ZUZvcm1hdCB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgY29uc3QgZW50cmllczogSm91cm5hbEVudHJ5W10gPSBbXTtcblxuICAgIGNvbnN0IGN1cnJlbnQgPSBEYXRlU2VydmljZS5mcm9tKHN0YXJ0RGF0ZSk7XG4gICAgXG4gICAgd2hpbGUgKERhdGVTZXJ2aWNlLmlzU2FtZU9yQmVmb3JlKGN1cnJlbnQsIGVuZERhdGUpKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IERhdGVTZXJ2aWNlLmdldEpvdXJuYWxGaWxlUGF0aChcbiAgICAgICAgdGhpcy5wbHVnaW4uZGlyZWN0b3J5TWFuYWdlci5nZXRKb3VybmFsUGF0aCgpLFxuICAgICAgICBjdXJyZW50LFxuICAgICAgICBqb3VybmFsRGF0ZUZvcm1hdFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCkgYXMgVEZpbGU7XG4gICAgICBpZiAoZmlsZSkge1xuICAgICAgICBlbnRyaWVzLnB1c2goe1xuICAgICAgICAgIGRhdGU6IERhdGVTZXJ2aWNlLmZvcm1hdChjdXJyZW50LCAnWVlZWS1NTS1ERCcpLFxuICAgICAgICAgIHBhdGg6IGZpbGVQYXRoLFxuICAgICAgICAgIHRpdGxlOiBEYXRlU2VydmljZS5mb3JtYXQoY3VycmVudCwgam91cm5hbERhdGVGb3JtYXQpLFxuICAgICAgICAgIHByZXZpb3VzOiBEYXRlU2VydmljZS5mb3JtYXQoRGF0ZVNlcnZpY2UucHJldmlvdXNEYXkoY3VycmVudCksICdZWVlZLU1NLUREJyksXG4gICAgICAgICAgbmV4dDogRGF0ZVNlcnZpY2UuZm9ybWF0KERhdGVTZXJ2aWNlLm5leHREYXkoY3VycmVudCksICdZWVlZLU1NLUREJylcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIERhdGVTZXJ2aWNlLmFkZChjdXJyZW50LCAxLCAnZGF5Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudHJpZXM7XG4gIH1cbn0iLCAiaW1wb3J0IHsgRWRpdG9yLCBNYXJrZG93blZpZXcsIFRGaWxlLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IExpbmtQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBMaW5rU3VnZ2VzdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBhdGhVdGlscyB9IGZyb20gJy4uL3V0aWxzL3BhdGhVdGlscyc7XG5pbXBvcnQgeyBSRUdFWF9QQVRURVJOUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBjbGFzcyBMaW5rTWFuYWdlciB7XG4gIHBsdWdpbjogTGlua1BsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IExpbmtQbHVnaW4pIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgbm90ZSBmcm9tIHNlbGVjdGVkIHRleHQgYW5kIGxpbmsgdG8gaXRcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUxpbmtlZE5vdGUoc2VsZWN0aW9uOiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHA7XG4gICAgY29uc3QgY3VycmVudEZpbGUgPSB2aWV3LmZpbGU7XG5cbiAgICBpZiAoIWN1cnJlbnRGaWxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjdGl2ZSBmaWxlIGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgYSBmaWxlIHBhdGggZm9yIHRoZSBuZXcgbm90ZVxuICAgIGNvbnN0IGZpbGVOYW1lID0gdGhpcy5zYW5pdGl6ZUZpbGVOYW1lKHNlbGVjdGlvbik7XG4gICAgY29uc3QgZGlyZWN0b3J5UGF0aCA9IHRoaXMuZGV0ZXJtaW5lVGFyZ2V0RGlyZWN0b3J5KGZpbGVOYW1lKTtcbiAgICBjb25zdCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7ZGlyZWN0b3J5UGF0aH0vJHtmaWxlTmFtZX0ubWRgKTtcblxuICAgIC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBsZXQgZmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCkgYXMgVEZpbGU7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGZpbGUgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghZmlsZSkge1xuICAgICAgLy8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kaXJlY3RvcnlNYW5hZ2VyLmdldE9yQ3JlYXRlRGlyZWN0b3J5KGRpcmVjdG9yeVBhdGgpO1xuXG4gICAgICAvLyBDcmVhdGUgY29udGVudCBmb3IgdGhlIG5ldyBub3RlXG4gICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5nZW5lcmF0ZU5vdGVDb250ZW50KHNlbGVjdGlvbiwgY3VycmVudEZpbGUpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIGZpbGVcbiAgICAgIGZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgIH1cblxuICAgIC8vIFJlcGxhY2UgdGhlIHNlbGVjdGVkIHRleHQgd2l0aCBhIGxpbmsgdG8gdGhlIG5vdGVcbiAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgW1ske2ZpbGVOYW1lfV1dYCk7XG5cbiAgICAvLyBPcGVuIHRoZSBub3RlIGluIGEgbmV3IHBhbmUgaWYgY29uZmlndXJlZFxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuTmV3Tm90ZSkge1xuICAgICAgY29uc3QgbGVhZiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uuc3BsaXRBY3RpdmVMZWFmKCk7XG4gICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgdGhlIGFwcHJvcHJpYXRlIGRpcmVjdG9yeSBmb3IgYSBuZXcgbm90ZVxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVUYXJnZXREaXJlY3RvcnkodGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBkb2N1bWVudERpcmVjdG9yeSB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cbiAgICAvLyBMb2dpYyB0byBjYXRlZ29yaXplIG5vdGVzIGludG8gZGlmZmVyZW50IGRpcmVjdG9yaWVzIGJhc2VkIG9uIGtleXdvcmRzXG4gICAgY29uc3Qga2V5d29yZHMgPSB0aXRsZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKCdwcm9qZWN0JykgfHwga2V5d29yZHMuaW5jbHVkZXMoJ3dvcmsnKSkge1xuICAgICAgcmV0dXJuICdXb3Jrc3BhY2UnO1xuICAgIH0gZWxzZSBpZiAoa2V5d29yZHMuaW5jbHVkZXMoJ3JlZmVyZW5jZScpIHx8IGtleXdvcmRzLmluY2x1ZGVzKCdkZWZpbml0aW9uJykpIHtcbiAgICAgIHJldHVybiAnUmVmZXJlbmNlcyc7XG4gICAgfSBlbHNlIGlmIChrZXl3b3Jkcy5pbmNsdWRlcygndGVtcGxhdGUnKSkge1xuICAgICAgcmV0dXJuICdUZW1wbGF0ZXMnO1xuICAgIH1cblxuICAgIHJldHVybiBkb2N1bWVudERpcmVjdG9yeSB8fCAnRG9jdW1lbnRzJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb250ZW50IGZvciBhIG5ldyBsaW5rZWQgbm90ZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZU5vdGVDb250ZW50KHRpdGxlOiBzdHJpbmcsIHNvdXJjZUZpbGU6IFRGaWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IG5vdGVUZW1wbGF0ZSB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgIGlmIChub3RlVGVtcGxhdGUpIHtcbiAgICAgIC8vIFJlcGxhY2UgdGVtcGxhdGUgdmFyaWFibGVzXG4gICAgICByZXR1cm4gbm90ZVRlbXBsYXRlXG4gICAgICAgIC5yZXBsYWNlKC97e3RpdGxlfX0vZywgdGl0bGUpXG4gICAgICAgIC5yZXBsYWNlKC97e2RhdGV9fS9nLCBjdXJyZW50RGF0ZSlcbiAgICAgICAgLnJlcGxhY2UoL3t7c291cmNlfX0vZywgYFtbJHtzb3VyY2VGaWxlLmJhc2VuYW1lfV1dYCk7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCB0ZW1wbGF0ZVxuICAgIHJldHVybiBgLS0tXG50aXRsZTogJHt0aXRsZX1cbmNyZWF0ZWQ6ICR7Y3VycmVudERhdGV9XG5zb3VyY2U6IFtbJHtzb3VyY2VGaWxlLmJhc2VuYW1lfV1dXG50YWdzOiBbXVxuLS0tXG5cbiMgJHt0aXRsZX1cblxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSBhIHN0cmluZyBmb3IgdXNlIGFzIGEgZmlsZW5hbWVcbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVGaWxlTmFtZShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5wdXRcbiAgICAgIC5yZXBsYWNlKFJFR0VYX1BBVFRFUk5TLklOVkFMSURfRklMRU5BTUVfQ0hBUlMsICcnKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgICAgLnRyaW0oKVxuICAgICAgLnN1YnN0cmluZygwLCAxMDApOyAvLyBMaW1pdCBsZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFsbCBsaW5rcyBpbiBhIGZpbGVcbiAgICovXG4gIGFzeW5jIGZpbmRMaW5rc0luRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHA7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc3QgbGlua3M6IHN0cmluZ1tdID0gW107XG5cbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IFJFR0VYX1BBVFRFUk5TLldJS0lfTElOSy5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgbGlua3MucHVzaChtYXRjaFsxXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmtzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYWxsIGJhY2tsaW5rcyB0byBhIGZpbGVcbiAgICovXG4gIGFzeW5jIGZpbmRCYWNrbGlua3MoZmlsZTogVEZpbGUpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHA7XG4gICAgY29uc3QgZmlsZXMgPSB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgYmFja2xpbmtzOiBURmlsZVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHBvdGVudGlhbFNvdXJjZSBvZiBmaWxlcykge1xuICAgICAgaWYgKHBvdGVudGlhbFNvdXJjZS5wYXRoID09PSBmaWxlLnBhdGgpIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCBsaW5rcyA9IGF3YWl0IHRoaXMuZmluZExpbmtzSW5GaWxlKHBvdGVudGlhbFNvdXJjZSk7XG4gICAgICBpZiAobGlua3MuaW5jbHVkZXMoZmlsZS5iYXNlbmFtZSkpIHtcbiAgICAgICAgYmFja2xpbmtzLnB1c2gocG90ZW50aWFsU291cmNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYmFja2xpbmtzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYnJva2VuIGxpbmtzIGluIHRoZSB2YXVsdFxuICAgKi9cbiAgYXN5bmMgZmluZEJyb2tlbkxpbmtzKCk6IFByb21pc2U8eyBmaWxlOiBURmlsZTsgYnJva2VuTGlua3M6IHN0cmluZ1tdIH1bXT4ge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHRoaXMucGx1Z2luLmFwcDtcbiAgICBjb25zdCBmaWxlcyA9IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCBicm9rZW5MaW5rc0RhdGE6IHsgZmlsZTogVEZpbGU7IGJyb2tlbkxpbmtzOiBzdHJpbmdbXSB9W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgY29uc3QgbGlua3MgPSBhd2FpdCB0aGlzLmZpbmRMaW5rc0luRmlsZShmaWxlKTtcbiAgICAgIGNvbnN0IGJyb2tlbkxpbmtzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGxpbmsgb2YgbGlua3MpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGxpbmtlZCBmaWxlIGV4aXN0c1xuICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke2xpbmt9Lm1kYCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxpbmspO1xuXG4gICAgICAgIGlmICghbGlua2VkRmlsZSkge1xuICAgICAgICAgIGJyb2tlbkxpbmtzLnB1c2gobGluayk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGJyb2tlbkxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYnJva2VuTGlua3NEYXRhLnB1c2goeyBmaWxlLCBicm9rZW5MaW5rcyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnJva2VuTGlua3NEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgb3JwaGFuZWQgbm90ZXMgKG5vdGVzIHdpdGggbm8gYmFja2xpbmtzKVxuICAgKi9cbiAgYXN5bmMgZmluZE9ycGhhbmVkTm90ZXMoKTogUHJvbWlzZTxURmlsZVtdPiB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gdGhpcy5wbHVnaW4uYXBwO1xuICAgIGNvbnN0IGZpbGVzID0gdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IG9ycGhhbmVkTm90ZXM6IFRGaWxlW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgY29uc3QgYmFja2xpbmtzID0gYXdhaXQgdGhpcy5maW5kQmFja2xpbmtzKGZpbGUpO1xuICAgICAgaWYgKGJhY2tsaW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgb3JwaGFuZWROb3Rlcy5wdXNoKGZpbGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcnBoYW5lZE5vdGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGxpbmsgc3VnZ2VzdGlvbnMgYmFzZWQgb24gY29udGVudCBzaW1pbGFyaXR5XG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZUxpbmtTdWdnZXN0aW9ucyhmaWxlOiBURmlsZSwgbGltaXQ6IG51bWJlciA9IDUpOiBQcm9taXNlPExpbmtTdWdnZXN0aW9uW10+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHA7XG4gICAgY29uc3QgZmlsZXMgPSB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IExpbmtTdWdnZXN0aW9uW10gPSBbXTtcblxuICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChmaWxlKTtcbiAgICBjb25zdCBjdXJyZW50V29yZHMgPSB0aGlzLmV4dHJhY3RXb3JkcyhjdXJyZW50Q29udGVudCk7XG5cbiAgICBmb3IgKGNvbnN0IG90aGVyRmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKG90aGVyRmlsZS5wYXRoID09PSBmaWxlLnBhdGgpIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCBvdGhlckNvbnRlbnQgPSBhd2FpdCB2YXVsdC5yZWFkKG90aGVyRmlsZSk7XG4gICAgICBjb25zdCBvdGhlcldvcmRzID0gdGhpcy5leHRyYWN0V29yZHMob3RoZXJDb250ZW50KTtcblxuICAgICAgY29uc3QgcmVsZXZhbmNlID0gdGhpcy5jYWxjdWxhdGVSZWxldmFuY2UoY3VycmVudFdvcmRzLCBvdGhlcldvcmRzKTtcblxuICAgICAgaWYgKHJlbGV2YW5jZSA+IDAuMSkgeyAvLyBUaHJlc2hvbGQgZm9yIHJlbGV2YW5jZVxuICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKHtcbiAgICAgICAgICB0aXRsZTogb3RoZXJGaWxlLmJhc2VuYW1lLFxuICAgICAgICAgIHBhdGg6IG90aGVyRmlsZS5wYXRoLFxuICAgICAgICAgIHJlbGV2YW5jZSxcbiAgICAgICAgICB0eXBlOiAnZXhpc3RpbmcnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnQgYnkgcmVsZXZhbmNlIGFuZCByZXR1cm4gdG9wIHN1Z2dlc3Rpb25zXG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5yZWxldmFuY2UgLSBhLnJlbGV2YW5jZSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBtZWFuaW5nZnVsIHdvcmRzIGZyb20gY29udGVudFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0V29yZHMoY29udGVudDogc3RyaW5nKTogU2V0PHN0cmluZz4ge1xuICAgIGNvbnN0IHdvcmRzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgdGV4dCA9IGNvbnRlbnRcbiAgICAgIC5yZXBsYWNlKC9bIypgXFxbXFxdKCldL2csICcnKSAvLyBSZW1vdmUgbWFya2Rvd24gc3ludGF4XG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnNwbGl0KC9cXHMrLyk7XG5cbiAgICBmb3IgKGNvbnN0IHdvcmQgb2YgdGV4dCkge1xuICAgICAgaWYgKHdvcmQubGVuZ3RoID4gMyAmJiAhdGhpcy5pc1N0b3BXb3JkKHdvcmQpKSB7XG4gICAgICAgIHdvcmRzLmFkZCh3b3JkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gd29yZHM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHJlbGV2YW5jZSBiZXR3ZWVuIHR3byBzZXRzIG9mIHdvcmRzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVJlbGV2YW5jZSh3b3JkczE6IFNldDxzdHJpbmc+LCB3b3JkczI6IFNldDxzdHJpbmc+KTogbnVtYmVyIHtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBuZXcgU2V0KFsuLi53b3JkczFdLmZpbHRlcih3b3JkID0+IHdvcmRzMi5oYXMod29yZCkpKTtcbiAgICBjb25zdCB1bmlvbiA9IG5ldyBTZXQoWy4uLndvcmRzMSwgLi4ud29yZHMyXSk7XG5cbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uLnNpemUgLyB1bmlvbi5zaXplOyAvLyBKYWNjYXJkIHNpbWlsYXJpdHlcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHdvcmQgaXMgYSBzdG9wIHdvcmRcbiAgICovXG4gIHByaXZhdGUgaXNTdG9wV29yZCh3b3JkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdG9wV29yZHMgPSBuZXcgU2V0KFtcbiAgICAgICd0aGUnLCAnYScsICdhbicsICdhbmQnLCAnb3InLCAnYnV0JywgJ2luJywgJ29uJywgJ2F0JywgJ3RvJywgJ2ZvcicsXG4gICAgICAnb2YnLCAnd2l0aCcsICdieScsICdpcycsICdhcmUnLCAnd2FzJywgJ3dlcmUnLCAnYmUnLCAnYmVlbicsICdoYXZlJyxcbiAgICAgICdoYXMnLCAnaGFkJywgJ2RvJywgJ2RvZXMnLCAnZGlkJywgJ3dpbGwnLCAnd291bGQnLCAnY291bGQnLCAnc2hvdWxkJyxcbiAgICAgICdtYXknLCAnbWlnaHQnLCAnbXVzdCcsICdjYW4nLCAndGhpcycsICd0aGF0JywgJ3RoZXNlJywgJ3Rob3NlJ1xuICAgIF0pO1xuXG4gICAgcmV0dXJuIHN0b3BXb3Jkcy5oYXMod29yZCk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgVG9rZW4gfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBUb2tlbml6ZXIge1xuICAvKipcbiAgICogVG9rZW5pemUgYW4gRW1tZXQtbGlrZSBzaG9ydGNvZGUgc3RyaW5nXG4gICAqL1xuICB0b2tlbml6ZShpbnB1dDogc3RyaW5nKTogVG9rZW5bXSB7XG4gICAgY29uc3QgdG9rZW5zOiBUb2tlbltdID0gW107XG4gICAgbGV0IGN1cnJlbnRQb3MgPSAwO1xuXG4gICAgd2hpbGUgKGN1cnJlbnRQb3MgPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBpbnB1dFtjdXJyZW50UG9zXTtcblxuICAgICAgLy8gSGFuZGxlIGVsZW1lbnQgbmFtZXMgKGgxLCBwLCBkaXYsIGV0YylcbiAgICAgIGlmICh0aGlzLmlzTmFtZUNoYXIoY2hhcikpIHtcbiAgICAgICAgY29uc3QgeyB0b2tlbiwgbmV3UG9zIH0gPSB0aGlzLnRva2VuaXplRWxlbWVudChpbnB1dCwgY3VycmVudFBvcyk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY3VycmVudFBvcyA9IG5ld1BvcztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBvcGVyYXRvcnMgKD4sICssICopXG4gICAgICBpZiAodGhpcy5pc09wZXJhdG9yKGNoYXIpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnb3BlcmF0b3InLFxuICAgICAgICAgIHZhbHVlOiBjaGFyXG4gICAgICAgIH0pO1xuICAgICAgICBjdXJyZW50UG9zKys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgY29udGVudCB3aXRoaW4gY3VybHkgYnJhY2VzIHtjb250ZW50fVxuICAgICAgaWYgKGNoYXIgPT09ICd7Jykge1xuICAgICAgICBjb25zdCB7IHRva2VuLCBuZXdQb3MgfSA9IHRoaXMudG9rZW5pemVDb250ZW50KGlucHV0LCBjdXJyZW50UG9zKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjdXJyZW50UG9zID0gbmV3UG9zO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGF0dHJpYnV0ZXMgd2l0aGluIHNxdWFyZSBicmFja2V0cyBbYXR0cl1cbiAgICAgIGlmIChjaGFyID09PSAnWycpIHtcbiAgICAgICAgY29uc3QgeyB0b2tlbiwgbmV3UG9zIH0gPSB0aGlzLnRva2VuaXplQXR0cmlidXRlKGlucHV0LCBjdXJyZW50UG9zKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjdXJyZW50UG9zID0gbmV3UG9zO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGdyb3VwcyB3aXRoIHBhcmVudGhlc2VzIChncm91cClcbiAgICAgIGlmIChjaGFyID09PSAnKCcpIHtcbiAgICAgICAgY29uc3QgeyB0b2tlbiwgbmV3UG9zIH0gPSB0aGlzLnRva2VuaXplR3JvdXAoaW5wdXQsIGN1cnJlbnRQb3MpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGN1cnJlbnRQb3MgPSBuZXdQb3M7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBTa2lwIHdoaXRlc3BhY2VcbiAgICAgIGlmIChjaGFyID09PSAnICcgfHwgY2hhciA9PT0gJ1xcdCcgfHwgY2hhciA9PT0gJ1xcbicpIHtcbiAgICAgICAgY3VycmVudFBvcysrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVW5rbm93biBjaGFyYWN0ZXJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXI6ICR7Y2hhcn0gYXQgcG9zaXRpb24gJHtjdXJyZW50UG9zfWApO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cblxuICBwcml2YXRlIHRva2VuaXplRWxlbWVudChpbnB1dDogc3RyaW5nLCBzdGFydFBvczogbnVtYmVyKTogeyB0b2tlbjogVG9rZW4sIG5ld1BvczogbnVtYmVyIH0ge1xuICAgIGxldCBlbmRQb3MgPSBzdGFydFBvcztcbiAgICB3aGlsZSAoZW5kUG9zIDwgaW5wdXQubGVuZ3RoICYmIHRoaXMuaXNOYW1lQ2hhcihpbnB1dFtlbmRQb3NdKSkge1xuICAgICAgZW5kUG9zKys7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIG11bHRpcGxpZXIgKCpOKVxuICAgIGlmIChlbmRQb3MgPCBpbnB1dC5sZW5ndGggJiYgaW5wdXRbZW5kUG9zXSA9PT0gJyonKSB7XG4gICAgICBjb25zdCBlbGVtZW50TmFtZSA9IGlucHV0LnN1YnN0cmluZyhzdGFydFBvcywgZW5kUG9zKTtcbiAgICAgIGVuZFBvcysrOyAvLyBTa2lwIHRoZSAqXG5cbiAgICAgIC8vIFBhcnNlIHRoZSBudW1iZXJcbiAgICAgIGNvbnN0IG51bWJlclN0YXJ0UG9zID0gZW5kUG9zO1xuICAgICAgd2hpbGUgKGVuZFBvcyA8IGlucHV0Lmxlbmd0aCAmJiAvXFxkLy50ZXN0KGlucHV0W2VuZFBvc10pKSB7XG4gICAgICAgIGVuZFBvcysrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtdWx0aXBsaWVyID0gcGFyc2VJbnQoaW5wdXQuc3Vic3RyaW5nKG51bWJlclN0YXJ0UG9zLCBlbmRQb3MpLCAxMCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgdHlwZTogJ2VsZW1lbnQnLFxuICAgICAgICAgIHZhbHVlOiBlbGVtZW50TmFtZSxcbiAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgIHR5cGU6ICdtdWx0aXBsaWVyJyxcbiAgICAgICAgICAgIHZhbHVlOiBtdWx0aXBsaWVyLnRvU3RyaW5nKClcbiAgICAgICAgICB9XVxuICAgICAgICB9LFxuICAgICAgICBuZXdQb3M6IGVuZFBvc1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW46IHtcbiAgICAgICAgdHlwZTogJ2VsZW1lbnQnLFxuICAgICAgICB2YWx1ZTogaW5wdXQuc3Vic3RyaW5nKHN0YXJ0UG9zLCBlbmRQb3MpXG4gICAgICB9LFxuICAgICAgbmV3UG9zOiBlbmRQb3NcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0b2tlbml6ZUNvbnRlbnQoaW5wdXQ6IHN0cmluZywgc3RhcnRQb3M6IG51bWJlcik6IHsgdG9rZW46IFRva2VuLCBuZXdQb3M6IG51bWJlciB9IHtcbiAgICBsZXQgZW5kUG9zID0gc3RhcnRQb3MgKyAxOyAvLyBTa2lwIG9wZW5pbmcge1xuICAgIGxldCBkZXB0aCA9IDE7XG5cbiAgICB3aGlsZSAoZW5kUG9zIDwgaW5wdXQubGVuZ3RoICYmIGRlcHRoID4gMCkge1xuICAgICAgaWYgKGlucHV0W2VuZFBvc10gPT09ICd7JykgZGVwdGgrKztcbiAgICAgIGlmIChpbnB1dFtlbmRQb3NdID09PSAnfScpIGRlcHRoLS07XG4gICAgICBlbmRQb3MrKztcbiAgICB9XG5cbiAgICBpZiAoZGVwdGggIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5jbG9zZWQgY29udGVudCBicmFjZXMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW46IHtcbiAgICAgICAgdHlwZTogJ2NvbnRlbnQnLFxuICAgICAgICB2YWx1ZTogaW5wdXQuc3Vic3RyaW5nKHN0YXJ0UG9zICsgMSwgZW5kUG9zIC0gMSlcbiAgICAgIH0sXG4gICAgICBuZXdQb3M6IGVuZFBvc1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRva2VuaXplQXR0cmlidXRlKGlucHV0OiBzdHJpbmcsIHN0YXJ0UG9zOiBudW1iZXIpOiB7IHRva2VuOiBUb2tlbiwgbmV3UG9zOiBudW1iZXIgfSB7XG4gICAgbGV0IGVuZFBvcyA9IHN0YXJ0UG9zICsgMTsgLy8gU2tpcCBvcGVuaW5nIFtcbiAgICBsZXQgZGVwdGggPSAxO1xuXG4gICAgd2hpbGUgKGVuZFBvcyA8IGlucHV0Lmxlbmd0aCAmJiBkZXB0aCA+IDApIHtcbiAgICAgIGlmIChpbnB1dFtlbmRQb3NdID09PSAnWycpIGRlcHRoKys7XG4gICAgICBpZiAoaW5wdXRbZW5kUG9zXSA9PT0gJ10nKSBkZXB0aC0tO1xuICAgICAgZW5kUG9zKys7XG4gICAgfVxuXG4gICAgaWYgKGRlcHRoICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuY2xvc2VkIGF0dHJpYnV0ZSBicmFja2V0cycpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0b2tlbjoge1xuICAgICAgICB0eXBlOiAnYXR0cmlidXRlJyxcbiAgICAgICAgdmFsdWU6IGlucHV0LnN1YnN0cmluZyhzdGFydFBvcyArIDEsIGVuZFBvcyAtIDEpXG4gICAgICB9LFxuICAgICAgbmV3UG9zOiBlbmRQb3NcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0b2tlbml6ZUdyb3VwKGlucHV0OiBzdHJpbmcsIHN0YXJ0UG9zOiBudW1iZXIpOiB7IHRva2VuOiBUb2tlbiwgbmV3UG9zOiBudW1iZXIgfSB7XG4gICAgbGV0IGVuZFBvcyA9IHN0YXJ0UG9zICsgMTsgLy8gU2tpcCBvcGVuaW5nIChcbiAgICBsZXQgZGVwdGggPSAxO1xuXG4gICAgd2hpbGUgKGVuZFBvcyA8IGlucHV0Lmxlbmd0aCAmJiBkZXB0aCA+IDApIHtcbiAgICAgIGlmIChpbnB1dFtlbmRQb3NdID09PSAnKCcpIGRlcHRoKys7XG4gICAgICBpZiAoaW5wdXRbZW5kUG9zXSA9PT0gJyknKSBkZXB0aC0tO1xuICAgICAgZW5kUG9zKys7XG4gICAgfVxuXG4gICAgaWYgKGRlcHRoICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuY2xvc2VkIGdyb3VwIHBhcmVudGhlc2VzJyk7XG4gICAgfVxuXG4gICAgLy8gVG9rZW5pemUgdGhlIGNvbnRlbnRzIG9mIHRoZSBncm91cFxuICAgIGNvbnN0IGdyb3VwQ29udGVudCA9IGlucHV0LnN1YnN0cmluZyhzdGFydFBvcyArIDEsIGVuZFBvcyAtIDEpO1xuICAgIGNvbnN0IGNoaWxkVG9rZW5zID0gbmV3IFRva2VuaXplcigpLnRva2VuaXplKGdyb3VwQ29udGVudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW46IHtcbiAgICAgICAgdHlwZTogJ2dyb3VwJyxcbiAgICAgICAgdmFsdWU6IGdyb3VwQ29udGVudCxcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkVG9rZW5zXG4gICAgICB9LFxuICAgICAgbmV3UG9zOiBlbmRQb3NcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBpc05hbWVDaGFyKGNoYXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAvW2EtekEtWjAtOV8tXS8udGVzdChjaGFyKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNPcGVyYXRvcihjaGFyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gY2hhciA9PT0gJz4nIHx8IGNoYXIgPT09ICcrJyB8fCBjaGFyID09PSAnKic7XG4gIH1cbn0iLCAiaW1wb3J0IHsgVG9rZW4sIEFTVE5vZGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBQYXJzZXIge1xuICAvKipcbiAgICogUGFyc2UgdG9rZW5zIGludG8gYW4gQWJzdHJhY3QgU3ludGF4IFRyZWVcbiAgICovXG4gIHBhcnNlKHRva2VuczogVG9rZW5bXSk6IEFTVE5vZGVbXSB7XG4gICAgY29uc3QgYXN0OiBBU1ROb2RlW10gPSBbXTtcbiAgICBsZXQgY3VycmVudE5vZGU6IEFTVE5vZGUgfCBudWxsID0gbnVsbDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2VsZW1lbnQnOlxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBlbGVtZW50IG5vZGVcbiAgICAgICAgICBjdXJyZW50Tm9kZSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdlbGVtZW50JyxcbiAgICAgICAgICAgIG5hbWU6IHRva2VuLnZhbHVlLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIENoZWNrIGZvciBtdWx0aXBsaWVyXG4gICAgICAgICAgaWYgKHRva2VuLmNoaWxkcmVuICYmIHRva2VuLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSB0b2tlbi5jaGlsZHJlbi5maW5kKGNoaWxkID0+IGNoaWxkLnR5cGUgPT09ICdtdWx0aXBsaWVyJyk7XG4gICAgICAgICAgICBpZiAobXVsdGlwbGllcikge1xuICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5yZXBlYXQgPSBwYXJzZUludChtdWx0aXBsaWVyLnZhbHVlLCAxMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXN0LnB1c2goY3VycmVudE5vZGUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2NvbnRlbnQnOlxuICAgICAgICAgIC8vIEFkZCBjb250ZW50IHRvIHRoZSBjdXJyZW50IG5vZGVcbiAgICAgICAgICBpZiAoY3VycmVudE5vZGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlLmNvbnRlbnQgPSB0b2tlbi52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgICAvLyBQYXJzZSBhdHRyaWJ1dGVzIGFuZCBhZGQgdG8gY3VycmVudCBub2RlXG4gICAgICAgICAgaWYgKGN1cnJlbnROb2RlKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZS5hdHRyaWJ1dGVzID0gdGhpcy5wYXJzZUF0dHJpYnV0ZXModG9rZW4udmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdvcGVyYXRvcic6XG4gICAgICAgICAgLy8gSGFuZGxlIG9wZXJhdG9yc1xuICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gJz4nICYmIGkgKyAxIDwgdG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gQ2hpbGQgb3BlcmF0b3IgLSBwcm9jZXNzIHRoZSBuZXh0IHRva2VuIGFzIGEgY2hpbGQgb2YgY3VycmVudFxuICAgICAgICAgICAgY29uc3QgY2hpbGRUb2tlbnMgPSBbdG9rZW5zWysraV1dO1xuICAgICAgICAgICAgY29uc3QgY2hpbGROb2RlcyA9IHRoaXMucGFyc2UoY2hpbGRUb2tlbnMpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudE5vZGUgJiYgY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnROb2RlLmNoaWxkcmVuID0gY3VycmVudE5vZGUuY2hpbGRyZW4gfHwgW107XG4gICAgICAgICAgICAgIGN1cnJlbnROb2RlLmNoaWxkcmVuLnB1c2goLi4uY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICAgIC8vIFNldCBwYXJlbnQgcmVmZXJlbmNlXG4gICAgICAgICAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZCA9PiBjaGlsZC5wYXJlbnQgPSBjdXJyZW50Tm9kZSEubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0b2tlbi52YWx1ZSA9PT0gJysnKSB7XG4gICAgICAgICAgICAvLyBTaWJsaW5nIG9wZXJhdG9yIC0ganVzdCBjb250aW51ZSB0byBuZXh0IHRva2VuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgIC8vIFByb2Nlc3MgZ3JvdXAgYXMgYSBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzXG4gICAgICAgICAgaWYgKHRva2VuLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cE5vZGVzID0gdGhpcy5wYXJzZSh0b2tlbi5jaGlsZHJlbik7XG4gICAgICAgICAgICBhc3QucHVzaCguLi5ncm91cE5vZGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFzdDtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VBdHRyaWJ1dGVzKGF0dHJTdHJpbmc6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgIC8vIFNpbXBsZSBhdHRyaWJ1dGUgcGFyc2luZyAtIGNhbiBiZSBlbmhhbmNlZCBmb3IgbW9yZSBjb21wbGV4IGNhc2VzXG4gICAgaWYgKGF0dHJTdHJpbmcuaW5jbHVkZXMoJz0nKSkge1xuICAgICAgLy8gRm9ybWF0OiBhdHRyMT12YWx1ZTEgYXR0cjI9dmFsdWUyXG4gICAgICBjb25zdCBwYWlycyA9IGF0dHJTdHJpbmcuc3BsaXQoL1xccysvKTtcbiAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwYWlyLnNwbGl0KCc9Jyk7XG4gICAgICAgIGlmIChrZXkgJiYgdmFsdWUpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzW2tleV0gPSB2YWx1ZS5yZXBsYWNlKC9bXCInXS9nLCAnJyk7IC8vIFJlbW92ZSBxdW90ZXNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaW5nbGUgdmFsdWUgYXR0cmlidXRlXG4gICAgICBhdHRyaWJ1dGVzLnZhbHVlID0gYXR0clN0cmluZztcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSB0aGUgQVNUIHN0cnVjdHVyZVxuICAgKi9cbiAgdmFsaWRhdGUoYXN0OiBBU1ROb2RlW10pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgYXN0KSB7XG4gICAgICBpZiAoIW5vZGUubmFtZSAmJiBub2RlLnR5cGUgPT09ICdlbGVtZW50Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGUobm9kZS5jaGlsZHJlbikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSIsICJcbmltcG9ydCB7IEFTVE5vZGUgfSBmcm9tICcuLi90eXBlcyc7XG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtZXIge1xuICB0cmFuc2Zvcm0oYXN0OiBBU1ROb2RlW10pOiBzdHJpbmcge1xuICAgIHJldHVybiBhc3QubWFwKG5vZGUgPT4gbm9kZS5jb250ZW50IHx8ICcnKS5qb2luKCdcXG4nKTtcbiAgfVxufVxuIiwgIlxuaW1wb3J0IExpbmtQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUb2tlbml6ZXIgfSBmcm9tICcuL3Rva2VuaXplcic7XG5pbXBvcnQgeyBQYXJzZXIgfSBmcm9tICcuL3BhcnNlcic7XG5pbXBvcnQgeyBUcmFuc2Zvcm1lciB9IGZyb20gJy4vdHJhbnNmb3JtZXInO1xuXG5leHBvcnQgY2xhc3MgU2hvcnRjb2RlTWFuYWdlciB7XG4gIHBsdWdpbjogTGlua1BsdWdpbjtcbiAgdG9rZW5pemVyOiBUb2tlbml6ZXI7XG4gIHBhcnNlcjogUGFyc2VyO1xuICB0cmFuc2Zvcm1lcjogVHJhbnNmb3JtZXI7XG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTGlua1BsdWdpbikge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMudG9rZW5pemVyID0gbmV3IFRva2VuaXplcigpO1xuICAgIHRoaXMucGFyc2VyID0gbmV3IFBhcnNlcigpO1xuICAgIHRoaXMudHJhbnNmb3JtZXIgPSBuZXcgVHJhbnNmb3JtZXIoKTtcbiAgfVxuXG4gIGNoZWNrRm9yU2hvcnRjb2RlcyhlZGl0b3I6IEVkaXRvcik6IHZvaWQge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIHBsYWNlaG9sZGVyXG4gIH1cblxuICBzaG93SGVscE1vZGFsKCk6IHZvaWQge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIHBsYWNlaG9sZGVyXG4gIH1cbn1cbiIsICJcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBMaW5rUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgRXJyb3JIYW5kbGVyIHtcbiAgcGx1Z2luOiBMaW5rUGx1Z2luO1xuICBcbiAgY29uc3RydWN0b3IocGx1Z2luOiBMaW5rUGx1Z2luKSB7IFxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luOyBcbiAgfVxuICBcbiAgaGFuZGxlRXJyb3IoZXJyb3I6IGFueSwgY29udGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKGAke2NvbnRleHR9OiAke21lc3NhZ2V9YCk7XG4gICAgbmV3IE5vdGljZShgJHtjb250ZXh0fTogJHttZXNzYWdlfWApO1xuICB9XG5cbiAgc2hvd05vdGljZShtZXNzYWdlOiBzdHJpbmcsIGR1cmF0aW9uPzogbnVtYmVyKTogdm9pZCB7XG4gICAgbmV3IE5vdGljZShtZXNzYWdlLCBkdXJhdGlvbik7XG4gIH1cblxuICBzaG93U3VjY2VzcyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBuZXcgTm90aWNlKG1lc3NhZ2UsIDMwMDApO1xuICB9XG5cbiAgc2hvd1dhcm5pbmcobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgbmV3IE5vdGljZShgXHUyNkEwXHVGRTBGICR7bWVzc2FnZX1gLCA1MDAwKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFDYSxxQkFHQSxxQkE2Q0Esc0JBTUEsYUFZQSxnQkFpQ0EsY0F3QkEsbUJBNEJBO0FBeEpiO0FBQUE7QUFBQTtBQUNPLElBQU0sc0JBQXNCO0FBRzVCLElBQU0sc0JBQXNCO0FBQUEsTUFDakM7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGO0FBd0NPLElBQU0sdUJBQXVCO0FBQUEsTUFDbEM7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0Y7QUFFTyxJQUFNLGNBQWM7QUFBQSxNQUN6QixvQkFBb0I7QUFBQSxNQUNwQixtQkFBbUI7QUFBQSxNQUNuQixvQkFBb0I7QUFBQSxNQUNwQixtQkFBbUI7QUFBQSxNQUNuQixvQkFBb0I7QUFBQSxNQUNwQix3QkFBd0I7QUFBQSxNQUN4QixrQkFBa0I7QUFBQSxNQUNsQix1QkFBdUI7QUFBQSxJQUN6QjtBQUdPLElBQU0saUJBQWlCO0FBQUEsTUFDNUIsZUFBZTtBQUFBLFFBQ2IsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsU0FBUztBQUFBLE1BQ1g7QUFBQSxNQUNBLGFBQWE7QUFBQSxRQUNYLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxNQUNYO0FBQUEsTUFDQSxpQkFBaUI7QUFBQSxRQUNmLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxNQUNYO0FBQUEsTUFDQSxnQkFBZ0I7QUFBQSxRQUNkLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxNQUNYO0FBQUEsTUFDQSxtQkFBbUI7QUFBQSxRQUNqQixNQUFNO0FBQUEs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SyxhQUFhLFlBQVksT0FBTyxrQ0FBa0M7QUFBQSxRQUN6RTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNkLFlBQUk7QUFDRixlQUFLLGlCQUFpQixjQUFjO0FBQUEsUUFDdEMsU0FBUyxPQUFQO0FBQ0EsZUFBSyxhQUFhLFlBQVksT0FBTywrQkFBK0I7QUFBQSxRQUN0RTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNkLFlBQUk7QUFDRixlQUFLLGNBQWMscUJBQXFCO0FBQUEsUUFDMUMsU0FBUyxPQUFQO0FBQ0EsZUFBSyxhQUFhLFlBQVksT0FBTywrQkFBK0I7QUFBQSxRQUN0RTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSx3QkFBd0I7QUFFdEIsU0FBSztBQUFBLE1BQ0gsS0FBSyxJQUFJLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxXQUFXO0FBQ2pELFlBQUksS0FBSyxTQUFTLGtCQUFrQjtBQUNsQyxlQUFLLGlCQUFpQixtQkFBbUIsTUFBTTtBQUFBLFFBQ2pEO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUdBLFNBQUs7QUFBQSxNQUNILEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLFNBQVM7QUFFcEMsWUFBSSxVQUFVLFFBQVEsY0FBYyxRQUFRLGVBQWUsUUFDdkQsS0FBSyxLQUFLLFNBQVMsS0FBSyxTQUFTLGlCQUFpQixHQUFHO0FBQ3ZELGVBQUssZUFBZSxtQkFBbUIsSUFBYTtBQUFBLFFBQ3REO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUdBLFNBQUs7QUFBQSxNQUNILEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLFNBQVM7QUFFcEMsWUFBSSxLQUFLLFNBQVMsV0FBVztBQUMzQixrQkFBUSxJQUFJLGtCQUFrQixLQUFLLElBQUk7QUFBQSxRQUN6QztBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQUEsRUFFQSxXQUFXO0FBQ1QsWUFBUSxJQUFJLHNCQUFzQjtBQUdsQyxRQUFJLEtBQUssZUFBZTtBQUN0QixXQUFLLGNBQWMsUUFBUTtBQUFBLElBQzdCO0FBQUEsRUFDRjtBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiREVGQVVMVF9TRVRUSU5HUyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
